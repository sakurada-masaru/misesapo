# プロジェクト引き継ぎドキュメント (2026-01-10)

## 1. 概要
Sales Entrance ページのUI刷新と、独立した社内チャット（チームチャット）機能の実装を行いました。

## 2. 実装済みの機能

### UI/Layout
- **FF14風チャットログシステム**:
    - **Generalタブ**: 全てのメッセージ（MISOGI会話 + 社内チャット）を表示。
    - **Eventタブ**: MISOGIとの会話（AI/User）のみを表示。
    - **Callタブ**: 社内チャット（Team）のみを表示。
- **操作性**:
    - **Alt + ドラッグ**: ログコンテナを画面内の自由な位置へ移動可能。
    - **リサイズ**: 右辺、上辺、右上角をドラッグしてサイズ変更可能。
    - **永続化**: 位置とサイズは `localStorage` に保存され、リロード後も維持。
    - **xボタン**: ログ表示部のみを隠し、ボタン類は残す仕様に変更。
- **入力欄の分離**:
    - 中央下部の入力欄：MISOGIとの会話専用。
    - ログパネル下部の入力欄：社内チャット専用。

### バックエンド (AWS)
- **DynamoDB**: `team-messages` テーブル作成済み。
- **Lambda**: `misesapo-team-chat` 作成済み。
- **API Gateway**: `https://51bhoxkbxd.execute-api.ap-northeast-1.amazonaws.com/prod/chat` にエンドポイントを追加。
- **通信方式**: 現状はコストを抑えるため **5秒おきのポーリング** 方式を採用。

## 3. 技術的詳細
- **言語/フレームワーク**: HTML/CSS/Vanilla JS (No Framework)
- **JOB_TYPES**: 各部署のキーワードとカラー（Sales: オレンジ, Cleaning: 緑など）を定義。
- **z-index管理**:
    - チャットログコンテナ: `500`
    - メインチャットコンテナ: `400`
    - スタートオーバーレイ: `2000`

## 4. 今後の課題・未完了項目
1. **チャンネルの切り替え詳細**: 現在は `#` ボタンからチャンネル選択モーダルが開くが、インライン入力欄がどのチャンネルに送信するかをより直感的に選択できるUIの検討。
2. **WebSocket移行 (Phase 2)**: ユーザー数や要望が増えた場合、5秒のラグをなくすために WebSocket（API Gateway WebSocket API）への移行が必要。
3. **DM機能**: 特定個人へのメッセージ送受信機能の追加。

## 5. 動作確認方法
1. ログイン後、左下のチャットログを確認。
2. `Alt` を押しながらコンテナを動かせるか確認。
3. リサイズハンドル（右・上・角）で大きさを変えられるか確認。
4. `Call` タブでメッセージを入力し、送信できるか確認。

---
作成者: Antigravity (AI Assistant)
