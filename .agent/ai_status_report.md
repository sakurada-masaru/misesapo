# MISESAPO プロジェクト：AI活用状況・進捗レポート

## 1. プロジェクト概要
- **名称**: MISESAPO (ミセサポ)
- **コンセプト**: 店舗管理・業務支援を行うAI搭載ハイエンドWEBアプリケーション。
- **UI/UX思想**: サイバーパンク/ネオン/CRTエフェクトを取り入れた高級感のあるデザイン。AIアシスタント「MISOGI」との対話を軸に業務を進める。

## 2. AIアシスタント「MISOGI」のインターフェース
### ビジュアル・アイデンティティ (Visualizer)
- 画面中央の流体アニメーション（CSS `border-radius` を駆使した動き）。
- **状態（Class）による変化**:
    - `active`: 脈動が激しくなり、ユーザーの入力を待機。
    - `live-mode`: **赤色**に変化、形状が**非常にトゲトゲしく**変形、高速で呼吸（脈動）する。
- **テキストリング**: AIの名前やステータスが円形に回転し、モードに応じて回転速度が変化。

### 対話・ロジック (Dialogue Engine)
- **State-based Flow**: `reportWizardState` などの状態オブジェクトを持ち、フェーズごとにAIが次のアクション（撮影・メモ・選択）をガイドする。
- **最新メッセージ**: 
    - **PC版**: 画面下部で対話履歴を表示。
    - **SP版 (モバイル)**: **操作スペース確保のため、AIメッセージを画面上部（`top: 60px`）に配置**し、最大高さを制限。

## 3. 「清掃モード」の最新実装状況
最近のアップデートで、非常に詳細なライブ業務フローを実装済み。

### LIVEモード (3フェーズ・ワークフロー)
1. **作業前 (Before)**: カメラ撮影、サムネイルによるプレビュー確認、複数枚対応。
2. **作業中 (Working)**: 経過時間のリアルタイム計測（タイマー表示）、作業メモ入力。
3. **作業後 (After)**: 仕上がり撮影、サムネイルプレビュー、最終確認画面。
- **提出**: 全データ（写真、メモ、時間）を一括で管理・送信。

### AFTERモード (事後報告)
- カメラ撮影だけでなく、**スマホのライブラリ（写真フォルダ）から写真を選択**できる仕様。

### 顧客選択の階層化ロジック
- スケジュールがない場合、以下の3段階で顧客を特定する階層検索を実装：
    1. **🏢 法人 (Company)**: 企業名を選択・検索。
    2. **🏷️ ブランド (Brand)**: 選択した法人に紐づくブランドを選択・検索。
    3. **🏪 店舗 (Store)**: 最終的な店舗を選択。
- 表示名は「ブランド名（店舗名）」を優先し、利用者の直感に合わせている。

## 4. 営業側 (Sales) の今後の課題
- **UI一貫性**: モバイル版のメッセージ配置を清掃側と同じ（上部表示）に合わせる。
- **スケジュールの生成元**: 営業側で作成したスケジュールが清掃側の「本日の作業」に反映される統合。
- **顧客管理**: 清掃側と同じ3段階の階層（法人・ブランド・店）で新規顧客を登録・管理する機能。

## 5. 技術スタック
- **Frontend**: HTML5, CSS3 (Vanilla), JavaScript (Vanilla ES6+).
- **Backend**: AWS API Gateway + Lambda (Python), Gemini API (Google Generative AI).
- **Icons**: FontAwesome 6, Google Fonts (Inter).
