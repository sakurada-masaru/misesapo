# 清掃モード (Cleaning Mode) 実装状況引き継ぎ書

📅 **最終更新日時:** 2026-01-10
📝 **担当:** Antigravity -> OPUS

## 🚀 現在のステータス
清掃モード (`src/pages/entrance/cleaning/index.html`) のモバイル対応とレポート作成機能の強化を行っている途中です。

### ✅ 実装完了・FIX済み
1. **モバイルUIの大幅刷新**
   - **コンセプト:** 現場で使いやすいMISOGI対話特化型UI（LINE風チャットログは廃止）
   - **レイアウト:**
     - チームチャットログを完全非表示
     - MISOGIのメッセージバブルを画面中央に大きく表示
     - アクションボタンを大型化（min-height: 56px）し、下部に配置
     - 入力欄を画面最下部に固定（iOS Safe Area対応）
     - ハンバーガーメニューによるサイドバー制御
   - **ビジュアライザー:** 上半分を画面外に出し、`overflow: hidden` で見切れを防止

2. **レポート作成ウィザードのモード分岐**
   - **LIVEモード (🔴)**: 作業中にリアルタイムで記録するモード
   - **AFTERモード (📝)**: 作業後に詳細を入力するモード
   - `startReportWizard()` 起動時にモード選択画面を表示するように変更済み

3. **ビジュアライザーの動的変化**
   - LIVEモード選択時、ビジュアライザーが「トゲトゲ」「高速回転」「高速波紋」の**アクティブ状態**に変化するCSSアニメーションを実装済み

4. **カメラボタンの整理**
   - 重複していたカメラボタンを削除
   - モバイル版ではチャット入力欄のカメラボタンを非表示（レポートウィザード内での撮影に一本化するため）

### 🚧 仕掛かり中 (WIP) / 次のステップ
以下の機能実装の途中、またはこれから着手する段階です。OPUSはここから引き継いでください。

1. **LIVEモード / AFTERモードの挙動実装**
   - モード選択後の具体的なフローが未実装（現在はスケジュール取得まで）。
   - **LIVEモード:** 「作業開始」→「写真撮影（随時）」→「完了」のフローを組む必要がある。
   - **AFTERモード:** 既存の手動入力フローを統合し、スケジュールがない場合の「店舗名手入力」フローをスムーズにする。

2. **イレギュラー対応（スケジュール未登録）の強化**
   - ユーザーの強い要望：「スケジュールがなくてもレポートを作れるようにしたい」
   - `showManualStoreInput()` はあるが、GPS検索や履歴からの選択など、より入力しやすい補助機能が必要。

3. **モバイルレイアウトの微調整**
   - 実機での確認と微調整（アクションボタンの位置など）。

## 💡 UI/UX 設計思想（重要）
- **現場ファースト:** 手袋をしていても押せる大きなボタン、片手操作。
- **MISOGI中心:** 画面上のノイズ（チームチャット等）を減らし、AIとの対話に集中させる。
- **直感的なフィードバック:** モードによってビジュアライザーの形状を変え、現在の状態を視覚的に伝える。

## 📂 関連ファイル
- `src/pages/entrance/cleaning/index.html`: メインファイル（ロジック・スタイル含む）
