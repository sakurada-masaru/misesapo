# 営業モード (Sales Mode) 設計書

📅 **作成日:** 2026-01-10
📝 **目的:** 顧客登録プロセスの効率化・スムーズ化

## 🎯 目標
営業担当者が現場（移動中や商談直後）で、ストレスなく新規顧客情報を登録できるようにする。
特に「名刺スキャン」と「音声入力」を活用し、手入力を最小限にする。

## 🛠 機能要件

### 1. 新規顧客登録の入り口
- 営業モードのトップ（アクションボタン群）に「新規顧客登録」ボタンを目立つように配置。
- タップ後、以下の登録方法を選択できるようにする：
  1. 📷 **名刺スキャン登録** (推奨)
  2. 🎙️ **音声対話登録**
  3. ✏️ **手動入力**

### 2. 名刺スキャン機能
- **技術:** スマホカメラ (`capture="environment"`) + OCR解析 (API連携)
- **フロー:**
  1. カメラ起動
  2. 名刺撮影
  3. プレビュー & トリミング（簡易）
  4. OCR解析実行 (Backend API)
  5. 解析結果をフォームに自動入力
  6. 確認・修正して登録完了

### 3. 音声対話登録機能
- **技術:** Web Speech API or MISOGI音声認識
- **フロー:**
  1. マイクボタンタップ
  2. 「株式会社〇〇、担当は田中さん、電話番号は...」と話す
  3. AIが内容を解析し、構造化データとしてフォームに入力
  4. 足りない情報があればAIが聞き返す（例：「住所も教えていただけますか？」）

### 4. 企業DB連携 (将来拡張)
- 会社名を入力した時点で、公開されている法人データベースから住所や代表者名を自動補完する機能。

## 📱 UI/UX イメージ

### 新規登録メニュー
```
┌─────────────────────┐
│   新規顧客登録       │
├─────────────────────┤
│ 📷 名刺を撮影        │
│ 🎙️ 音声で入力        │
│ ✏️ 手動で入力        │
└─────────────────────┘
```

### 登録フォーム (共通)
- **会社名** (必須)
- **担当者名**
- **電話番号**
- **住所**
  - 郵便番号検索対応
- **備考**

## 🔄 既存機能との連携
- 作成した顧客データは、既存の「依頼書作成ウィザード」等の顧客選択リストに即座に反映されること。

## 🚀 実装ステップ
1. **UI作成:** 「新規顧客登録」ボタンと登録方法選択メニューの実装
2. **名刺スキャンUI:** カメラ起動と画像取得部分の実装
3. **登録フォーム実装:** 取得したデータを表示・編集するフォームの実装
4. **API連携:** (別途Backend対応が必要)

## ⚠️ 技術的課題・現状
- `/admin/customers/` のコードを確認したところ、データの保存処理がメモリ内の配列操作のみで、実際のAPIコールが見当たらない（モック状態の可能性が高い）。
- したがって、顧客登録機能の実装には **API連携の実装** もセットで必要になる可能性が高い。
- `/schedules` APIなどが動いているため、バックエンド自体はあるはずだが、顧客登録用のエンドポイント仕様を確認・実装する必要がある。
