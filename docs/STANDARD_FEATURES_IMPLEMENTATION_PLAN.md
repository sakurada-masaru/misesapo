# æ¨™æº–æ©Ÿèƒ½å®Ÿè£…è¨ˆç”»

## ğŸ“‹ å®Ÿè£…æ–¹é‡

### ãƒ­ãƒ¼ãƒ«åˆ¥ã®æ©Ÿèƒ½è¦ä»¶

#### ãƒ¯ãƒ¼ã‚«ãƒ¼ç³»ï¼ˆãƒ•ãƒ­ãƒ³ãƒˆã‚ªãƒ•ã‚£ã‚¹ãƒ»æ¸…æƒå“¡ï¼‰
- **ä¸»ãªä½œæ¥­ç’°å¢ƒ**: å¤–å‡ºå…ˆã€ç¾å ´
- **ãƒ‡ãƒã‚¤ã‚¹**: ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³
- **å¿…è¦ãªæ©Ÿèƒ½**: 
  - âœ… GPSä½ç½®æƒ…å ±é€£æºï¼ˆå¤–å‡ºå…ˆã§ã®å‹¤æ€ ãƒã‚§ãƒƒã‚¯ï¼‰
  - âœ… ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–

#### ãƒãƒƒã‚¯ã‚ªãƒ•ã‚£ã‚¹ç³»ï¼ˆé–‹ç™ºè€…ãƒ»äº‹å‹™ãƒ»ç®¡ç†è€…ï¼‰
- **ä¸»ãªä½œæ¥­ç’°å¢ƒ**: ã‚ªãƒ•ã‚£ã‚¹
- **ãƒ‡ãƒã‚¤ã‚¹**: PCã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆ
- **å¿…è¦ãªæ©Ÿèƒ½**:
  - âœ… é€šçŸ¥æ©Ÿèƒ½ï¼ˆæ™‚é–“ç®¡ç†ãŒå¿…é ˆï¼‰
  - âœ… ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—æœ€é©åŒ–

---

## ğŸ¯ Phase 1: æ¨™æº–æ©Ÿèƒ½ã®å®Ÿè£…

### 1. ãƒ­ãƒ¼ãƒ«åˆ¥ã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼ˆç®¡ç†ç”»é¢ï¼‰ ğŸ”¥ æœ€å„ªå…ˆ

#### å®Ÿè£…å†…å®¹
- ãƒ­ãƒ¼ãƒ«ã”ã¨ã«ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®é …ç›®ã‚’å‹•çš„ã«å¤‰æ›´
- `role_config.js`ã®`navigation`ã‚’ä½¿ç”¨
- å„ç®¡ç†ç”»é¢ã§ãƒ­ãƒ¼ãƒ«ã«å¿œã˜ãŸãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’è¡¨ç¤º

#### å¯¾è±¡ãƒšãƒ¼ã‚¸
- `/admin/dashboard.html`
- `/admin/users/index.html`
- `/admin/customers/index.html`
- ãã®ä»–ã®ç®¡ç†ç”»é¢

#### å®Ÿè£…æ–¹æ³•
```javascript
// ãƒ­ãƒ¼ãƒ«ã«å¿œã˜ãŸãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å–å¾—
const navigation = window.RoleConfig.getNavigationForRole(userRole);

// ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«å‹•çš„ã«ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚’ç”Ÿæˆ
function renderSidebar(navigation) {
  // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³é …ç›®ã‚’ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
}
```

### 2. GPSä½ç½®æƒ…å ±é€£æºï¼ˆãƒ¯ãƒ¼ã‚«ãƒ¼å‘ã‘ï¼‰ ğŸ”¥ é«˜å„ªå…ˆåº¦

#### å®Ÿè£…å†…å®¹
- å‡ºé€€å‹¤æ™‚ã«GPSä½ç½®æƒ…å ±ã‚’å–å¾—
- ä½ç½®æƒ…å ±ã‚’å‡ºé€€å‹¤è¨˜éŒ²ã«ä¿å­˜
- æŒ‡å®šå ´æ‰€ä»¥å¤–ã‹ã‚‰ã®æ‰“åˆ»ã‚’åˆ¶é™ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

#### å¯¾è±¡ãƒ­ãƒ¼ãƒ«
- `staff`ï¼ˆæ¸…æƒå“¡ï¼‰
- `sales`ï¼ˆå–¶æ¥­ï¼‰
- `contractor`ï¼ˆå¤–éƒ¨å§”è¨—ï¼‰
- ãã®ä»–ã®ãƒ¯ãƒ¼ã‚«ãƒ¼ç³»ãƒ­ãƒ¼ãƒ«

#### å®Ÿè£…æ–¹æ³•
```javascript
// GPSä½ç½®æƒ…å ±ã®å–å¾—
navigator.geolocation.getCurrentPosition((position) => {
  const location = {
    latitude: position.coords.latitude,
    longitude: position.coords.longitude,
    accuracy: position.coords.accuracy,
    timestamp: new Date().toISOString()
  };
  // å‡ºé€€å‹¤è¨˜éŒ²ã«ä½ç½®æƒ…å ±ã‚’è¿½åŠ 
});
```

#### ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
```json
{
  "id": "2025-01-15_W00001",
  "staff_id": "W00001",
  "date": "2025-01-15",
  "clock_in": "2025-01-15T09:00:00Z",
  "clock_in_location": {
    "latitude": 35.6812,
    "longitude": 139.7671,
    "accuracy": 10,
    "address": "æ±äº¬éƒ½åƒä»£ç”°åŒº..."
  },
  "clock_out": "2025-01-15T18:00:00Z",
  "clock_out_location": {
    "latitude": 35.6812,
    "longitude": 139.7671,
    "accuracy": 10,
    "address": "æ±äº¬éƒ½åƒä»£ç”°åŒº..."
  }
}
```

### 3. é€šçŸ¥æ©Ÿèƒ½ï¼ˆãƒãƒƒã‚¯ã‚ªãƒ•ã‚£ã‚¹å‘ã‘ï¼‰ ğŸ”¥ é«˜å„ªå…ˆåº¦

#### å®Ÿè£…å†…å®¹
- æ‰“åˆ»å¿˜ã‚Œã®é€šçŸ¥
- é…åˆ»ãƒ»æ—©é€€ã®è­¦å‘Š
- æ‰€å®šåŠ´åƒæ™‚é–“ã®é€šçŸ¥
- ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥APIã‚’ä½¿ç”¨

#### å¯¾è±¡ãƒ­ãƒ¼ãƒ«
- `admin`ï¼ˆç®¡ç†è€…ï¼‰
- `developer`ï¼ˆé–‹ç™ºè€…ï¼‰
- `office`ï¼ˆäº‹å‹™ï¼‰
- `general_affairs`ï¼ˆç·å‹™ï¼‰
- `accounting`ï¼ˆçµŒç†ï¼‰
- `human_resources`ï¼ˆäººäº‹ï¼‰
- `operation`ï¼ˆé‹å–¶ï¼‰

#### å®Ÿè£…æ–¹æ³•
```javascript
// é€šçŸ¥ã®è¨±å¯ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
if (Notification.permission === 'default') {
  Notification.requestPermission();
}

// é€šçŸ¥ã®é€ä¿¡
function sendNotification(title, body, icon) {
  if (Notification.permission === 'granted') {
    new Notification(title, {
      body: body,
      icon: icon || '/images/icon.png',
      badge: '/images/badge.png'
    });
  }
}
```

#### é€šçŸ¥ã‚¿ã‚¤ãƒŸãƒ³ã‚°
- **æ‰“åˆ»å¿˜ã‚Œ**: å‡ºé€€å‹¤æ™‚åˆ»ã®30åˆ†å‰ãƒ»å¾Œ
- **é…åˆ»è­¦å‘Š**: å‡ºå‹¤äºˆå®šæ™‚åˆ»ã‚’éããŸå ´åˆ
- **æ—©é€€è­¦å‘Š**: é€€å‹¤äºˆå®šæ™‚åˆ»ã‚ˆã‚Šæ—©ã„å ´åˆ
- **åŠ´åƒæ™‚é–“**: æ‰€å®šåŠ´åƒæ™‚é–“ã«é”ã—ãŸå ´åˆ

---

## ğŸ“Š å®Ÿè£…å„ªå…ˆé †ä½

### Phase 1-1: åŸºç›¤æ•´å‚™ï¼ˆæœ€å„ªå…ˆï¼‰
1. âœ… **ãƒ­ãƒ¼ãƒ«åˆ¥ã‚µã‚¤ãƒ‰ãƒãƒ¼** - ç®¡ç†ç”»é¢ã®åŸºç›¤
   - å®Ÿè£…é›£æ˜“åº¦: ä¸­
   - å½±éŸ¿ç¯„å›²: å…¨ç®¡ç†ç”»é¢
   - å®Ÿè£…æ™‚é–“: 2-3æ™‚é–“

### Phase 1-2: ãƒ¯ãƒ¼ã‚«ãƒ¼å‘ã‘æ©Ÿèƒ½
2. âœ… **GPSä½ç½®æƒ…å ±é€£æº** - ãƒ¯ãƒ¼ã‚«ãƒ¼å‘ã‘
   - å®Ÿè£…é›£æ˜“åº¦: ä¸­
   - å½±éŸ¿ç¯„å›²: å‡ºé€€å‹¤æ©Ÿèƒ½
   - å®Ÿè£…æ™‚é–“: 3-4æ™‚é–“

### Phase 1-3: ãƒãƒƒã‚¯ã‚ªãƒ•ã‚£ã‚¹å‘ã‘æ©Ÿèƒ½
3. âœ… **é€šçŸ¥æ©Ÿèƒ½** - ãƒãƒƒã‚¯ã‚ªãƒ•ã‚£ã‚¹å‘ã‘
   - å®Ÿè£…é›£æ˜“åº¦: ä½
   - å½±éŸ¿ç¯„å›²: å‡ºé€€å‹¤æ©Ÿèƒ½
   - å®Ÿè£…æ™‚é–“: 2-3æ™‚é–“

---

## ğŸ¨ UI/UXè¨­è¨ˆ

### ãƒ­ãƒ¼ãƒ«åˆ¥ã‚µã‚¤ãƒ‰ãƒãƒ¼

#### ãƒ¯ãƒ¼ã‚«ãƒ¼ç³»ï¼ˆstaff, sales, contractorï¼‰
```
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- ãƒã‚¤ãƒšãƒ¼ã‚¸
- ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«
- ãƒ¬ãƒãƒ¼ãƒˆä½œæˆ
- ãƒˆãƒ¬ãƒ¼ãƒ‹ãƒ³ã‚°
```

#### ãƒãƒƒã‚¯ã‚ªãƒ•ã‚£ã‚¹ç³»ï¼ˆadmin, developer, office, etc.ï¼‰
```
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
- é¡§å®¢ç®¡ç†
- ç™ºæ³¨ç®¡ç†
- ã‚µãƒ¼ãƒ“ã‚¹ç®¡ç†
- ã‚µã‚¤ãƒˆãƒãƒƒãƒ—
```

#### ç®¡ç†è€…ç³»ï¼ˆadmin, developer, masterï¼‰
```
- ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†
- é¡§å®¢ç®¡ç†
- ç™ºæ³¨ç®¡ç†
- ã‚µãƒ¼ãƒ“ã‚¹ç®¡ç†
- ç”»åƒç®¡ç†
- ã‚µã‚¤ãƒˆãƒãƒƒãƒ—
```

### GPSæ©Ÿèƒ½ã®UI

#### å‡ºé€€å‹¤æ™‚ã®è¡¨ç¤º
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‡ºå‹¤ã‚’è¨˜éŒ²ã—ã¾ã™ã‹ï¼Ÿ           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç¾åœ¨æ™‚åˆ»: 2025-01-15 09:00     â”‚
â”‚  ä½ç½®æƒ…å ±: å–å¾—ä¸­...            â”‚
â”‚  ğŸ“ æ±äº¬éƒ½åƒä»£ç”°åŒº...           â”‚
â”‚                                  â”‚
â”‚  [å‡ºå‹¤ã™ã‚‹]  [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é€šçŸ¥æ©Ÿèƒ½ã®UI

#### é€šçŸ¥ã®è¡¨ç¤º
- ãƒ–ãƒ©ã‚¦ã‚¶é€šçŸ¥ï¼ˆãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—é€šçŸ¥ï¼‰
- ãƒšãƒ¼ã‚¸å†…é€šçŸ¥ãƒãƒŠãƒ¼ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

---

## ğŸ”§ æŠ€è¡“å®Ÿè£…è©³ç´°

### 1. ãƒ­ãƒ¼ãƒ«åˆ¥ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®å®Ÿè£…

#### å…±é€šã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ
```javascript
// assets/js/sidebar.js
function renderSidebar(userRole) {
  const navigation = window.RoleConfig.getNavigationForRole(userRole);
  const sidebar = document.getElementById('sidebar');
  
  navigation.forEach(item => {
    const menuItem = createMenuItem(item);
    sidebar.appendChild(menuItem);
  });
}
```

#### å„ç®¡ç†ç”»é¢ã§ã®ä½¿ç”¨
```javascript
// admin/dashboard.html
document.addEventListener('DOMContentLoaded', () => {
  const userRole = getCurrentUserRole();
  renderSidebar(userRole);
});
```

### 2. GPSä½ç½®æƒ…å ±ã®å®Ÿè£…

#### ä½ç½®æƒ…å ±å–å¾—é–¢æ•°
```javascript
// assets/js/geolocation.js
async function getCurrentLocation() {
  return new Promise((resolve, reject) => {
    if (!navigator.geolocation) {
      reject(new Error('Geolocation is not supported'));
      return;
    }
    
    navigator.geolocation.getCurrentPosition(
      (position) => {
        resolve({
          latitude: position.coords.latitude,
          longitude: position.coords.longitude,
          accuracy: position.coords.accuracy,
          timestamp: new Date().toISOString()
        });
      },
      (error) => {
        reject(error);
      },
      {
        enableHighAccuracy: true,
        timeout: 10000,
        maximumAge: 0
      }
    );
  });
}
```

#### ä½ç½®æƒ…å ±ã®é€†ã‚¸ã‚ªã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ï¼ˆä½æ‰€å–å¾—ï¼‰
```javascript
// ä½ç½®æƒ…å ±ã‹ã‚‰ä½æ‰€ã‚’å–å¾—ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
async function reverseGeocode(latitude, longitude) {
  // Google Maps Geocoding API ã¾ãŸã¯ OpenStreetMap Nominatim API ã‚’ä½¿ç”¨
  // å®Ÿè£…ã¯å¾Œã§è¿½åŠ 
}
```

### 3. é€šçŸ¥æ©Ÿèƒ½ã®å®Ÿè£…

#### é€šçŸ¥ç®¡ç†ã‚¯ãƒ©ã‚¹
```javascript
// assets/js/notification.js
class NotificationManager {
  constructor() {
    this.checkPermission();
  }
  
  async checkPermission() {
    if (Notification.permission === 'default') {
      await Notification.requestPermission();
    }
  }
  
  send(title, body, options = {}) {
    if (Notification.permission === 'granted') {
      new Notification(title, {
        body: body,
        icon: options.icon || '/images/icon.png',
        badge: options.badge || '/images/badge.png',
        tag: options.tag,
        requireInteraction: options.requireInteraction || false
      });
    }
  }
  
  // æ‰“åˆ»å¿˜ã‚Œã®é€šçŸ¥
  notifyAttendanceReminder(type) {
    const messages = {
      clock_in: 'å‡ºå‹¤ã®æ‰“åˆ»ã‚’å¿˜ã‚Œã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿ',
      clock_out: 'é€€å‹¤ã®æ‰“åˆ»ã‚’å¿˜ã‚Œã¦ã„ã¾ã›ã‚“ã‹ï¼Ÿ'
    };
    this.send('æ‰“åˆ»ãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼', messages[type]);
  }
}
```

---

## ğŸ“ å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### Phase 1-1: ãƒ­ãƒ¼ãƒ«åˆ¥ã‚µã‚¤ãƒ‰ãƒãƒ¼
- [ ] å…±é€šã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ä½œæˆ
- [ ] `role_config.js`ã¨ã®é€£æº
- [ ] å„ç®¡ç†ç”»é¢ã¸ã®é©ç”¨
- [ ] ã‚¢ã‚¯ãƒ†ã‚£ãƒ–çŠ¶æ…‹ã®ç®¡ç†
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ

### Phase 1-2: GPSä½ç½®æƒ…å ±é€£æº
- [ ] ä½ç½®æƒ…å ±å–å¾—é–¢æ•°ã®å®Ÿè£…
- [ ] å‡ºé€€å‹¤æ™‚ã®ä½ç½®æƒ…å ±å–å¾—
- [ ] ä½ç½®æƒ…å ±ã®ä¿å­˜ï¼ˆAPIé€£æºï¼‰
- [ ] ä½ç½®æƒ…å ±ã®è¡¨ç¤ºï¼ˆUIï¼‰
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆä½ç½®æƒ…å ±å–å¾—å¤±æ•—æ™‚ï¼‰
- [ ] ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ã®è¡¨ç¤º

### Phase 1-3: é€šçŸ¥æ©Ÿèƒ½
- [ ] é€šçŸ¥è¨±å¯ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
- [ ] é€šçŸ¥ç®¡ç†ã‚¯ãƒ©ã‚¹ã®å®Ÿè£…
- [ ] æ‰“åˆ»å¿˜ã‚Œã®é€šçŸ¥
- [ ] é…åˆ»ãƒ»æ—©é€€ã®è­¦å‘Š
- [ ] é€šçŸ¥è¨­å®šã®ç®¡ç†
- [ ] é€šçŸ¥å±¥æ­´ã®ç®¡ç†ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

---

## ğŸš€ å®Ÿè£…é–‹å§‹

ã¾ãšã¯**ãƒ­ãƒ¼ãƒ«åˆ¥ã‚µã‚¤ãƒ‰ãƒãƒ¼**ã‹ã‚‰å®Ÿè£…ã‚’é–‹å§‹ã—ã¾ã™ã€‚

