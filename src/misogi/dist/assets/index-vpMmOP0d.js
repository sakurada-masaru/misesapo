function um(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(s,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();var dm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function vd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var xd={exports:{}},Ja={},_d={exports:{}},Ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=Symbol.for("react.element"),fm=Symbol.for("react.portal"),pm=Symbol.for("react.fragment"),mm=Symbol.for("react.strict_mode"),hm=Symbol.for("react.profiler"),gm=Symbol.for("react.provider"),ym=Symbol.for("react.context"),vm=Symbol.for("react.forward_ref"),xm=Symbol.for("react.suspense"),_m=Symbol.for("react.memo"),jm=Symbol.for("react.lazy"),fc=Symbol.iterator;function bm(e){return e===null||typeof e!="object"?null:(e=fc&&e[fc]||e["@@iterator"],typeof e=="function"?e:null)}var jd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bd=Object.assign,Sd={};function Br(e,t,n){this.props=e,this.context=t,this.refs=Sd,this.updater=n||jd}Br.prototype.isReactComponent={};Br.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Br.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function kd(){}kd.prototype=Br.prototype;function ro(e,t,n){this.props=e,this.context=t,this.refs=Sd,this.updater=n||jd}var so=ro.prototype=new kd;so.constructor=ro;bd(so,Br.prototype);so.isPureReactComponent=!0;var pc=Array.isArray,wd=Object.prototype.hasOwnProperty,ao={current:null},Nd={key:!0,ref:!0,__self:!0,__source:!0};function Cd(e,t,n){var s,a={},l=null,i=null;if(t!=null)for(s in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(l=""+t.key),t)wd.call(t,s)&&!Nd.hasOwnProperty(s)&&(a[s]=t[s]);var o=arguments.length-2;if(o===1)a.children=n;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in o=e.defaultProps,o)a[s]===void 0&&(a[s]=o[s]);return{$$typeof:Ds,type:e,key:l,ref:i,props:a,_owner:ao.current}}function Sm(e,t){return{$$typeof:Ds,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function lo(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ds}function km(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var mc=/\/+/g;function pl(e,t){return typeof e=="object"&&e!==null&&e.key!=null?km(""+e.key):t.toString(36)}function ca(e,t,n,s,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(l){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case Ds:case fm:i=!0}}if(i)return i=e,a=a(i),e=s===""?"."+pl(i,0):s,pc(a)?(n="",e!=null&&(n=e.replace(mc,"$&/")+"/"),ca(a,t,n,"",function(d){return d})):a!=null&&(lo(a)&&(a=Sm(a,n+(!a.key||i&&i.key===a.key?"":(""+a.key).replace(mc,"$&/")+"/")+e)),t.push(a)),1;if(i=0,s=s===""?".":s+":",pc(e))for(var o=0;o<e.length;o++){l=e[o];var c=s+pl(l,o);i+=ca(l,t,n,c,a)}else if(c=bm(e),typeof c=="function")for(e=c.call(e),o=0;!(l=e.next()).done;)l=l.value,c=s+pl(l,o++),i+=ca(l,t,n,c,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function Ws(e,t,n){if(e==null)return e;var s=[],a=0;return ca(e,s,"","",function(l){return t.call(n,l,a++)}),s}function wm(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vt={current:null},ua={transition:null},Nm={ReactCurrentDispatcher:vt,ReactCurrentBatchConfig:ua,ReactCurrentOwner:ao};function Ed(){throw Error("act(...) is not supported in production builds of React.")}Ce.Children={map:Ws,forEach:function(e,t,n){Ws(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Ws(e,function(){t++}),t},toArray:function(e){return Ws(e,function(t){return t})||[]},only:function(e){if(!lo(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ce.Component=Br;Ce.Fragment=pm;Ce.Profiler=hm;Ce.PureComponent=ro;Ce.StrictMode=mm;Ce.Suspense=xm;Ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nm;Ce.act=Ed;Ce.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=bd({},e.props),a=e.key,l=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,i=ao.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)wd.call(t,c)&&!Nd.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&o!==void 0?o[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];s.children=o}return{$$typeof:Ds,type:e.type,key:a,ref:l,props:s,_owner:i}};Ce.createContext=function(e){return e={$$typeof:ym,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:gm,_context:e},e.Consumer=e};Ce.createElement=Cd;Ce.createFactory=function(e){var t=Cd.bind(null,e);return t.type=e,t};Ce.createRef=function(){return{current:null}};Ce.forwardRef=function(e){return{$$typeof:vm,render:e}};Ce.isValidElement=lo;Ce.lazy=function(e){return{$$typeof:jm,_payload:{_status:-1,_result:e},_init:wm}};Ce.memo=function(e,t){return{$$typeof:_m,type:e,compare:t===void 0?null:t}};Ce.startTransition=function(e){var t=ua.transition;ua.transition={};try{e()}finally{ua.transition=t}};Ce.unstable_act=Ed;Ce.useCallback=function(e,t){return vt.current.useCallback(e,t)};Ce.useContext=function(e){return vt.current.useContext(e)};Ce.useDebugValue=function(){};Ce.useDeferredValue=function(e){return vt.current.useDeferredValue(e)};Ce.useEffect=function(e,t){return vt.current.useEffect(e,t)};Ce.useId=function(){return vt.current.useId()};Ce.useImperativeHandle=function(e,t,n){return vt.current.useImperativeHandle(e,t,n)};Ce.useInsertionEffect=function(e,t){return vt.current.useInsertionEffect(e,t)};Ce.useLayoutEffect=function(e,t){return vt.current.useLayoutEffect(e,t)};Ce.useMemo=function(e,t){return vt.current.useMemo(e,t)};Ce.useReducer=function(e,t,n){return vt.current.useReducer(e,t,n)};Ce.useRef=function(e){return vt.current.useRef(e)};Ce.useState=function(e){return vt.current.useState(e)};Ce.useSyncExternalStore=function(e,t,n){return vt.current.useSyncExternalStore(e,t,n)};Ce.useTransition=function(){return vt.current.useTransition()};Ce.version="18.3.1";_d.exports=Ce;var f=_d.exports;const Xt=vd(f),Cm=um({__proto__:null,default:Xt},[f]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Em=f,Tm=Symbol.for("react.element"),$m=Symbol.for("react.fragment"),Pm=Object.prototype.hasOwnProperty,zm=Em.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Am={key:!0,ref:!0,__self:!0,__source:!0};function Td(e,t,n){var s,a={},l=null,i=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(i=t.ref);for(s in t)Pm.call(t,s)&&!Am.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:Tm,type:e,key:l,ref:i,props:a,_owner:zm.current}}Ja.Fragment=$m;Ja.jsx=Td;Ja.jsxs=Td;xd.exports=Ja;var r=xd.exports,ql={},$d={exports:{}},$t={},Pd={exports:{}},zd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(b,$){var V=b.length;b.push($);e:for(;0<V;){var ee=V-1>>>1,se=b[ee];if(0<a(se,$))b[ee]=$,b[V]=se,V=ee;else break e}}function n(b){return b.length===0?null:b[0]}function s(b){if(b.length===0)return null;var $=b[0],V=b.pop();if(V!==$){b[0]=V;e:for(var ee=0,se=b.length,ie=se>>>1;ee<ie;){var ue=2*(ee+1)-1,we=b[ue],M=ue+1,j=b[M];if(0>a(we,V))M<se&&0>a(j,we)?(b[ee]=j,b[M]=V,ee=M):(b[ee]=we,b[ue]=V,ee=ue);else if(M<se&&0>a(j,V))b[ee]=j,b[M]=V,ee=M;else break e}}return $}function a(b,$){var V=b.sortIndex-$.sortIndex;return V!==0?V:b.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var c=[],d=[],u=1,m=null,h=3,x=!1,v=!1,S=!1,N=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(b){for(var $=n(d);$!==null;){if($.callback===null)s(d);else if($.startTime<=b)s(d),$.sortIndex=$.expirationTime,t(c,$);else break;$=n(d)}}function _(b){if(S=!1,y(b),!v)if(n(c)!==null)v=!0,L(w);else{var $=n(d);$!==null&&J(_,$.startTime-b)}}function w(b,$){v=!1,S&&(S=!1,g(H),H=-1),x=!0;var V=h;try{for(y($),m=n(c);m!==null&&(!(m.expirationTime>$)||b&&!z());){var ee=m.callback;if(typeof ee=="function"){m.callback=null,h=m.priorityLevel;var se=ee(m.expirationTime<=$);$=e.unstable_now(),typeof se=="function"?m.callback=se:m===n(c)&&s(c),y($)}else s(c);m=n(c)}if(m!==null)var ie=!0;else{var ue=n(d);ue!==null&&J(_,ue.startTime-$),ie=!1}return ie}finally{m=null,h=V,x=!1}}var P=!1,D=null,H=-1,I=5,F=-1;function z(){return!(e.unstable_now()-F<I)}function k(){if(D!==null){var b=e.unstable_now();F=b;var $=!0;try{$=D(!0,b)}finally{$?Y():(P=!1,D=null)}}else P=!1}var Y;if(typeof p=="function")Y=function(){p(k)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,C=G.port2;G.port1.onmessage=k,Y=function(){C.postMessage(null)}}else Y=function(){N(k,0)};function L(b){D=b,P||(P=!0,Y())}function J(b,$){H=N(function(){b(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(b){b.callback=null},e.unstable_continueExecution=function(){v||x||(v=!0,L(w))},e.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<b?Math.floor(1e3/b):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(b){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var V=h;h=$;try{return b()}finally{h=V}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(b,$){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var V=h;h=b;try{return $()}finally{h=V}},e.unstable_scheduleCallback=function(b,$,V){var ee=e.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?ee+V:ee):V=ee,b){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=V+se,b={id:u++,callback:$,priorityLevel:b,startTime:V,expirationTime:se,sortIndex:-1},V>ee?(b.sortIndex=V,t(d,b),n(c)===null&&b===n(d)&&(S?(g(H),H=-1):S=!0,J(_,V-ee))):(b.sortIndex=se,t(c,b),v||x||(v=!0,L(w))),b},e.unstable_shouldYield=z,e.unstable_wrapCallback=function(b){var $=h;return function(){var V=h;h=$;try{return b.apply(this,arguments)}finally{h=V}}}})(zd);Pd.exports=zd;var Mm=Pd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm=f,Tt=Mm;function te(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ad=new Set,xs={};function nr(e,t){zr(e,t),zr(e+"Capture",t)}function zr(e,t){for(xs[e]=t,e=0;e<t.length;e++)Ad.add(t[e])}var un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xl=Object.prototype.hasOwnProperty,Rm=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hc={},gc={};function Om(e){return Xl.call(gc,e)?!0:Xl.call(hc,e)?!1:Rm.test(e)?gc[e]=!0:(hc[e]=!0,!1)}function Dm(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Im(e,t,n,s){if(t===null||typeof t>"u"||Dm(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function xt(e,t,n,s,a,l,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=i}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ot[e]=new xt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ot[t]=new xt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ot[e]=new xt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ot[e]=new xt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ot[e]=new xt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ot[e]=new xt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ot[e]=new xt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ot[e]=new xt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ot[e]=new xt(e,5,!1,e.toLowerCase(),null,!1,!1)});var io=/[\-:]([a-z])/g;function oo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(io,oo);ot[t]=new xt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(io,oo);ot[t]=new xt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(io,oo);ot[t]=new xt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ot[e]=new xt(e,1,!1,e.toLowerCase(),null,!1,!1)});ot.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ot[e]=new xt(e,1,!1,e.toLowerCase(),null,!0,!0)});function co(e,t,n,s){var a=ot.hasOwnProperty(t)?ot[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Im(t,n,a,s)&&(n=null),s||a===null?Om(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,s=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var mn=Lm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hs=Symbol.for("react.element"),mr=Symbol.for("react.portal"),hr=Symbol.for("react.fragment"),uo=Symbol.for("react.strict_mode"),Zl=Symbol.for("react.profiler"),Md=Symbol.for("react.provider"),Ld=Symbol.for("react.context"),fo=Symbol.for("react.forward_ref"),ei=Symbol.for("react.suspense"),ti=Symbol.for("react.suspense_list"),po=Symbol.for("react.memo"),vn=Symbol.for("react.lazy"),Rd=Symbol.for("react.offscreen"),yc=Symbol.iterator;function Vr(e){return e===null||typeof e!="object"?null:(e=yc&&e[yc]||e["@@iterator"],typeof e=="function"?e:null)}var Ve=Object.assign,ml;function ss(e){if(ml===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ml=t&&t[1]||""}return`
`+ml+e}var hl=!1;function gl(e,t){if(!e||hl)return"";hl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),l=s.stack.split(`
`),i=a.length-1,o=l.length-1;1<=i&&0<=o&&a[i]!==l[o];)o--;for(;1<=i&&0<=o;i--,o--)if(a[i]!==l[o]){if(i!==1||o!==1)do if(i--,o--,0>o||a[i]!==l[o]){var c=`
`+a[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=o);break}}}finally{hl=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ss(e):""}function Bm(e){switch(e.tag){case 5:return ss(e.type);case 16:return ss("Lazy");case 13:return ss("Suspense");case 19:return ss("SuspenseList");case 0:case 2:case 15:return e=gl(e.type,!1),e;case 11:return e=gl(e.type.render,!1),e;case 1:return e=gl(e.type,!0),e;default:return""}}function ni(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hr:return"Fragment";case mr:return"Portal";case Zl:return"Profiler";case uo:return"StrictMode";case ei:return"Suspense";case ti:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ld:return(e.displayName||"Context")+".Consumer";case Md:return(e._context.displayName||"Context")+".Provider";case fo:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case po:return t=e.displayName||null,t!==null?t:ni(e.type)||"Memo";case vn:t=e._payload,e=e._init;try{return ni(e(t))}catch{}}return null}function Fm(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ni(t);case 8:return t===uo?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Rn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Od(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Um(e){var t=Od(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(i){s=""+i,l.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Vs(e){e._valueTracker||(e._valueTracker=Um(e))}function Dd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=Od(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function ja(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ri(e,t){var n=t.checked;return Ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function vc(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=Rn(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Id(e,t){t=t.checked,t!=null&&co(e,"checked",t,!1)}function si(e,t){Id(e,t);var n=Rn(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ai(e,t.type,n):t.hasOwnProperty("defaultValue")&&ai(e,t.type,Rn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function xc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ai(e,t,n){(t!=="number"||ja(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var as=Array.isArray;function Nr(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+Rn(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function li(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(te(91));return Ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _c(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(te(92));if(as(n)){if(1<n.length)throw Error(te(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Rn(n)}}function Bd(e,t){var n=Rn(t.value),s=Rn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function jc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Fd(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ii(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Fd(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ks,Ud=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ks=Ks||document.createElement("div"),Ks.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ks.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _s(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var cs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wm=["Webkit","ms","Moz","O"];Object.keys(cs).forEach(function(e){Wm.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cs[t]=cs[e]})});function Wd(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||cs.hasOwnProperty(e)&&cs[e]?(""+t).trim():t+"px"}function Hd(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=Wd(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}var Hm=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function oi(e,t){if(t){if(Hm[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(te(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(te(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(te(61))}if(t.style!=null&&typeof t.style!="object")throw Error(te(62))}}function ci(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ui=null;function mo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var di=null,Cr=null,Er=null;function bc(e){if(e=Fs(e)){if(typeof di!="function")throw Error(te(280));var t=e.stateNode;t&&(t=Za(t),di(e.stateNode,e.type,t))}}function Vd(e){Cr?Er?Er.push(e):Er=[e]:Cr=e}function Kd(){if(Cr){var e=Cr,t=Er;if(Er=Cr=null,bc(e),t)for(e=0;e<t.length;e++)bc(t[e])}}function Yd(e,t){return e(t)}function Jd(){}var yl=!1;function Qd(e,t,n){if(yl)return e(t,n);yl=!0;try{return Yd(e,t,n)}finally{yl=!1,(Cr!==null||Er!==null)&&(Jd(),Kd())}}function js(e,t){var n=e.stateNode;if(n===null)return null;var s=Za(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(te(231,t,typeof n));return n}var fi=!1;if(un)try{var Kr={};Object.defineProperty(Kr,"passive",{get:function(){fi=!0}}),window.addEventListener("test",Kr,Kr),window.removeEventListener("test",Kr,Kr)}catch{fi=!1}function Vm(e,t,n,s,a,l,i,o,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(u){this.onError(u)}}var us=!1,ba=null,Sa=!1,pi=null,Km={onError:function(e){us=!0,ba=e}};function Ym(e,t,n,s,a,l,i,o,c){us=!1,ba=null,Vm.apply(Km,arguments)}function Jm(e,t,n,s,a,l,i,o,c){if(Ym.apply(this,arguments),us){if(us){var d=ba;us=!1,ba=null}else throw Error(te(198));Sa||(Sa=!0,pi=d)}}function rr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Gd(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Sc(e){if(rr(e)!==e)throw Error(te(188))}function Qm(e){var t=e.alternate;if(!t){if(t=rr(e),t===null)throw Error(te(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return Sc(a),e;if(l===s)return Sc(a),t;l=l.sibling}throw Error(te(188))}if(n.return!==s.return)n=a,s=l;else{for(var i=!1,o=a.child;o;){if(o===n){i=!0,n=a,s=l;break}if(o===s){i=!0,s=a,n=l;break}o=o.sibling}if(!i){for(o=l.child;o;){if(o===n){i=!0,n=l,s=a;break}if(o===s){i=!0,s=l,n=a;break}o=o.sibling}if(!i)throw Error(te(189))}}if(n.alternate!==s)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?e:t}function qd(e){return e=Qm(e),e!==null?Xd(e):null}function Xd(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Xd(e);if(t!==null)return t;e=e.sibling}return null}var Zd=Tt.unstable_scheduleCallback,kc=Tt.unstable_cancelCallback,Gm=Tt.unstable_shouldYield,qm=Tt.unstable_requestPaint,Qe=Tt.unstable_now,Xm=Tt.unstable_getCurrentPriorityLevel,ho=Tt.unstable_ImmediatePriority,ef=Tt.unstable_UserBlockingPriority,ka=Tt.unstable_NormalPriority,Zm=Tt.unstable_LowPriority,tf=Tt.unstable_IdlePriority,Qa=null,Zt=null;function eh(e){if(Zt&&typeof Zt.onCommitFiberRoot=="function")try{Zt.onCommitFiberRoot(Qa,e,void 0,(e.current.flags&128)===128)}catch{}}var Ht=Math.clz32?Math.clz32:rh,th=Math.log,nh=Math.LN2;function rh(e){return e>>>=0,e===0?32:31-(th(e)/nh|0)|0}var Ys=64,Js=4194304;function ls(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function wa(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,l=e.pingedLanes,i=n&268435455;if(i!==0){var o=i&~a;o!==0?s=ls(o):(l&=i,l!==0&&(s=ls(l)))}else i=n&~a,i!==0?s=ls(i):l!==0&&(s=ls(l));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-Ht(t),a=1<<n,s|=e[n],t&=~a;return s}function sh(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ah(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var i=31-Ht(l),o=1<<i,c=a[i];c===-1?(!(o&n)||o&s)&&(a[i]=sh(o,t)):c<=t&&(e.expiredLanes|=o),l&=~o}}function mi(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function nf(){var e=Ys;return Ys<<=1,!(Ys&4194240)&&(Ys=64),e}function vl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Is(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ht(t),e[t]=n}function lh(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Ht(n),l=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~l}}function go(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-Ht(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var Re=0;function rf(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var sf,yo,af,lf,of,hi=!1,Qs=[],Cn=null,En=null,Tn=null,bs=new Map,Ss=new Map,_n=[],ih="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wc(e,t){switch(e){case"focusin":case"focusout":Cn=null;break;case"dragenter":case"dragleave":En=null;break;case"mouseover":case"mouseout":Tn=null;break;case"pointerover":case"pointerout":bs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ss.delete(t.pointerId)}}function Yr(e,t,n,s,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:l,targetContainers:[a]},t!==null&&(t=Fs(t),t!==null&&yo(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function oh(e,t,n,s,a){switch(t){case"focusin":return Cn=Yr(Cn,e,t,n,s,a),!0;case"dragenter":return En=Yr(En,e,t,n,s,a),!0;case"mouseover":return Tn=Yr(Tn,e,t,n,s,a),!0;case"pointerover":var l=a.pointerId;return bs.set(l,Yr(bs.get(l)||null,e,t,n,s,a)),!0;case"gotpointercapture":return l=a.pointerId,Ss.set(l,Yr(Ss.get(l)||null,e,t,n,s,a)),!0}return!1}function cf(e){var t=Vn(e.target);if(t!==null){var n=rr(t);if(n!==null){if(t=n.tag,t===13){if(t=Gd(n),t!==null){e.blockedOn=t,of(e.priority,function(){af(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function da(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=gi(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);ui=s,n.target.dispatchEvent(s),ui=null}else return t=Fs(n),t!==null&&yo(t),e.blockedOn=n,!1;t.shift()}return!0}function Nc(e,t,n){da(e)&&n.delete(t)}function ch(){hi=!1,Cn!==null&&da(Cn)&&(Cn=null),En!==null&&da(En)&&(En=null),Tn!==null&&da(Tn)&&(Tn=null),bs.forEach(Nc),Ss.forEach(Nc)}function Jr(e,t){e.blockedOn===t&&(e.blockedOn=null,hi||(hi=!0,Tt.unstable_scheduleCallback(Tt.unstable_NormalPriority,ch)))}function ks(e){function t(a){return Jr(a,e)}if(0<Qs.length){Jr(Qs[0],e);for(var n=1;n<Qs.length;n++){var s=Qs[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Cn!==null&&Jr(Cn,e),En!==null&&Jr(En,e),Tn!==null&&Jr(Tn,e),bs.forEach(t),Ss.forEach(t),n=0;n<_n.length;n++)s=_n[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<_n.length&&(n=_n[0],n.blockedOn===null);)cf(n),n.blockedOn===null&&_n.shift()}var Tr=mn.ReactCurrentBatchConfig,Na=!0;function uh(e,t,n,s){var a=Re,l=Tr.transition;Tr.transition=null;try{Re=1,vo(e,t,n,s)}finally{Re=a,Tr.transition=l}}function dh(e,t,n,s){var a=Re,l=Tr.transition;Tr.transition=null;try{Re=4,vo(e,t,n,s)}finally{Re=a,Tr.transition=l}}function vo(e,t,n,s){if(Na){var a=gi(e,t,n,s);if(a===null)El(e,t,s,Ca,n),wc(e,s);else if(oh(a,e,t,n,s))s.stopPropagation();else if(wc(e,s),t&4&&-1<ih.indexOf(e)){for(;a!==null;){var l=Fs(a);if(l!==null&&sf(l),l=gi(e,t,n,s),l===null&&El(e,t,s,Ca,n),l===a)break;a=l}a!==null&&s.stopPropagation()}else El(e,t,s,null,n)}}var Ca=null;function gi(e,t,n,s){if(Ca=null,e=mo(s),e=Vn(e),e!==null)if(t=rr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Gd(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ca=e,null}function uf(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xm()){case ho:return 1;case ef:return 4;case ka:case Zm:return 16;case tf:return 536870912;default:return 16}default:return 16}}var kn=null,xo=null,fa=null;function df(){if(fa)return fa;var e,t=xo,n=t.length,s,a="value"in kn?kn.value:kn.textContent,l=a.length;for(e=0;e<n&&t[e]===a[e];e++);var i=n-e;for(s=1;s<=i&&t[n-s]===a[l-s];s++);return fa=a.slice(e,1<s?1-s:void 0)}function pa(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Gs(){return!0}function Cc(){return!1}function Pt(e){function t(n,s,a,l,i){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=l,this.target=i,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Gs:Cc,this.isPropagationStopped=Cc,this}return Ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Gs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Gs)},persist:function(){},isPersistent:Gs}),t}var Fr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_o=Pt(Fr),Bs=Ve({},Fr,{view:0,detail:0}),fh=Pt(Bs),xl,_l,Qr,Ga=Ve({},Bs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:jo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qr&&(Qr&&e.type==="mousemove"?(xl=e.screenX-Qr.screenX,_l=e.screenY-Qr.screenY):_l=xl=0,Qr=e),xl)},movementY:function(e){return"movementY"in e?e.movementY:_l}}),Ec=Pt(Ga),ph=Ve({},Ga,{dataTransfer:0}),mh=Pt(ph),hh=Ve({},Bs,{relatedTarget:0}),jl=Pt(hh),gh=Ve({},Fr,{animationName:0,elapsedTime:0,pseudoElement:0}),yh=Pt(gh),vh=Ve({},Fr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xh=Pt(vh),_h=Ve({},Fr,{data:0}),Tc=Pt(_h),jh={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bh={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kh(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Sh[e])?!!t[e]:!1}function jo(){return kh}var wh=Ve({},Bs,{key:function(e){if(e.key){var t=jh[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=pa(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bh[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:jo,charCode:function(e){return e.type==="keypress"?pa(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?pa(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Nh=Pt(wh),Ch=Ve({},Ga,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),$c=Pt(Ch),Eh=Ve({},Bs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:jo}),Th=Pt(Eh),$h=Ve({},Fr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ph=Pt($h),zh=Ve({},Ga,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ah=Pt(zh),Mh=[9,13,27,32],bo=un&&"CompositionEvent"in window,ds=null;un&&"documentMode"in document&&(ds=document.documentMode);var Lh=un&&"TextEvent"in window&&!ds,ff=un&&(!bo||ds&&8<ds&&11>=ds),Pc=" ",zc=!1;function pf(e,t){switch(e){case"keyup":return Mh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mf(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var gr=!1;function Rh(e,t){switch(e){case"compositionend":return mf(t);case"keypress":return t.which!==32?null:(zc=!0,Pc);case"textInput":return e=t.data,e===Pc&&zc?null:e;default:return null}}function Oh(e,t){if(gr)return e==="compositionend"||!bo&&pf(e,t)?(e=df(),fa=xo=kn=null,gr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return ff&&t.locale!=="ko"?null:t.data;default:return null}}var Dh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ac(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Dh[e.type]:t==="textarea"}function hf(e,t,n,s){Vd(s),t=Ea(t,"onChange"),0<t.length&&(n=new _o("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var fs=null,ws=null;function Ih(e){Nf(e,0)}function qa(e){var t=xr(e);if(Dd(t))return e}function Bh(e,t){if(e==="change")return t}var gf=!1;if(un){var bl;if(un){var Sl="oninput"in document;if(!Sl){var Mc=document.createElement("div");Mc.setAttribute("oninput","return;"),Sl=typeof Mc.oninput=="function"}bl=Sl}else bl=!1;gf=bl&&(!document.documentMode||9<document.documentMode)}function Lc(){fs&&(fs.detachEvent("onpropertychange",yf),ws=fs=null)}function yf(e){if(e.propertyName==="value"&&qa(ws)){var t=[];hf(t,ws,e,mo(e)),Qd(Ih,t)}}function Fh(e,t,n){e==="focusin"?(Lc(),fs=t,ws=n,fs.attachEvent("onpropertychange",yf)):e==="focusout"&&Lc()}function Uh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return qa(ws)}function Wh(e,t){if(e==="click")return qa(t)}function Hh(e,t){if(e==="input"||e==="change")return qa(t)}function Vh(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kt=typeof Object.is=="function"?Object.is:Vh;function Ns(e,t){if(Kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!Xl.call(t,a)||!Kt(e[a],t[a]))return!1}return!0}function Rc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Oc(e,t){var n=Rc(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Rc(n)}}function vf(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vf(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function xf(){for(var e=window,t=ja();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ja(e.document)}return t}function So(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Kh(e){var t=xf(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&vf(n.ownerDocument.documentElement,n)){if(s!==null&&So(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(s.start,a);s=s.end===void 0?l:Math.min(s.end,a),!e.extend&&l>s&&(a=s,s=l,l=a),a=Oc(n,l);var i=Oc(n,s);a&&i&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Yh=un&&"documentMode"in document&&11>=document.documentMode,yr=null,yi=null,ps=null,vi=!1;function Dc(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;vi||yr==null||yr!==ja(s)||(s=yr,"selectionStart"in s&&So(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ps&&Ns(ps,s)||(ps=s,s=Ea(yi,"onSelect"),0<s.length&&(t=new _o("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=yr)))}function qs(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var vr={animationend:qs("Animation","AnimationEnd"),animationiteration:qs("Animation","AnimationIteration"),animationstart:qs("Animation","AnimationStart"),transitionend:qs("Transition","TransitionEnd")},kl={},_f={};un&&(_f=document.createElement("div").style,"AnimationEvent"in window||(delete vr.animationend.animation,delete vr.animationiteration.animation,delete vr.animationstart.animation),"TransitionEvent"in window||delete vr.transitionend.transition);function Xa(e){if(kl[e])return kl[e];if(!vr[e])return e;var t=vr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in _f)return kl[e]=t[n];return e}var jf=Xa("animationend"),bf=Xa("animationiteration"),Sf=Xa("animationstart"),kf=Xa("transitionend"),wf=new Map,Ic="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Dn(e,t){wf.set(e,t),nr(t,[e])}for(var wl=0;wl<Ic.length;wl++){var Nl=Ic[wl],Jh=Nl.toLowerCase(),Qh=Nl[0].toUpperCase()+Nl.slice(1);Dn(Jh,"on"+Qh)}Dn(jf,"onAnimationEnd");Dn(bf,"onAnimationIteration");Dn(Sf,"onAnimationStart");Dn("dblclick","onDoubleClick");Dn("focusin","onFocus");Dn("focusout","onBlur");Dn(kf,"onTransitionEnd");zr("onMouseEnter",["mouseout","mouseover"]);zr("onMouseLeave",["mouseout","mouseover"]);zr("onPointerEnter",["pointerout","pointerover"]);zr("onPointerLeave",["pointerout","pointerover"]);nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));nr("onBeforeInput",["compositionend","keypress","textInput","paste"]);nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gh=new Set("cancel close invalid load scroll toggle".split(" ").concat(is));function Bc(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,Jm(s,t,void 0,e),e.currentTarget=null}function Nf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var l=void 0;if(t)for(var i=s.length-1;0<=i;i--){var o=s[i],c=o.instance,d=o.currentTarget;if(o=o.listener,c!==l&&a.isPropagationStopped())break e;Bc(a,o,d),l=c}else for(i=0;i<s.length;i++){if(o=s[i],c=o.instance,d=o.currentTarget,o=o.listener,c!==l&&a.isPropagationStopped())break e;Bc(a,o,d),l=c}}}if(Sa)throw e=pi,Sa=!1,pi=null,e}function Ie(e,t){var n=t[Si];n===void 0&&(n=t[Si]=new Set);var s=e+"__bubble";n.has(s)||(Cf(t,e,2,!1),n.add(s))}function Cl(e,t,n){var s=0;t&&(s|=4),Cf(n,e,s,t)}var Xs="_reactListening"+Math.random().toString(36).slice(2);function Cs(e){if(!e[Xs]){e[Xs]=!0,Ad.forEach(function(n){n!=="selectionchange"&&(Gh.has(n)||Cl(n,!1,e),Cl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xs]||(t[Xs]=!0,Cl("selectionchange",!1,t))}}function Cf(e,t,n,s){switch(uf(t)){case 1:var a=uh;break;case 4:a=dh;break;default:a=vo}n=a.bind(null,t,n,e),a=void 0,!fi||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function El(e,t,n,s,a){var l=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var o=s.stateNode.containerInfo;if(o===a||o.nodeType===8&&o.parentNode===a)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;i=i.return}for(;o!==null;){if(i=Vn(o),i===null)return;if(c=i.tag,c===5||c===6){s=l=i;continue e}o=o.parentNode}}s=s.return}Qd(function(){var d=l,u=mo(n),m=[];e:{var h=wf.get(e);if(h!==void 0){var x=_o,v=e;switch(e){case"keypress":if(pa(n)===0)break e;case"keydown":case"keyup":x=Nh;break;case"focusin":v="focus",x=jl;break;case"focusout":v="blur",x=jl;break;case"beforeblur":case"afterblur":x=jl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=Ec;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=mh;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Th;break;case jf:case bf:case Sf:x=yh;break;case kf:x=Ph;break;case"scroll":x=fh;break;case"wheel":x=Ah;break;case"copy":case"cut":case"paste":x=xh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=$c}var S=(t&4)!==0,N=!S&&e==="scroll",g=S?h!==null?h+"Capture":null:h;S=[];for(var p=d,y;p!==null;){y=p;var _=y.stateNode;if(y.tag===5&&_!==null&&(y=_,g!==null&&(_=js(p,g),_!=null&&S.push(Es(p,_,y)))),N)break;p=p.return}0<S.length&&(h=new x(h,v,null,n,u),m.push({event:h,listeners:S}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",h&&n!==ui&&(v=n.relatedTarget||n.fromElement)&&(Vn(v)||v[dn]))break e;if((x||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,x?(v=n.relatedTarget||n.toElement,x=d,v=v?Vn(v):null,v!==null&&(N=rr(v),v!==N||v.tag!==5&&v.tag!==6)&&(v=null)):(x=null,v=d),x!==v)){if(S=Ec,_="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(S=$c,_="onPointerLeave",g="onPointerEnter",p="pointer"),N=x==null?h:xr(x),y=v==null?h:xr(v),h=new S(_,p+"leave",x,n,u),h.target=N,h.relatedTarget=y,_=null,Vn(u)===d&&(S=new S(g,p+"enter",v,n,u),S.target=y,S.relatedTarget=N,_=S),N=_,x&&v)t:{for(S=x,g=v,p=0,y=S;y;y=ur(y))p++;for(y=0,_=g;_;_=ur(_))y++;for(;0<p-y;)S=ur(S),p--;for(;0<y-p;)g=ur(g),y--;for(;p--;){if(S===g||g!==null&&S===g.alternate)break t;S=ur(S),g=ur(g)}S=null}else S=null;x!==null&&Fc(m,h,x,S,!1),v!==null&&N!==null&&Fc(m,N,v,S,!0)}}e:{if(h=d?xr(d):window,x=h.nodeName&&h.nodeName.toLowerCase(),x==="select"||x==="input"&&h.type==="file")var w=Bh;else if(Ac(h))if(gf)w=Hh;else{w=Uh;var P=Fh}else(x=h.nodeName)&&x.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=Wh);if(w&&(w=w(e,d))){hf(m,w,n,u);break e}P&&P(e,h,d),e==="focusout"&&(P=h._wrapperState)&&P.controlled&&h.type==="number"&&ai(h,"number",h.value)}switch(P=d?xr(d):window,e){case"focusin":(Ac(P)||P.contentEditable==="true")&&(yr=P,yi=d,ps=null);break;case"focusout":ps=yi=yr=null;break;case"mousedown":vi=!0;break;case"contextmenu":case"mouseup":case"dragend":vi=!1,Dc(m,n,u);break;case"selectionchange":if(Yh)break;case"keydown":case"keyup":Dc(m,n,u)}var D;if(bo)e:{switch(e){case"compositionstart":var H="onCompositionStart";break e;case"compositionend":H="onCompositionEnd";break e;case"compositionupdate":H="onCompositionUpdate";break e}H=void 0}else gr?pf(e,n)&&(H="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(H="onCompositionStart");H&&(ff&&n.locale!=="ko"&&(gr||H!=="onCompositionStart"?H==="onCompositionEnd"&&gr&&(D=df()):(kn=u,xo="value"in kn?kn.value:kn.textContent,gr=!0)),P=Ea(d,H),0<P.length&&(H=new Tc(H,e,null,n,u),m.push({event:H,listeners:P}),D?H.data=D:(D=mf(n),D!==null&&(H.data=D)))),(D=Lh?Rh(e,n):Oh(e,n))&&(d=Ea(d,"onBeforeInput"),0<d.length&&(u=new Tc("onBeforeInput","beforeinput",null,n,u),m.push({event:u,listeners:d}),u.data=D))}Nf(m,t)})}function Es(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ea(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=js(e,n),l!=null&&s.unshift(Es(e,l,a)),l=js(e,t),l!=null&&s.push(Es(e,l,a))),e=e.return}return s}function ur(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Fc(e,t,n,s,a){for(var l=t._reactName,i=[];n!==null&&n!==s;){var o=n,c=o.alternate,d=o.stateNode;if(c!==null&&c===s)break;o.tag===5&&d!==null&&(o=d,a?(c=js(n,l),c!=null&&i.unshift(Es(n,c,o))):a||(c=js(n,l),c!=null&&i.push(Es(n,c,o)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var qh=/\r\n?/g,Xh=/\u0000|\uFFFD/g;function Uc(e){return(typeof e=="string"?e:""+e).replace(qh,`
`).replace(Xh,"")}function Zs(e,t,n){if(t=Uc(t),Uc(e)!==t&&n)throw Error(te(425))}function Ta(){}var xi=null,_i=null;function ji(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bi=typeof setTimeout=="function"?setTimeout:void 0,Zh=typeof clearTimeout=="function"?clearTimeout:void 0,Wc=typeof Promise=="function"?Promise:void 0,eg=typeof queueMicrotask=="function"?queueMicrotask:typeof Wc<"u"?function(e){return Wc.resolve(null).then(e).catch(tg)}:bi;function tg(e){setTimeout(function(){throw e})}function Tl(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),ks(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);ks(t)}function $n(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Hc(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ur=Math.random().toString(36).slice(2),qt="__reactFiber$"+Ur,Ts="__reactProps$"+Ur,dn="__reactContainer$"+Ur,Si="__reactEvents$"+Ur,ng="__reactListeners$"+Ur,rg="__reactHandles$"+Ur;function Vn(e){var t=e[qt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[dn]||n[qt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Hc(e);e!==null;){if(n=e[qt])return n;e=Hc(e)}return t}e=n,n=e.parentNode}return null}function Fs(e){return e=e[qt]||e[dn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function xr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(te(33))}function Za(e){return e[Ts]||null}var ki=[],_r=-1;function In(e){return{current:e}}function Be(e){0>_r||(e.current=ki[_r],ki[_r]=null,_r--)}function De(e,t){_r++,ki[_r]=e.current,e.current=t}var On={},ft=In(On),St=In(!1),Gn=On;function Ar(e,t){var n=e.type.contextTypes;if(!n)return On;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=t[l];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function kt(e){return e=e.childContextTypes,e!=null}function $a(){Be(St),Be(ft)}function Vc(e,t,n){if(ft.current!==On)throw Error(te(168));De(ft,t),De(St,n)}function Ef(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(te(108,Fm(e)||"Unknown",a));return Ve({},n,s)}function Pa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||On,Gn=ft.current,De(ft,e),De(St,St.current),!0}function Kc(e,t,n){var s=e.stateNode;if(!s)throw Error(te(169));n?(e=Ef(e,t,Gn),s.__reactInternalMemoizedMergedChildContext=e,Be(St),Be(ft),De(ft,e)):Be(St),De(St,n)}var an=null,el=!1,$l=!1;function Tf(e){an===null?an=[e]:an.push(e)}function sg(e){el=!0,Tf(e)}function Bn(){if(!$l&&an!==null){$l=!0;var e=0,t=Re;try{var n=an;for(Re=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}an=null,el=!1}catch(a){throw an!==null&&(an=an.slice(e+1)),Zd(ho,Bn),a}finally{Re=t,$l=!1}}return null}var jr=[],br=0,za=null,Aa=0,At=[],Mt=0,qn=null,ln=1,on="";function Wn(e,t){jr[br++]=Aa,jr[br++]=za,za=e,Aa=t}function $f(e,t,n){At[Mt++]=ln,At[Mt++]=on,At[Mt++]=qn,qn=e;var s=ln;e=on;var a=32-Ht(s)-1;s&=~(1<<a),n+=1;var l=32-Ht(t)+a;if(30<l){var i=a-a%5;l=(s&(1<<i)-1).toString(32),s>>=i,a-=i,ln=1<<32-Ht(t)+a|n<<a|s,on=l+e}else ln=1<<l|n<<a|s,on=e}function ko(e){e.return!==null&&(Wn(e,1),$f(e,1,0))}function wo(e){for(;e===za;)za=jr[--br],jr[br]=null,Aa=jr[--br],jr[br]=null;for(;e===qn;)qn=At[--Mt],At[Mt]=null,on=At[--Mt],At[Mt]=null,ln=At[--Mt],At[Mt]=null}var Et=null,Ct=null,Ue=!1,Wt=null;function Pf(e,t){var n=Lt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Yc(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Et=e,Ct=$n(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Et=e,Ct=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=qn!==null?{id:ln,overflow:on}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Lt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Et=e,Ct=null,!0):!1;default:return!1}}function wi(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ni(e){if(Ue){var t=Ct;if(t){var n=t;if(!Yc(e,t)){if(wi(e))throw Error(te(418));t=$n(n.nextSibling);var s=Et;t&&Yc(e,t)?Pf(s,n):(e.flags=e.flags&-4097|2,Ue=!1,Et=e)}}else{if(wi(e))throw Error(te(418));e.flags=e.flags&-4097|2,Ue=!1,Et=e}}}function Jc(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Et=e}function ea(e){if(e!==Et)return!1;if(!Ue)return Jc(e),Ue=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!ji(e.type,e.memoizedProps)),t&&(t=Ct)){if(wi(e))throw zf(),Error(te(418));for(;t;)Pf(e,t),t=$n(t.nextSibling)}if(Jc(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Ct=$n(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Ct=null}}else Ct=Et?$n(e.stateNode.nextSibling):null;return!0}function zf(){for(var e=Ct;e;)e=$n(e.nextSibling)}function Mr(){Ct=Et=null,Ue=!1}function No(e){Wt===null?Wt=[e]:Wt.push(e)}var ag=mn.ReactCurrentBatchConfig;function Gr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(te(309));var s=n.stateNode}if(!s)throw Error(te(147,e));var a=s,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(i){var o=a.refs;i===null?delete o[l]:o[l]=i},t._stringRef=l,t)}if(typeof e!="string")throw Error(te(284));if(!n._owner)throw Error(te(290,e))}return e}function ta(e,t){throw e=Object.prototype.toString.call(t),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qc(e){var t=e._init;return t(e._payload)}function Af(e){function t(g,p){if(e){var y=g.deletions;y===null?(g.deletions=[p],g.flags|=16):y.push(p)}}function n(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function s(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function a(g,p){return g=Mn(g,p),g.index=0,g.sibling=null,g}function l(g,p,y){return g.index=y,e?(y=g.alternate,y!==null?(y=y.index,y<p?(g.flags|=2,p):y):(g.flags|=2,p)):(g.flags|=1048576,p)}function i(g){return e&&g.alternate===null&&(g.flags|=2),g}function o(g,p,y,_){return p===null||p.tag!==6?(p=Ol(y,g.mode,_),p.return=g,p):(p=a(p,y),p.return=g,p)}function c(g,p,y,_){var w=y.type;return w===hr?u(g,p,y.props.children,_,y.key):p!==null&&(p.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===vn&&Qc(w)===p.type)?(_=a(p,y.props),_.ref=Gr(g,p,y),_.return=g,_):(_=_a(y.type,y.key,y.props,null,g.mode,_),_.ref=Gr(g,p,y),_.return=g,_)}function d(g,p,y,_){return p===null||p.tag!==4||p.stateNode.containerInfo!==y.containerInfo||p.stateNode.implementation!==y.implementation?(p=Dl(y,g.mode,_),p.return=g,p):(p=a(p,y.children||[]),p.return=g,p)}function u(g,p,y,_,w){return p===null||p.tag!==7?(p=Qn(y,g.mode,_,w),p.return=g,p):(p=a(p,y),p.return=g,p)}function m(g,p,y){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Ol(""+p,g.mode,y),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Hs:return y=_a(p.type,p.key,p.props,null,g.mode,y),y.ref=Gr(g,null,p),y.return=g,y;case mr:return p=Dl(p,g.mode,y),p.return=g,p;case vn:var _=p._init;return m(g,_(p._payload),y)}if(as(p)||Vr(p))return p=Qn(p,g.mode,y,null),p.return=g,p;ta(g,p)}return null}function h(g,p,y,_){var w=p!==null?p.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return w!==null?null:o(g,p,""+y,_);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Hs:return y.key===w?c(g,p,y,_):null;case mr:return y.key===w?d(g,p,y,_):null;case vn:return w=y._init,h(g,p,w(y._payload),_)}if(as(y)||Vr(y))return w!==null?null:u(g,p,y,_,null);ta(g,y)}return null}function x(g,p,y,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(y)||null,o(p,g,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Hs:return g=g.get(_.key===null?y:_.key)||null,c(p,g,_,w);case mr:return g=g.get(_.key===null?y:_.key)||null,d(p,g,_,w);case vn:var P=_._init;return x(g,p,y,P(_._payload),w)}if(as(_)||Vr(_))return g=g.get(y)||null,u(p,g,_,w,null);ta(p,_)}return null}function v(g,p,y,_){for(var w=null,P=null,D=p,H=p=0,I=null;D!==null&&H<y.length;H++){D.index>H?(I=D,D=null):I=D.sibling;var F=h(g,D,y[H],_);if(F===null){D===null&&(D=I);break}e&&D&&F.alternate===null&&t(g,D),p=l(F,p,H),P===null?w=F:P.sibling=F,P=F,D=I}if(H===y.length)return n(g,D),Ue&&Wn(g,H),w;if(D===null){for(;H<y.length;H++)D=m(g,y[H],_),D!==null&&(p=l(D,p,H),P===null?w=D:P.sibling=D,P=D);return Ue&&Wn(g,H),w}for(D=s(g,D);H<y.length;H++)I=x(D,g,H,y[H],_),I!==null&&(e&&I.alternate!==null&&D.delete(I.key===null?H:I.key),p=l(I,p,H),P===null?w=I:P.sibling=I,P=I);return e&&D.forEach(function(z){return t(g,z)}),Ue&&Wn(g,H),w}function S(g,p,y,_){var w=Vr(y);if(typeof w!="function")throw Error(te(150));if(y=w.call(y),y==null)throw Error(te(151));for(var P=w=null,D=p,H=p=0,I=null,F=y.next();D!==null&&!F.done;H++,F=y.next()){D.index>H?(I=D,D=null):I=D.sibling;var z=h(g,D,F.value,_);if(z===null){D===null&&(D=I);break}e&&D&&z.alternate===null&&t(g,D),p=l(z,p,H),P===null?w=z:P.sibling=z,P=z,D=I}if(F.done)return n(g,D),Ue&&Wn(g,H),w;if(D===null){for(;!F.done;H++,F=y.next())F=m(g,F.value,_),F!==null&&(p=l(F,p,H),P===null?w=F:P.sibling=F,P=F);return Ue&&Wn(g,H),w}for(D=s(g,D);!F.done;H++,F=y.next())F=x(D,g,H,F.value,_),F!==null&&(e&&F.alternate!==null&&D.delete(F.key===null?H:F.key),p=l(F,p,H),P===null?w=F:P.sibling=F,P=F);return e&&D.forEach(function(k){return t(g,k)}),Ue&&Wn(g,H),w}function N(g,p,y,_){if(typeof y=="object"&&y!==null&&y.type===hr&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Hs:e:{for(var w=y.key,P=p;P!==null;){if(P.key===w){if(w=y.type,w===hr){if(P.tag===7){n(g,P.sibling),p=a(P,y.props.children),p.return=g,g=p;break e}}else if(P.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===vn&&Qc(w)===P.type){n(g,P.sibling),p=a(P,y.props),p.ref=Gr(g,P,y),p.return=g,g=p;break e}n(g,P);break}else t(g,P);P=P.sibling}y.type===hr?(p=Qn(y.props.children,g.mode,_,y.key),p.return=g,g=p):(_=_a(y.type,y.key,y.props,null,g.mode,_),_.ref=Gr(g,p,y),_.return=g,g=_)}return i(g);case mr:e:{for(P=y.key;p!==null;){if(p.key===P)if(p.tag===4&&p.stateNode.containerInfo===y.containerInfo&&p.stateNode.implementation===y.implementation){n(g,p.sibling),p=a(p,y.children||[]),p.return=g,g=p;break e}else{n(g,p);break}else t(g,p);p=p.sibling}p=Dl(y,g.mode,_),p.return=g,g=p}return i(g);case vn:return P=y._init,N(g,p,P(y._payload),_)}if(as(y))return v(g,p,y,_);if(Vr(y))return S(g,p,y,_);ta(g,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,p!==null&&p.tag===6?(n(g,p.sibling),p=a(p,y),p.return=g,g=p):(n(g,p),p=Ol(y,g.mode,_),p.return=g,g=p),i(g)):n(g,p)}return N}var Lr=Af(!0),Mf=Af(!1),Ma=In(null),La=null,Sr=null,Co=null;function Eo(){Co=Sr=La=null}function To(e){var t=Ma.current;Be(Ma),e._currentValue=t}function Ci(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function $r(e,t){La=e,Co=Sr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(bt=!0),e.firstContext=null)}function Ot(e){var t=e._currentValue;if(Co!==e)if(e={context:e,memoizedValue:t,next:null},Sr===null){if(La===null)throw Error(te(308));Sr=e,La.dependencies={lanes:0,firstContext:e}}else Sr=Sr.next=e;return t}var Kn=null;function $o(e){Kn===null?Kn=[e]:Kn.push(e)}function Lf(e,t,n,s){var a=t.interleaved;return a===null?(n.next=n,$o(t)):(n.next=a.next,a.next=n),t.interleaved=n,fn(e,s)}function fn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var xn=!1;function Po(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function cn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pn(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Pe&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,fn(e,n)}return a=s.interleaved,a===null?(t.next=t,$o(s)):(t.next=a.next,a.next=t),s.interleaved=t,fn(e,n)}function ma(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,go(e,n)}}function Gc(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=i:l=l.next=i,n=n.next}while(n!==null);l===null?a=l=t:l=l.next=t}else a=l=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ra(e,t,n,s){var a=e.updateQueue;xn=!1;var l=a.firstBaseUpdate,i=a.lastBaseUpdate,o=a.shared.pending;if(o!==null){a.shared.pending=null;var c=o,d=c.next;c.next=null,i===null?l=d:i.next=d,i=c;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==i&&(o===null?u.firstBaseUpdate=d:o.next=d,u.lastBaseUpdate=c))}if(l!==null){var m=a.baseState;i=0,u=d=c=null,o=l;do{var h=o.lane,x=o.eventTime;if((s&h)===h){u!==null&&(u=u.next={eventTime:x,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var v=e,S=o;switch(h=t,x=n,S.tag){case 1:if(v=S.payload,typeof v=="function"){m=v.call(x,m,h);break e}m=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=S.payload,h=typeof v=="function"?v.call(x,m,h):v,h==null)break e;m=Ve({},m,h);break e;case 2:xn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[o]:h.push(o))}else x={eventTime:x,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(d=u=x,c=m):u=u.next=x,i|=h;if(o=o.next,o===null){if(o=a.shared.pending,o===null)break;h=o,o=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(u===null&&(c=m),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=u,t=a.shared.interleaved,t!==null){a=t;do i|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);Zn|=i,e.lanes=i,e.memoizedState=m}}function qc(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error(te(191,a));a.call(s)}}}var Us={},en=In(Us),$s=In(Us),Ps=In(Us);function Yn(e){if(e===Us)throw Error(te(174));return e}function zo(e,t){switch(De(Ps,t),De($s,e),De(en,Us),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ii(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ii(t,e)}Be(en),De(en,t)}function Rr(){Be(en),Be($s),Be(Ps)}function Of(e){Yn(Ps.current);var t=Yn(en.current),n=ii(t,e.type);t!==n&&(De($s,e),De(en,n))}function Ao(e){$s.current===e&&(Be(en),Be($s))}var We=In(0);function Oa(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Pl=[];function Mo(){for(var e=0;e<Pl.length;e++)Pl[e]._workInProgressVersionPrimary=null;Pl.length=0}var ha=mn.ReactCurrentDispatcher,zl=mn.ReactCurrentBatchConfig,Xn=0,He=null,et=null,rt=null,Da=!1,ms=!1,zs=0,lg=0;function ct(){throw Error(te(321))}function Lo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kt(e[n],t[n]))return!1;return!0}function Ro(e,t,n,s,a,l){if(Xn=l,He=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ha.current=e===null||e.memoizedState===null?ug:dg,e=n(s,a),ms){l=0;do{if(ms=!1,zs=0,25<=l)throw Error(te(301));l+=1,rt=et=null,t.updateQueue=null,ha.current=fg,e=n(s,a)}while(ms)}if(ha.current=Ia,t=et!==null&&et.next!==null,Xn=0,rt=et=He=null,Da=!1,t)throw Error(te(300));return e}function Oo(){var e=zs!==0;return zs=0,e}function Qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return rt===null?He.memoizedState=rt=e:rt=rt.next=e,rt}function Dt(){if(et===null){var e=He.alternate;e=e!==null?e.memoizedState:null}else e=et.next;var t=rt===null?He.memoizedState:rt.next;if(t!==null)rt=t,et=e;else{if(e===null)throw Error(te(310));et=e,e={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},rt===null?He.memoizedState=rt=e:rt=rt.next=e}return rt}function As(e,t){return typeof t=="function"?t(e):t}function Al(e){var t=Dt(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var s=et,a=s.baseQueue,l=n.pending;if(l!==null){if(a!==null){var i=a.next;a.next=l.next,l.next=i}s.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,s=s.baseState;var o=i=null,c=null,d=l;do{var u=d.lane;if((Xn&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(o=c=m,i=s):c=c.next=m,He.lanes|=u,Zn|=u}d=d.next}while(d!==null&&d!==l);c===null?i=s:c.next=o,Kt(s,t.memoizedState)||(bt=!0),t.memoizedState=s,t.baseState=i,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){a=e;do l=a.lane,He.lanes|=l,Zn|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ml(e){var t=Dt(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,l=t.memoizedState;if(a!==null){n.pending=null;var i=a=a.next;do l=e(l,i.action),i=i.next;while(i!==a);Kt(l,t.memoizedState)||(bt=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,s]}function Df(){}function If(e,t){var n=He,s=Dt(),a=t(),l=!Kt(s.memoizedState,a);if(l&&(s.memoizedState=a,bt=!0),s=s.queue,Do(Uf.bind(null,n,s,e),[e]),s.getSnapshot!==t||l||rt!==null&&rt.memoizedState.tag&1){if(n.flags|=2048,Ms(9,Ff.bind(null,n,s,a,t),void 0,null),st===null)throw Error(te(349));Xn&30||Bf(n,t,a)}return a}function Bf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=He.updateQueue,t===null?(t={lastEffect:null,stores:null},He.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ff(e,t,n,s){t.value=n,t.getSnapshot=s,Wf(t)&&Hf(e)}function Uf(e,t,n){return n(function(){Wf(t)&&Hf(e)})}function Wf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kt(e,n)}catch{return!0}}function Hf(e){var t=fn(e,1);t!==null&&Vt(t,e,1,-1)}function Xc(e){var t=Qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:As,lastRenderedState:e},t.queue=e,e=e.dispatch=cg.bind(null,He,e),[t.memoizedState,e]}function Ms(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=He.updateQueue,t===null?(t={lastEffect:null,stores:null},He.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function Vf(){return Dt().memoizedState}function ga(e,t,n,s){var a=Qt();He.flags|=e,a.memoizedState=Ms(1|t,n,void 0,s===void 0?null:s)}function tl(e,t,n,s){var a=Dt();s=s===void 0?null:s;var l=void 0;if(et!==null){var i=et.memoizedState;if(l=i.destroy,s!==null&&Lo(s,i.deps)){a.memoizedState=Ms(t,n,l,s);return}}He.flags|=e,a.memoizedState=Ms(1|t,n,l,s)}function Zc(e,t){return ga(8390656,8,e,t)}function Do(e,t){return tl(2048,8,e,t)}function Kf(e,t){return tl(4,2,e,t)}function Yf(e,t){return tl(4,4,e,t)}function Jf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Qf(e,t,n){return n=n!=null?n.concat([e]):null,tl(4,4,Jf.bind(null,t,e),n)}function Io(){}function Gf(e,t){var n=Dt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Lo(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function qf(e,t){var n=Dt();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Lo(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Xf(e,t,n){return Xn&21?(Kt(n,t)||(n=nf(),He.lanes|=n,Zn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,bt=!0),e.memoizedState=n)}function ig(e,t){var n=Re;Re=n!==0&&4>n?n:4,e(!0);var s=zl.transition;zl.transition={};try{e(!1),t()}finally{Re=n,zl.transition=s}}function Zf(){return Dt().memoizedState}function og(e,t,n){var s=An(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},ep(e))tp(t,n);else if(n=Lf(e,t,n,s),n!==null){var a=yt();Vt(n,e,s,a),np(n,t,s)}}function cg(e,t,n){var s=An(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(ep(e))tp(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var i=t.lastRenderedState,o=l(i,n);if(a.hasEagerState=!0,a.eagerState=o,Kt(o,i)){var c=t.interleaved;c===null?(a.next=a,$o(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=Lf(e,t,a,s),n!==null&&(a=yt(),Vt(n,e,s,a),np(n,t,s))}}function ep(e){var t=e.alternate;return e===He||t!==null&&t===He}function tp(e,t){ms=Da=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function np(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,go(e,n)}}var Ia={readContext:Ot,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},ug={readContext:Ot,useCallback:function(e,t){return Qt().memoizedState=[e,t===void 0?null:t],e},useContext:Ot,useEffect:Zc,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ga(4194308,4,Jf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ga(4194308,4,e,t)},useInsertionEffect:function(e,t){return ga(4,2,e,t)},useMemo:function(e,t){var n=Qt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=Qt();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=og.bind(null,He,e),[s.memoizedState,e]},useRef:function(e){var t=Qt();return e={current:e},t.memoizedState=e},useState:Xc,useDebugValue:Io,useDeferredValue:function(e){return Qt().memoizedState=e},useTransition:function(){var e=Xc(!1),t=e[0];return e=ig.bind(null,e[1]),Qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=He,a=Qt();if(Ue){if(n===void 0)throw Error(te(407));n=n()}else{if(n=t(),st===null)throw Error(te(349));Xn&30||Bf(s,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,Zc(Uf.bind(null,s,l,e),[e]),s.flags|=2048,Ms(9,Ff.bind(null,s,l,n,t),void 0,null),n},useId:function(){var e=Qt(),t=st.identifierPrefix;if(Ue){var n=on,s=ln;n=(s&~(1<<32-Ht(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=zs++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=lg++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},dg={readContext:Ot,useCallback:Gf,useContext:Ot,useEffect:Do,useImperativeHandle:Qf,useInsertionEffect:Kf,useLayoutEffect:Yf,useMemo:qf,useReducer:Al,useRef:Vf,useState:function(){return Al(As)},useDebugValue:Io,useDeferredValue:function(e){var t=Dt();return Xf(t,et.memoizedState,e)},useTransition:function(){var e=Al(As)[0],t=Dt().memoizedState;return[e,t]},useMutableSource:Df,useSyncExternalStore:If,useId:Zf,unstable_isNewReconciler:!1},fg={readContext:Ot,useCallback:Gf,useContext:Ot,useEffect:Do,useImperativeHandle:Qf,useInsertionEffect:Kf,useLayoutEffect:Yf,useMemo:qf,useReducer:Ml,useRef:Vf,useState:function(){return Ml(As)},useDebugValue:Io,useDeferredValue:function(e){var t=Dt();return et===null?t.memoizedState=e:Xf(t,et.memoizedState,e)},useTransition:function(){var e=Ml(As)[0],t=Dt().memoizedState;return[e,t]},useMutableSource:Df,useSyncExternalStore:If,useId:Zf,unstable_isNewReconciler:!1};function Ft(e,t){if(e&&e.defaultProps){t=Ve({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Ei(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:Ve({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var nl={isMounted:function(e){return(e=e._reactInternals)?rr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=yt(),a=An(e),l=cn(s,a);l.payload=t,n!=null&&(l.callback=n),t=Pn(e,l,a),t!==null&&(Vt(t,e,a,s),ma(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=yt(),a=An(e),l=cn(s,a);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Pn(e,l,a),t!==null&&(Vt(t,e,a,s),ma(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=yt(),s=An(e),a=cn(n,s);a.tag=2,t!=null&&(a.callback=t),t=Pn(e,a,s),t!==null&&(Vt(t,e,s,n),ma(t,e,s))}};function eu(e,t,n,s,a,l,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,l,i):t.prototype&&t.prototype.isPureReactComponent?!Ns(n,s)||!Ns(a,l):!0}function rp(e,t,n){var s=!1,a=On,l=t.contextType;return typeof l=="object"&&l!==null?l=Ot(l):(a=kt(t)?Gn:ft.current,s=t.contextTypes,l=(s=s!=null)?Ar(e,a):On),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=nl,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function tu(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&nl.enqueueReplaceState(t,t.state,null)}function Ti(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Po(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=Ot(l):(l=kt(t)?Gn:ft.current,a.context=Ar(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(Ei(e,t,l,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&nl.enqueueReplaceState(a,a.state,null),Ra(e,n,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Or(e,t){try{var n="",s=t;do n+=Bm(s),s=s.return;while(s);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function Ll(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function $i(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var pg=typeof WeakMap=="function"?WeakMap:Map;function sp(e,t,n){n=cn(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Fa||(Fa=!0,Bi=s),$i(e,t)},n}function ap(e,t,n){n=cn(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){$i(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){$i(e,t),typeof s!="function"&&(zn===null?zn=new Set([this]):zn.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function nu(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new pg;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=Cg.bind(null,e,t,n),t.then(e,e))}function ru(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function su(e,t,n,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=cn(-1,1),t.tag=2,Pn(n,t,1))),n.lanes|=1),e)}var mg=mn.ReactCurrentOwner,bt=!1;function gt(e,t,n,s){t.child=e===null?Mf(t,null,n,s):Lr(t,e.child,n,s)}function au(e,t,n,s,a){n=n.render;var l=t.ref;return $r(t,a),s=Ro(e,t,n,s,l,a),n=Oo(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,pn(e,t,a)):(Ue&&n&&ko(t),t.flags|=1,gt(e,t,s,a),t.child)}function lu(e,t,n,s,a){if(e===null){var l=n.type;return typeof l=="function"&&!Yo(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,lp(e,t,l,s,a)):(e=_a(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var i=l.memoizedProps;if(n=n.compare,n=n!==null?n:Ns,n(i,s)&&e.ref===t.ref)return pn(e,t,a)}return t.flags|=1,e=Mn(l,s),e.ref=t.ref,e.return=t,t.child=e}function lp(e,t,n,s,a){if(e!==null){var l=e.memoizedProps;if(Ns(l,s)&&e.ref===t.ref)if(bt=!1,t.pendingProps=s=l,(e.lanes&a)!==0)e.flags&131072&&(bt=!0);else return t.lanes=e.lanes,pn(e,t,a)}return Pi(e,t,n,s,a)}function ip(e,t,n){var s=t.pendingProps,a=s.children,l=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(wr,Nt),Nt|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,De(wr,Nt),Nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=l!==null?l.baseLanes:n,De(wr,Nt),Nt|=s}else l!==null?(s=l.baseLanes|n,t.memoizedState=null):s=n,De(wr,Nt),Nt|=s;return gt(e,t,a,n),t.child}function op(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Pi(e,t,n,s,a){var l=kt(n)?Gn:ft.current;return l=Ar(t,l),$r(t,a),n=Ro(e,t,n,s,l,a),s=Oo(),e!==null&&!bt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,pn(e,t,a)):(Ue&&s&&ko(t),t.flags|=1,gt(e,t,n,a),t.child)}function iu(e,t,n,s,a){if(kt(n)){var l=!0;Pa(t)}else l=!1;if($r(t,a),t.stateNode===null)ya(e,t),rp(t,n,s),Ti(t,n,s,a),s=!0;else if(e===null){var i=t.stateNode,o=t.memoizedProps;i.props=o;var c=i.context,d=n.contextType;typeof d=="object"&&d!==null?d=Ot(d):(d=kt(n)?Gn:ft.current,d=Ar(t,d));var u=n.getDerivedStateFromProps,m=typeof u=="function"||typeof i.getSnapshotBeforeUpdate=="function";m||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==s||c!==d)&&tu(t,i,s,d),xn=!1;var h=t.memoizedState;i.state=h,Ra(t,s,i,a),c=t.memoizedState,o!==s||h!==c||St.current||xn?(typeof u=="function"&&(Ei(t,n,u,s),c=t.memoizedState),(o=xn||eu(t,n,o,s,h,c,d))?(m||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),i.props=s,i.state=c,i.context=d,s=o):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,Rf(e,t),o=t.memoizedProps,d=t.type===t.elementType?o:Ft(t.type,o),i.props=d,m=t.pendingProps,h=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=Ot(c):(c=kt(n)?Gn:ft.current,c=Ar(t,c));var x=n.getDerivedStateFromProps;(u=typeof x=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(o!==m||h!==c)&&tu(t,i,s,c),xn=!1,h=t.memoizedState,i.state=h,Ra(t,s,i,a);var v=t.memoizedState;o!==m||h!==v||St.current||xn?(typeof x=="function"&&(Ei(t,n,x,s),v=t.memoizedState),(d=xn||eu(t,n,d,s,h,v,c)||!1)?(u||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,v,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,v,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=v),i.props=s,i.state=v,i.context=c,s=d):(typeof i.componentDidUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return zi(e,t,n,s,l,a)}function zi(e,t,n,s,a,l){op(e,t);var i=(t.flags&128)!==0;if(!s&&!i)return a&&Kc(t,n,!1),pn(e,t,l);s=t.stateNode,mg.current=t;var o=i&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&i?(t.child=Lr(t,e.child,null,l),t.child=Lr(t,null,o,l)):gt(e,t,o,l),t.memoizedState=s.state,a&&Kc(t,n,!0),t.child}function cp(e){var t=e.stateNode;t.pendingContext?Vc(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Vc(e,t.context,!1),zo(e,t.containerInfo)}function ou(e,t,n,s,a){return Mr(),No(a),t.flags|=256,gt(e,t,n,s),t.child}var Ai={dehydrated:null,treeContext:null,retryLane:0};function Mi(e){return{baseLanes:e,cachePool:null,transitions:null}}function up(e,t,n){var s=t.pendingProps,a=We.current,l=!1,i=(t.flags&128)!==0,o;if((o=i)||(o=e!==null&&e.memoizedState===null?!1:(a&2)!==0),o?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),De(We,a&1),e===null)return Ni(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=s.children,e=s.fallback,l?(s=t.mode,l=t.child,i={mode:"hidden",children:i},!(s&1)&&l!==null?(l.childLanes=0,l.pendingProps=i):l=al(i,s,0,null),e=Qn(e,s,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Mi(n),t.memoizedState=Ai,e):Bo(t,i));if(a=e.memoizedState,a!==null&&(o=a.dehydrated,o!==null))return hg(e,t,i,s,o,a,n);if(l){l=s.fallback,i=t.mode,a=e.child,o=a.sibling;var c={mode:"hidden",children:s.children};return!(i&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=Mn(a,c),s.subtreeFlags=a.subtreeFlags&14680064),o!==null?l=Mn(o,l):(l=Qn(l,i,n,null),l.flags|=2),l.return=t,s.return=t,s.sibling=l,t.child=s,s=l,l=t.child,i=e.child.memoizedState,i=i===null?Mi(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},l.memoizedState=i,l.childLanes=e.childLanes&~n,t.memoizedState=Ai,s}return l=e.child,e=l.sibling,s=Mn(l,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Bo(e,t){return t=al({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function na(e,t,n,s){return s!==null&&No(s),Lr(t,e.child,null,n),e=Bo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hg(e,t,n,s,a,l,i){if(n)return t.flags&256?(t.flags&=-257,s=Ll(Error(te(422))),na(e,t,i,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=s.fallback,a=t.mode,s=al({mode:"visible",children:s.children},a,0,null),l=Qn(l,a,i,null),l.flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,t.mode&1&&Lr(t,e.child,null,i),t.child.memoizedState=Mi(i),t.memoizedState=Ai,l);if(!(t.mode&1))return na(e,t,i,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var o=s.dgst;return s=o,l=Error(te(419)),s=Ll(l,s,void 0),na(e,t,i,s)}if(o=(i&e.childLanes)!==0,bt||o){if(s=st,s!==null){switch(i&-i){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|i)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,fn(e,a),Vt(s,e,a,-1))}return Ko(),s=Ll(Error(te(421))),na(e,t,i,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=Eg.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,Ct=$n(a.nextSibling),Et=t,Ue=!0,Wt=null,e!==null&&(At[Mt++]=ln,At[Mt++]=on,At[Mt++]=qn,ln=e.id,on=e.overflow,qn=t),t=Bo(t,s.children),t.flags|=4096,t)}function cu(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Ci(e.return,t,n)}function Rl(e,t,n,s,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=s,l.tail=n,l.tailMode=a)}function dp(e,t,n){var s=t.pendingProps,a=s.revealOrder,l=s.tail;if(gt(e,t,s.children,n),s=We.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&cu(e,n,t);else if(e.tag===19)cu(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(De(We,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Oa(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Rl(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Oa(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Rl(t,!0,n,null,l);break;case"together":Rl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ya(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Zn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(te(153));if(t.child!==null){for(e=t.child,n=Mn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Mn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function gg(e,t,n){switch(t.tag){case 3:cp(t),Mr();break;case 5:Of(t);break;case 1:kt(t.type)&&Pa(t);break;case 4:zo(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;De(Ma,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(De(We,We.current&1),t.flags|=128,null):n&t.child.childLanes?up(e,t,n):(De(We,We.current&1),e=pn(e,t,n),e!==null?e.sibling:null);De(We,We.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return dp(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),De(We,We.current),s)break;return null;case 22:case 23:return t.lanes=0,ip(e,t,n)}return pn(e,t,n)}var fp,Li,pp,mp;fp=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Li=function(){};pp=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Yn(en.current);var l=null;switch(n){case"input":a=ri(e,a),s=ri(e,s),l=[];break;case"select":a=Ve({},a,{value:void 0}),s=Ve({},s,{value:void 0}),l=[];break;case"textarea":a=li(e,a),s=li(e,s),l=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Ta)}oi(n,s);var i;n=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var o=a[d];for(i in o)o.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(xs.hasOwnProperty(d)?l||(l=[]):(l=l||[]).push(d,null));for(d in s){var c=s[d];if(o=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==o&&(c!=null||o!=null))if(d==="style")if(o){for(i in o)!o.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&o[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(l||(l=[]),l.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,o=o?o.__html:void 0,c!=null&&o!==c&&(l=l||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(l=l||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(xs.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ie("scroll",e),l||o===c||(l=[])):(l=l||[]).push(d,c))}n&&(l=l||[]).push("style",n);var d=l;(t.updateQueue=d)&&(t.flags|=4)}};mp=function(e,t,n,s){n!==s&&(t.flags|=4)};function qr(e,t){if(!Ue)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ut(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function yg(e,t,n){var s=t.pendingProps;switch(wo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(t),null;case 1:return kt(t.type)&&$a(),ut(t),null;case 3:return s=t.stateNode,Rr(),Be(St),Be(ft),Mo(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ea(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Wt!==null&&(Wi(Wt),Wt=null))),Li(e,t),ut(t),null;case 5:Ao(t);var a=Yn(Ps.current);if(n=t.type,e!==null&&t.stateNode!=null)pp(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(te(166));return ut(t),null}if(e=Yn(en.current),ea(t)){s=t.stateNode,n=t.type;var l=t.memoizedProps;switch(s[qt]=t,s[Ts]=l,e=(t.mode&1)!==0,n){case"dialog":Ie("cancel",s),Ie("close",s);break;case"iframe":case"object":case"embed":Ie("load",s);break;case"video":case"audio":for(a=0;a<is.length;a++)Ie(is[a],s);break;case"source":Ie("error",s);break;case"img":case"image":case"link":Ie("error",s),Ie("load",s);break;case"details":Ie("toggle",s);break;case"input":vc(s,l),Ie("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!l.multiple},Ie("invalid",s);break;case"textarea":_c(s,l),Ie("invalid",s)}oi(n,l),a=null;for(var i in l)if(l.hasOwnProperty(i)){var o=l[i];i==="children"?typeof o=="string"?s.textContent!==o&&(l.suppressHydrationWarning!==!0&&Zs(s.textContent,o,e),a=["children",o]):typeof o=="number"&&s.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&Zs(s.textContent,o,e),a=["children",""+o]):xs.hasOwnProperty(i)&&o!=null&&i==="onScroll"&&Ie("scroll",s)}switch(n){case"input":Vs(s),xc(s,l,!0);break;case"textarea":Vs(s),jc(s);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(s.onclick=Ta)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{i=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Fd(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=i.createElement(n,{is:s.is}):(e=i.createElement(n),n==="select"&&(i=e,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):e=i.createElementNS(e,n),e[qt]=t,e[Ts]=s,fp(e,t,!1,!1),t.stateNode=e;e:{switch(i=ci(n,s),n){case"dialog":Ie("cancel",e),Ie("close",e),a=s;break;case"iframe":case"object":case"embed":Ie("load",e),a=s;break;case"video":case"audio":for(a=0;a<is.length;a++)Ie(is[a],e);a=s;break;case"source":Ie("error",e),a=s;break;case"img":case"image":case"link":Ie("error",e),Ie("load",e),a=s;break;case"details":Ie("toggle",e),a=s;break;case"input":vc(e,s),a=ri(e,s),Ie("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=Ve({},s,{value:void 0}),Ie("invalid",e);break;case"textarea":_c(e,s),a=li(e,s),Ie("invalid",e);break;default:a=s}oi(n,a),o=a;for(l in o)if(o.hasOwnProperty(l)){var c=o[l];l==="style"?Hd(e,c):l==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ud(e,c)):l==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&_s(e,c):typeof c=="number"&&_s(e,""+c):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(xs.hasOwnProperty(l)?c!=null&&l==="onScroll"&&Ie("scroll",e):c!=null&&co(e,l,c,i))}switch(n){case"input":Vs(e),xc(e,s,!1);break;case"textarea":Vs(e),jc(e);break;case"option":s.value!=null&&e.setAttribute("value",""+Rn(s.value));break;case"select":e.multiple=!!s.multiple,l=s.value,l!=null?Nr(e,!!s.multiple,l,!1):s.defaultValue!=null&&Nr(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ta)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ut(t),null;case 6:if(e&&t.stateNode!=null)mp(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(te(166));if(n=Yn(Ps.current),Yn(en.current),ea(t)){if(s=t.stateNode,n=t.memoizedProps,s[qt]=t,(l=s.nodeValue!==n)&&(e=Et,e!==null))switch(e.tag){case 3:Zs(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Zs(s.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[qt]=t,t.stateNode=s}return ut(t),null;case 13:if(Be(We),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ue&&Ct!==null&&t.mode&1&&!(t.flags&128))zf(),Mr(),t.flags|=98560,l=!1;else if(l=ea(t),s!==null&&s.dehydrated!==null){if(e===null){if(!l)throw Error(te(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(te(317));l[qt]=t}else Mr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ut(t),l=!1}else Wt!==null&&(Wi(Wt),Wt=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||We.current&1?tt===0&&(tt=3):Ko())),t.updateQueue!==null&&(t.flags|=4),ut(t),null);case 4:return Rr(),Li(e,t),e===null&&Cs(t.stateNode.containerInfo),ut(t),null;case 10:return To(t.type._context),ut(t),null;case 17:return kt(t.type)&&$a(),ut(t),null;case 19:if(Be(We),l=t.memoizedState,l===null)return ut(t),null;if(s=(t.flags&128)!==0,i=l.rendering,i===null)if(s)qr(l,!1);else{if(tt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=Oa(e),i!==null){for(t.flags|=128,qr(l,!1),s=i.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)l=n,e=s,l.flags&=14680066,i=l.alternate,i===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=i.childLanes,l.lanes=i.lanes,l.child=i.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=i.memoizedProps,l.memoizedState=i.memoizedState,l.updateQueue=i.updateQueue,l.type=i.type,e=i.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return De(We,We.current&1|2),t.child}e=e.sibling}l.tail!==null&&Qe()>Dr&&(t.flags|=128,s=!0,qr(l,!1),t.lanes=4194304)}else{if(!s)if(e=Oa(i),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),qr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!i.alternate&&!Ue)return ut(t),null}else 2*Qe()-l.renderingStartTime>Dr&&n!==1073741824&&(t.flags|=128,s=!0,qr(l,!1),t.lanes=4194304);l.isBackwards?(i.sibling=t.child,t.child=i):(n=l.last,n!==null?n.sibling=i:t.child=i,l.last=i)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=Qe(),t.sibling=null,n=We.current,De(We,s?n&1|2:n&1),t):(ut(t),null);case 22:case 23:return Vo(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Nt&1073741824&&(ut(t),t.subtreeFlags&6&&(t.flags|=8192)):ut(t),null;case 24:return null;case 25:return null}throw Error(te(156,t.tag))}function vg(e,t){switch(wo(t),t.tag){case 1:return kt(t.type)&&$a(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Rr(),Be(St),Be(ft),Mo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Ao(t),null;case 13:if(Be(We),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(te(340));Mr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Be(We),null;case 4:return Rr(),null;case 10:return To(t.type._context),null;case 22:case 23:return Vo(),null;case 24:return null;default:return null}}var ra=!1,dt=!1,xg=typeof WeakSet=="function"?WeakSet:Set,oe=null;function kr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Ye(e,t,s)}else n.current=null}function Ri(e,t,n){try{n()}catch(s){Ye(e,t,s)}}var uu=!1;function _g(e,t){if(xi=Na,e=xf(),So(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,l=s.focusNode;s=s.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var i=0,o=-1,c=-1,d=0,u=0,m=e,h=null;t:for(;;){for(var x;m!==n||a!==0&&m.nodeType!==3||(o=i+a),m!==l||s!==0&&m.nodeType!==3||(c=i+s),m.nodeType===3&&(i+=m.nodeValue.length),(x=m.firstChild)!==null;)h=m,m=x;for(;;){if(m===e)break t;if(h===n&&++d===a&&(o=i),h===l&&++u===s&&(c=i),(x=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=x}n=o===-1||c===-1?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(_i={focusedElem:e,selectionRange:n},Na=!1,oe=t;oe!==null;)if(t=oe,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,oe=e;else for(;oe!==null;){t=oe;try{var v=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var S=v.memoizedProps,N=v.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?S:Ft(t.type,S),N);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var y=t.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(te(163))}}catch(_){Ye(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,oe=e;break}oe=t.return}return v=uu,uu=!1,v}function hs(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&Ri(t,n,l)}a=a.next}while(a!==s)}}function rl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function Oi(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function hp(e){var t=e.alternate;t!==null&&(e.alternate=null,hp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[qt],delete t[Ts],delete t[Si],delete t[ng],delete t[rg])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function gp(e){return e.tag===5||e.tag===3||e.tag===4}function du(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||gp(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Di(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ta));else if(s!==4&&(e=e.child,e!==null))for(Di(e,t,n),e=e.sibling;e!==null;)Di(e,t,n),e=e.sibling}function Ii(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Ii(e,t,n),e=e.sibling;e!==null;)Ii(e,t,n),e=e.sibling}var lt=null,Ut=!1;function yn(e,t,n){for(n=n.child;n!==null;)yp(e,t,n),n=n.sibling}function yp(e,t,n){if(Zt&&typeof Zt.onCommitFiberUnmount=="function")try{Zt.onCommitFiberUnmount(Qa,n)}catch{}switch(n.tag){case 5:dt||kr(n,t);case 6:var s=lt,a=Ut;lt=null,yn(e,t,n),lt=s,Ut=a,lt!==null&&(Ut?(e=lt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(Ut?(e=lt,n=n.stateNode,e.nodeType===8?Tl(e.parentNode,n):e.nodeType===1&&Tl(e,n),ks(e)):Tl(lt,n.stateNode));break;case 4:s=lt,a=Ut,lt=n.stateNode.containerInfo,Ut=!0,yn(e,t,n),lt=s,Ut=a;break;case 0:case 11:case 14:case 15:if(!dt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var l=a,i=l.destroy;l=l.tag,i!==void 0&&(l&2||l&4)&&Ri(n,t,i),a=a.next}while(a!==s)}yn(e,t,n);break;case 1:if(!dt&&(kr(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){Ye(n,t,o)}yn(e,t,n);break;case 21:yn(e,t,n);break;case 22:n.mode&1?(dt=(s=dt)||n.memoizedState!==null,yn(e,t,n),dt=s):yn(e,t,n);break;default:yn(e,t,n)}}function fu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new xg),t.forEach(function(s){var a=Tg.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}}function It(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var l=e,i=t,o=i;e:for(;o!==null;){switch(o.tag){case 5:lt=o.stateNode,Ut=!1;break e;case 3:lt=o.stateNode.containerInfo,Ut=!0;break e;case 4:lt=o.stateNode.containerInfo,Ut=!0;break e}o=o.return}if(lt===null)throw Error(te(160));yp(l,i,a),lt=null,Ut=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){Ye(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)vp(t,e),t=t.sibling}function vp(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(It(t,e),Jt(e),s&4){try{hs(3,e,e.return),rl(3,e)}catch(S){Ye(e,e.return,S)}try{hs(5,e,e.return)}catch(S){Ye(e,e.return,S)}}break;case 1:It(t,e),Jt(e),s&512&&n!==null&&kr(n,n.return);break;case 5:if(It(t,e),Jt(e),s&512&&n!==null&&kr(n,n.return),e.flags&32){var a=e.stateNode;try{_s(a,"")}catch(S){Ye(e,e.return,S)}}if(s&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,i=n!==null?n.memoizedProps:l,o=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&Id(a,l),ci(o,i);var d=ci(o,l);for(i=0;i<c.length;i+=2){var u=c[i],m=c[i+1];u==="style"?Hd(a,m):u==="dangerouslySetInnerHTML"?Ud(a,m):u==="children"?_s(a,m):co(a,u,m,d)}switch(o){case"input":si(a,l);break;case"textarea":Bd(a,l);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?Nr(a,!!l.multiple,x,!1):h!==!!l.multiple&&(l.defaultValue!=null?Nr(a,!!l.multiple,l.defaultValue,!0):Nr(a,!!l.multiple,l.multiple?[]:"",!1))}a[Ts]=l}catch(S){Ye(e,e.return,S)}}break;case 6:if(It(t,e),Jt(e),s&4){if(e.stateNode===null)throw Error(te(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(S){Ye(e,e.return,S)}}break;case 3:if(It(t,e),Jt(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{ks(t.containerInfo)}catch(S){Ye(e,e.return,S)}break;case 4:It(t,e),Jt(e);break;case 13:It(t,e),Jt(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Wo=Qe())),s&4&&fu(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(dt=(d=dt)||u,It(t,e),dt=d):It(t,e),Jt(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!u&&e.mode&1)for(oe=e,u=e.child;u!==null;){for(m=oe=u;oe!==null;){switch(h=oe,x=h.child,h.tag){case 0:case 11:case 14:case 15:hs(4,h,h.return);break;case 1:kr(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){s=h,n=h.return;try{t=s,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(S){Ye(s,n,S)}}break;case 5:kr(h,h.return);break;case 22:if(h.memoizedState!==null){mu(m);continue}}x!==null?(x.return=h,oe=x):mu(m)}u=u.sibling}e:for(u=null,m=e;;){if(m.tag===5){if(u===null){u=m;try{a=m.stateNode,d?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=m.stateNode,c=m.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,o.style.display=Wd("display",i))}catch(S){Ye(e,e.return,S)}}}else if(m.tag===6){if(u===null)try{m.stateNode.nodeValue=d?"":m.memoizedProps}catch(S){Ye(e,e.return,S)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:It(t,e),Jt(e),s&4&&fu(e);break;case 21:break;default:It(t,e),Jt(e)}}function Jt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(gp(n)){var s=n;break e}n=n.return}throw Error(te(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(_s(a,""),s.flags&=-33);var l=du(e);Ii(e,l,a);break;case 3:case 4:var i=s.stateNode.containerInfo,o=du(e);Di(e,o,i);break;default:throw Error(te(161))}}catch(c){Ye(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jg(e,t,n){oe=e,xp(e)}function xp(e,t,n){for(var s=(e.mode&1)!==0;oe!==null;){var a=oe,l=a.child;if(a.tag===22&&s){var i=a.memoizedState!==null||ra;if(!i){var o=a.alternate,c=o!==null&&o.memoizedState!==null||dt;o=ra;var d=dt;if(ra=i,(dt=c)&&!d)for(oe=a;oe!==null;)i=oe,c=i.child,i.tag===22&&i.memoizedState!==null?hu(a):c!==null?(c.return=i,oe=c):hu(a);for(;l!==null;)oe=l,xp(l),l=l.sibling;oe=a,ra=o,dt=d}pu(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,oe=l):pu(e)}}function pu(e){for(;oe!==null;){var t=oe;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dt||rl(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!dt)if(n===null)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ft(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&qc(t,l,s);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}qc(t,i,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var m=u.dehydrated;m!==null&&ks(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(te(163))}dt||t.flags&512&&Oi(t)}catch(h){Ye(t,t.return,h)}}if(t===e){oe=null;break}if(n=t.sibling,n!==null){n.return=t.return,oe=n;break}oe=t.return}}function mu(e){for(;oe!==null;){var t=oe;if(t===e){oe=null;break}var n=t.sibling;if(n!==null){n.return=t.return,oe=n;break}oe=t.return}}function hu(e){for(;oe!==null;){var t=oe;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(c){Ye(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){Ye(t,a,c)}}var l=t.return;try{Oi(t)}catch(c){Ye(t,l,c)}break;case 5:var i=t.return;try{Oi(t)}catch(c){Ye(t,i,c)}}}catch(c){Ye(t,t.return,c)}if(t===e){oe=null;break}var o=t.sibling;if(o!==null){o.return=t.return,oe=o;break}oe=t.return}}var bg=Math.ceil,Ba=mn.ReactCurrentDispatcher,Fo=mn.ReactCurrentOwner,Rt=mn.ReactCurrentBatchConfig,Pe=0,st=null,Ze=null,it=0,Nt=0,wr=In(0),tt=0,Ls=null,Zn=0,sl=0,Uo=0,gs=null,jt=null,Wo=0,Dr=1/0,sn=null,Fa=!1,Bi=null,zn=null,sa=!1,wn=null,Ua=0,ys=0,Fi=null,va=-1,xa=0;function yt(){return Pe&6?Qe():va!==-1?va:va=Qe()}function An(e){return e.mode&1?Pe&2&&it!==0?it&-it:ag.transition!==null?(xa===0&&(xa=nf()),xa):(e=Re,e!==0||(e=window.event,e=e===void 0?16:uf(e.type)),e):1}function Vt(e,t,n,s){if(50<ys)throw ys=0,Fi=null,Error(te(185));Is(e,n,s),(!(Pe&2)||e!==st)&&(e===st&&(!(Pe&2)&&(sl|=n),tt===4&&jn(e,it)),wt(e,s),n===1&&Pe===0&&!(t.mode&1)&&(Dr=Qe()+500,el&&Bn()))}function wt(e,t){var n=e.callbackNode;ah(e,t);var s=wa(e,e===st?it:0);if(s===0)n!==null&&kc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&kc(n),t===1)e.tag===0?sg(gu.bind(null,e)):Tf(gu.bind(null,e)),eg(function(){!(Pe&6)&&Bn()}),n=null;else{switch(rf(s)){case 1:n=ho;break;case 4:n=ef;break;case 16:n=ka;break;case 536870912:n=tf;break;default:n=ka}n=Cp(n,_p.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function _p(e,t){if(va=-1,xa=0,Pe&6)throw Error(te(327));var n=e.callbackNode;if(Pr()&&e.callbackNode!==n)return null;var s=wa(e,e===st?it:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=Wa(e,s);else{t=s;var a=Pe;Pe|=2;var l=bp();(st!==e||it!==t)&&(sn=null,Dr=Qe()+500,Jn(e,t));do try{wg();break}catch(o){jp(e,o)}while(!0);Eo(),Ba.current=l,Pe=a,Ze!==null?t=0:(st=null,it=0,t=tt)}if(t!==0){if(t===2&&(a=mi(e),a!==0&&(s=a,t=Ui(e,a))),t===1)throw n=Ls,Jn(e,0),jn(e,s),wt(e,Qe()),n;if(t===6)jn(e,s);else{if(a=e.current.alternate,!(s&30)&&!Sg(a)&&(t=Wa(e,s),t===2&&(l=mi(e),l!==0&&(s=l,t=Ui(e,l))),t===1))throw n=Ls,Jn(e,0),jn(e,s),wt(e,Qe()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(te(345));case 2:Hn(e,jt,sn);break;case 3:if(jn(e,s),(s&130023424)===s&&(t=Wo+500-Qe(),10<t)){if(wa(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){yt(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=bi(Hn.bind(null,e,jt,sn),t);break}Hn(e,jt,sn);break;case 4:if(jn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var i=31-Ht(s);l=1<<i,i=t[i],i>a&&(a=i),s&=~l}if(s=a,s=Qe()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*bg(s/1960))-s,10<s){e.timeoutHandle=bi(Hn.bind(null,e,jt,sn),s);break}Hn(e,jt,sn);break;case 5:Hn(e,jt,sn);break;default:throw Error(te(329))}}}return wt(e,Qe()),e.callbackNode===n?_p.bind(null,e):null}function Ui(e,t){var n=gs;return e.current.memoizedState.isDehydrated&&(Jn(e,t).flags|=256),e=Wa(e,t),e!==2&&(t=jt,jt=n,t!==null&&Wi(t)),e}function Wi(e){jt===null?jt=e:jt.push.apply(jt,e)}function Sg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],l=a.getSnapshot;a=a.value;try{if(!Kt(l(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jn(e,t){for(t&=~Uo,t&=~sl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ht(t),s=1<<n;e[n]=-1,t&=~s}}function gu(e){if(Pe&6)throw Error(te(327));Pr();var t=wa(e,0);if(!(t&1))return wt(e,Qe()),null;var n=Wa(e,t);if(e.tag!==0&&n===2){var s=mi(e);s!==0&&(t=s,n=Ui(e,s))}if(n===1)throw n=Ls,Jn(e,0),jn(e,t),wt(e,Qe()),n;if(n===6)throw Error(te(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Hn(e,jt,sn),wt(e,Qe()),null}function Ho(e,t){var n=Pe;Pe|=1;try{return e(t)}finally{Pe=n,Pe===0&&(Dr=Qe()+500,el&&Bn())}}function er(e){wn!==null&&wn.tag===0&&!(Pe&6)&&Pr();var t=Pe;Pe|=1;var n=Rt.transition,s=Re;try{if(Rt.transition=null,Re=1,e)return e()}finally{Re=s,Rt.transition=n,Pe=t,!(Pe&6)&&Bn()}}function Vo(){Nt=wr.current,Be(wr)}function Jn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Zh(n)),Ze!==null)for(n=Ze.return;n!==null;){var s=n;switch(wo(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&$a();break;case 3:Rr(),Be(St),Be(ft),Mo();break;case 5:Ao(s);break;case 4:Rr();break;case 13:Be(We);break;case 19:Be(We);break;case 10:To(s.type._context);break;case 22:case 23:Vo()}n=n.return}if(st=e,Ze=e=Mn(e.current,null),it=Nt=t,tt=0,Ls=null,Uo=sl=Zn=0,jt=gs=null,Kn!==null){for(t=0;t<Kn.length;t++)if(n=Kn[t],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,l=n.pending;if(l!==null){var i=l.next;l.next=a,s.next=i}n.pending=s}Kn=null}return e}function jp(e,t){do{var n=Ze;try{if(Eo(),ha.current=Ia,Da){for(var s=He.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}Da=!1}if(Xn=0,rt=et=He=null,ms=!1,zs=0,Fo.current=null,n===null||n.return===null){tt=1,Ls=t,Ze=null;break}e:{var l=e,i=n.return,o=n,c=t;if(t=it,o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=o,m=u.tag;if(!(u.mode&1)&&(m===0||m===11||m===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=ru(i);if(x!==null){x.flags&=-257,su(x,i,o,l,t),x.mode&1&&nu(l,d,t),t=x,c=d;var v=t.updateQueue;if(v===null){var S=new Set;S.add(c),t.updateQueue=S}else v.add(c);break e}else{if(!(t&1)){nu(l,d,t),Ko();break e}c=Error(te(426))}}else if(Ue&&o.mode&1){var N=ru(i);if(N!==null){!(N.flags&65536)&&(N.flags|=256),su(N,i,o,l,t),No(Or(c,o));break e}}l=c=Or(c,o),tt!==4&&(tt=2),gs===null?gs=[l]:gs.push(l),l=i;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var g=sp(l,c,t);Gc(l,g);break e;case 1:o=c;var p=l.type,y=l.stateNode;if(!(l.flags&128)&&(typeof p.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(zn===null||!zn.has(y)))){l.flags|=65536,t&=-t,l.lanes|=t;var _=ap(l,o,t);Gc(l,_);break e}}l=l.return}while(l!==null)}kp(n)}catch(w){t=w,Ze===n&&n!==null&&(Ze=n=n.return);continue}break}while(!0)}function bp(){var e=Ba.current;return Ba.current=Ia,e===null?Ia:e}function Ko(){(tt===0||tt===3||tt===2)&&(tt=4),st===null||!(Zn&268435455)&&!(sl&268435455)||jn(st,it)}function Wa(e,t){var n=Pe;Pe|=2;var s=bp();(st!==e||it!==t)&&(sn=null,Jn(e,t));do try{kg();break}catch(a){jp(e,a)}while(!0);if(Eo(),Pe=n,Ba.current=s,Ze!==null)throw Error(te(261));return st=null,it=0,tt}function kg(){for(;Ze!==null;)Sp(Ze)}function wg(){for(;Ze!==null&&!Gm();)Sp(Ze)}function Sp(e){var t=Np(e.alternate,e,Nt);e.memoizedProps=e.pendingProps,t===null?kp(e):Ze=t,Fo.current=null}function kp(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=vg(n,t),n!==null){n.flags&=32767,Ze=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{tt=6,Ze=null;return}}else if(n=yg(n,t,Nt),n!==null){Ze=n;return}if(t=t.sibling,t!==null){Ze=t;return}Ze=t=e}while(t!==null);tt===0&&(tt=5)}function Hn(e,t,n){var s=Re,a=Rt.transition;try{Rt.transition=null,Re=1,Ng(e,t,n,s)}finally{Rt.transition=a,Re=s}return null}function Ng(e,t,n,s){do Pr();while(wn!==null);if(Pe&6)throw Error(te(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(te(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(lh(e,l),e===st&&(Ze=st=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||sa||(sa=!0,Cp(ka,function(){return Pr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Rt.transition,Rt.transition=null;var i=Re;Re=1;var o=Pe;Pe|=4,Fo.current=null,_g(e,n),vp(n,e),Kh(_i),Na=!!xi,_i=xi=null,e.current=n,jg(n),qm(),Pe=o,Re=i,Rt.transition=l}else e.current=n;if(sa&&(sa=!1,wn=e,Ua=a),l=e.pendingLanes,l===0&&(zn=null),eh(n.stateNode),wt(e,Qe()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(Fa)throw Fa=!1,e=Bi,Bi=null,e;return Ua&1&&e.tag!==0&&Pr(),l=e.pendingLanes,l&1?e===Fi?ys++:(ys=0,Fi=e):ys=0,Bn(),null}function Pr(){if(wn!==null){var e=rf(Ua),t=Rt.transition,n=Re;try{if(Rt.transition=null,Re=16>e?16:e,wn===null)var s=!1;else{if(e=wn,wn=null,Ua=0,Pe&6)throw Error(te(331));var a=Pe;for(Pe|=4,oe=e.current;oe!==null;){var l=oe,i=l.child;if(oe.flags&16){var o=l.deletions;if(o!==null){for(var c=0;c<o.length;c++){var d=o[c];for(oe=d;oe!==null;){var u=oe;switch(u.tag){case 0:case 11:case 15:hs(8,u,l)}var m=u.child;if(m!==null)m.return=u,oe=m;else for(;oe!==null;){u=oe;var h=u.sibling,x=u.return;if(hp(u),u===d){oe=null;break}if(h!==null){h.return=x,oe=h;break}oe=x}}}var v=l.alternate;if(v!==null){var S=v.child;if(S!==null){v.child=null;do{var N=S.sibling;S.sibling=null,S=N}while(S!==null)}}oe=l}}if(l.subtreeFlags&2064&&i!==null)i.return=l,oe=i;else e:for(;oe!==null;){if(l=oe,l.flags&2048)switch(l.tag){case 0:case 11:case 15:hs(9,l,l.return)}var g=l.sibling;if(g!==null){g.return=l.return,oe=g;break e}oe=l.return}}var p=e.current;for(oe=p;oe!==null;){i=oe;var y=i.child;if(i.subtreeFlags&2064&&y!==null)y.return=i,oe=y;else e:for(i=p;oe!==null;){if(o=oe,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:rl(9,o)}}catch(w){Ye(o,o.return,w)}if(o===i){oe=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,oe=_;break e}oe=o.return}}if(Pe=a,Bn(),Zt&&typeof Zt.onPostCommitFiberRoot=="function")try{Zt.onPostCommitFiberRoot(Qa,e)}catch{}s=!0}return s}finally{Re=n,Rt.transition=t}}return!1}function yu(e,t,n){t=Or(n,t),t=sp(e,t,1),e=Pn(e,t,1),t=yt(),e!==null&&(Is(e,1,t),wt(e,t))}function Ye(e,t,n){if(e.tag===3)yu(e,e,n);else for(;t!==null;){if(t.tag===3){yu(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(zn===null||!zn.has(s))){e=Or(n,e),e=ap(t,e,1),t=Pn(t,e,1),e=yt(),t!==null&&(Is(t,1,e),wt(t,e));break}}t=t.return}}function Cg(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=yt(),e.pingedLanes|=e.suspendedLanes&n,st===e&&(it&n)===n&&(tt===4||tt===3&&(it&130023424)===it&&500>Qe()-Wo?Jn(e,0):Uo|=n),wt(e,t)}function wp(e,t){t===0&&(e.mode&1?(t=Js,Js<<=1,!(Js&130023424)&&(Js=4194304)):t=1);var n=yt();e=fn(e,t),e!==null&&(Is(e,t,n),wt(e,n))}function Eg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),wp(e,n)}function Tg(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(te(314))}s!==null&&s.delete(t),wp(e,n)}var Np;Np=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||St.current)bt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return bt=!1,gg(e,t,n);bt=!!(e.flags&131072)}else bt=!1,Ue&&t.flags&1048576&&$f(t,Aa,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;ya(e,t),e=t.pendingProps;var a=Ar(t,ft.current);$r(t,n),a=Ro(null,t,s,e,a,n);var l=Oo();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,kt(s)?(l=!0,Pa(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Po(t),a.updater=nl,t.stateNode=a,a._reactInternals=t,Ti(t,s,e,n),t=zi(null,t,s,!0,l,n)):(t.tag=0,Ue&&l&&ko(t),gt(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(ya(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=Pg(s),e=Ft(s,e),a){case 0:t=Pi(null,t,s,e,n);break e;case 1:t=iu(null,t,s,e,n);break e;case 11:t=au(null,t,s,e,n);break e;case 14:t=lu(null,t,s,Ft(s.type,e),n);break e}throw Error(te(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Ft(s,a),Pi(e,t,s,a,n);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Ft(s,a),iu(e,t,s,a,n);case 3:e:{if(cp(t),e===null)throw Error(te(387));s=t.pendingProps,l=t.memoizedState,a=l.element,Rf(e,t),Ra(t,s,null,n);var i=t.memoizedState;if(s=i.element,l.isDehydrated)if(l={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=Or(Error(te(423)),t),t=ou(e,t,s,n,a);break e}else if(s!==a){a=Or(Error(te(424)),t),t=ou(e,t,s,n,a);break e}else for(Ct=$n(t.stateNode.containerInfo.firstChild),Et=t,Ue=!0,Wt=null,n=Mf(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mr(),s===a){t=pn(e,t,n);break e}gt(e,t,s,n)}t=t.child}return t;case 5:return Of(t),e===null&&Ni(t),s=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,i=a.children,ji(s,a)?i=null:l!==null&&ji(s,l)&&(t.flags|=32),op(e,t),gt(e,t,i,n),t.child;case 6:return e===null&&Ni(t),null;case 13:return up(e,t,n);case 4:return zo(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Lr(t,null,s,n):gt(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Ft(s,a),au(e,t,s,a,n);case 7:return gt(e,t,t.pendingProps,n),t.child;case 8:return gt(e,t,t.pendingProps.children,n),t.child;case 12:return gt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,l=t.memoizedProps,i=a.value,De(Ma,s._currentValue),s._currentValue=i,l!==null)if(Kt(l.value,i)){if(l.children===a.children&&!St.current){t=pn(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var o=l.dependencies;if(o!==null){i=l.child;for(var c=o.firstContext;c!==null;){if(c.context===s){if(l.tag===1){c=cn(-1,n&-n),c.tag=2;var d=l.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}l.lanes|=n,c=l.alternate,c!==null&&(c.lanes|=n),Ci(l.return,n,t),o.lanes|=n;break}c=c.next}}else if(l.tag===10)i=l.type===t.type?null:l.child;else if(l.tag===18){if(i=l.return,i===null)throw Error(te(341));i.lanes|=n,o=i.alternate,o!==null&&(o.lanes|=n),Ci(i,n,t),i=l.sibling}else i=l.child;if(i!==null)i.return=l;else for(i=l;i!==null;){if(i===t){i=null;break}if(l=i.sibling,l!==null){l.return=i.return,i=l;break}i=i.return}l=i}gt(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,$r(t,n),a=Ot(a),s=s(a),t.flags|=1,gt(e,t,s,n),t.child;case 14:return s=t.type,a=Ft(s,t.pendingProps),a=Ft(s.type,a),lu(e,t,s,a,n);case 15:return lp(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:Ft(s,a),ya(e,t),t.tag=1,kt(s)?(e=!0,Pa(t)):e=!1,$r(t,n),rp(t,s,a),Ti(t,s,a,n),zi(null,t,s,!0,e,n);case 19:return dp(e,t,n);case 22:return ip(e,t,n)}throw Error(te(156,t.tag))};function Cp(e,t){return Zd(e,t)}function $g(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lt(e,t,n,s){return new $g(e,t,n,s)}function Yo(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Pg(e){if(typeof e=="function")return Yo(e)?1:0;if(e!=null){if(e=e.$$typeof,e===fo)return 11;if(e===po)return 14}return 2}function Mn(e,t){var n=e.alternate;return n===null?(n=Lt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function _a(e,t,n,s,a,l){var i=2;if(s=e,typeof e=="function")Yo(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case hr:return Qn(n.children,a,l,t);case uo:i=8,a|=8;break;case Zl:return e=Lt(12,n,t,a|2),e.elementType=Zl,e.lanes=l,e;case ei:return e=Lt(13,n,t,a),e.elementType=ei,e.lanes=l,e;case ti:return e=Lt(19,n,t,a),e.elementType=ti,e.lanes=l,e;case Rd:return al(n,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Md:i=10;break e;case Ld:i=9;break e;case fo:i=11;break e;case po:i=14;break e;case vn:i=16,s=null;break e}throw Error(te(130,e==null?e:typeof e,""))}return t=Lt(i,n,t,a),t.elementType=e,t.type=s,t.lanes=l,t}function Qn(e,t,n,s){return e=Lt(7,e,s,t),e.lanes=n,e}function al(e,t,n,s){return e=Lt(22,e,s,t),e.elementType=Rd,e.lanes=n,e.stateNode={isHidden:!1},e}function Ol(e,t,n){return e=Lt(6,e,null,t),e.lanes=n,e}function Dl(e,t,n){return t=Lt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function zg(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=vl(0),this.expirationTimes=vl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vl(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Jo(e,t,n,s,a,l,i,o,c){return e=new zg(e,t,n,o,c),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Lt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Po(l),e}function Ag(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:mr,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function Ep(e){if(!e)return On;e=e._reactInternals;e:{if(rr(e)!==e||e.tag!==1)throw Error(te(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(kt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(te(171))}if(e.tag===1){var n=e.type;if(kt(n))return Ef(e,n,t)}return t}function Tp(e,t,n,s,a,l,i,o,c){return e=Jo(n,s,!0,e,a,l,i,o,c),e.context=Ep(null),n=e.current,s=yt(),a=An(n),l=cn(s,a),l.callback=t??null,Pn(n,l,a),e.current.lanes=a,Is(e,a,s),wt(e,s),e}function ll(e,t,n,s){var a=t.current,l=yt(),i=An(a);return n=Ep(n),t.context===null?t.context=n:t.pendingContext=n,t=cn(l,i),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Pn(a,t,i),e!==null&&(Vt(e,a,i,l),ma(e,a,i)),i}function Ha(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function vu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Qo(e,t){vu(e,t),(e=e.alternate)&&vu(e,t)}function Mg(){return null}var $p=typeof reportError=="function"?reportError:function(e){console.error(e)};function Go(e){this._internalRoot=e}il.prototype.render=Go.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(te(409));ll(e,t,null,null)};il.prototype.unmount=Go.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;er(function(){ll(null,e,null,null)}),t[dn]=null}};function il(e){this._internalRoot=e}il.prototype.unstable_scheduleHydration=function(e){if(e){var t=lf();e={blockedOn:null,target:e,priority:t};for(var n=0;n<_n.length&&t!==0&&t<_n[n].priority;n++);_n.splice(n,0,e),n===0&&cf(e)}};function qo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ol(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function xu(){}function Lg(e,t,n,s,a){if(a){if(typeof s=="function"){var l=s;s=function(){var d=Ha(i);l.call(d)}}var i=Tp(t,s,e,0,null,!1,!1,"",xu);return e._reactRootContainer=i,e[dn]=i.current,Cs(e.nodeType===8?e.parentNode:e),er(),i}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var o=s;s=function(){var d=Ha(c);o.call(d)}}var c=Jo(e,0,!1,null,null,!1,!1,"",xu);return e._reactRootContainer=c,e[dn]=c.current,Cs(e.nodeType===8?e.parentNode:e),er(function(){ll(t,c,n,s)}),c}function cl(e,t,n,s,a){var l=n._reactRootContainer;if(l){var i=l;if(typeof a=="function"){var o=a;a=function(){var c=Ha(i);o.call(c)}}ll(t,i,e,a)}else i=Lg(n,t,e,a,s);return Ha(i)}sf=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ls(t.pendingLanes);n!==0&&(go(t,n|1),wt(t,Qe()),!(Pe&6)&&(Dr=Qe()+500,Bn()))}break;case 13:er(function(){var s=fn(e,1);if(s!==null){var a=yt();Vt(s,e,1,a)}}),Qo(e,1)}};yo=function(e){if(e.tag===13){var t=fn(e,134217728);if(t!==null){var n=yt();Vt(t,e,134217728,n)}Qo(e,134217728)}};af=function(e){if(e.tag===13){var t=An(e),n=fn(e,t);if(n!==null){var s=yt();Vt(n,e,t,s)}Qo(e,t)}};lf=function(){return Re};of=function(e,t){var n=Re;try{return Re=e,t()}finally{Re=n}};di=function(e,t,n){switch(t){case"input":if(si(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=Za(s);if(!a)throw Error(te(90));Dd(s),si(s,a)}}}break;case"textarea":Bd(e,n);break;case"select":t=n.value,t!=null&&Nr(e,!!n.multiple,t,!1)}};Yd=Ho;Jd=er;var Rg={usingClientEntryPoint:!1,Events:[Fs,xr,Za,Vd,Kd,Ho]},Xr={findFiberByHostInstance:Vn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Og={bundleType:Xr.bundleType,version:Xr.version,rendererPackageName:Xr.rendererPackageName,rendererConfig:Xr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=qd(e),e===null?null:e.stateNode},findFiberByHostInstance:Xr.findFiberByHostInstance||Mg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var aa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!aa.isDisabled&&aa.supportsFiber)try{Qa=aa.inject(Og),Zt=aa}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rg;$t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qo(t))throw Error(te(200));return Ag(e,t,null,n)};$t.createRoot=function(e,t){if(!qo(e))throw Error(te(299));var n=!1,s="",a=$p;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Jo(e,1,!1,null,null,n,!1,s,a),e[dn]=t.current,Cs(e.nodeType===8?e.parentNode:e),new Go(t)};$t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=qd(t),e=e===null?null:e.stateNode,e};$t.flushSync=function(e){return er(e)};$t.hydrate=function(e,t,n){if(!ol(t))throw Error(te(200));return cl(null,e,t,!0,n)};$t.hydrateRoot=function(e,t,n){if(!qo(e))throw Error(te(405));var s=n!=null&&n.hydratedSources||null,a=!1,l="",i=$p;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=Tp(t,null,e,1,n??null,a,!1,l,i),e[dn]=t.current,Cs(e),s)for(e=0;e<s.length;e++)n=s[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new il(t)};$t.render=function(e,t,n){if(!ol(t))throw Error(te(200));return cl(null,e,t,!1,n)};$t.unmountComponentAtNode=function(e){if(!ol(e))throw Error(te(40));return e._reactRootContainer?(er(function(){cl(null,null,e,!1,function(){e._reactRootContainer=null,e[dn]=null})}),!0):!1};$t.unstable_batchedUpdates=Ho;$t.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!ol(n))throw Error(te(200));if(e==null||e._reactInternals===void 0)throw Error(te(38));return cl(e,t,n,!1,s)};$t.version="18.3.1-next-f1338f8080-20240426";function Pp(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pp)}catch(e){console.error(e)}}Pp(),$d.exports=$t;var Dg=$d.exports,_u=Dg;ql.createRoot=_u.createRoot,ql.hydrateRoot=_u.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rs(){return Rs=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Rs.apply(this,arguments)}var Nn;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Nn||(Nn={}));const ju="popstate";function Ig(e){e===void 0&&(e={});function t(a,l){let{pathname:i="/",search:o="",hash:c=""}=sr(a.location.hash.substr(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),Hi("",{pathname:i,search:o,hash:c},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(a,l){let i=a.document.querySelector("base"),o="";if(i&&i.getAttribute("href")){let c=a.location.href,d=c.indexOf("#");o=d===-1?c:c.slice(0,d)}return o+"#"+(typeof l=="string"?l:Va(l))}function s(a,l){ul(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return Fg(t,n,s,e)}function Ge(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ul(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Bg(){return Math.random().toString(36).substr(2,8)}function bu(e,t){return{usr:e.state,key:e.key,idx:t}}function Hi(e,t,n,s){return n===void 0&&(n=null),Rs({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?sr(t):t,{state:n,key:t&&t.key||s||Bg()})}function Va(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function sr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function Fg(e,t,n,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:l=!1}=s,i=a.history,o=Nn.Pop,c=null,d=u();d==null&&(d=0,i.replaceState(Rs({},i.state,{idx:d}),""));function u(){return(i.state||{idx:null}).idx}function m(){o=Nn.Pop;let N=u(),g=N==null?null:N-d;d=N,c&&c({action:o,location:S.location,delta:g})}function h(N,g){o=Nn.Push;let p=Hi(S.location,N,g);n&&n(p,N),d=u()+1;let y=bu(p,d),_=S.createHref(p);try{i.pushState(y,"",_)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;a.location.assign(_)}l&&c&&c({action:o,location:S.location,delta:1})}function x(N,g){o=Nn.Replace;let p=Hi(S.location,N,g);n&&n(p,N),d=u();let y=bu(p,d),_=S.createHref(p);i.replaceState(y,"",_),l&&c&&c({action:o,location:S.location,delta:0})}function v(N){let g=a.location.origin!=="null"?a.location.origin:a.location.href,p=typeof N=="string"?N:Va(N);return p=p.replace(/ $/,"%20"),Ge(g,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,g)}let S={get action(){return o},get location(){return e(a,i)},listen(N){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(ju,m),c=N,()=>{a.removeEventListener(ju,m),c=null}},createHref(N){return t(a,N)},createURL:v,encodeLocation(N){let g=v(N);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:x,go(N){return i.go(N)}};return S}var Su;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Su||(Su={}));function Ug(e,t,n){return n===void 0&&(n="/"),Wg(e,t,n)}function Wg(e,t,n,s){let a=typeof t=="string"?sr(t):t,l=Xo(a.pathname||"/",n);if(l==null)return null;let i=zp(e);Hg(i);let o=null;for(let c=0;o==null&&c<i.length;++c){let d=ny(l);o=Zg(i[c],d)}return o}function zp(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let a=(l,i,o)=>{let c={relativePath:o===void 0?l.path||"":o,caseSensitive:l.caseSensitive===!0,childrenIndex:i,route:l};c.relativePath.startsWith("/")&&(Ge(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=Ln([s,c.relativePath]),u=n.concat(c);l.children&&l.children.length>0&&(Ge(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),zp(l.children,t,u,d)),!(l.path==null&&!l.index)&&t.push({path:d,score:qg(d,l.index),routesMeta:u})};return e.forEach((l,i)=>{var o;if(l.path===""||!((o=l.path)!=null&&o.includes("?")))a(l,i);else for(let c of Ap(l.path))a(l,i,c)}),t}function Ap(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(s.length===0)return a?[l,""]:[l];let i=Ap(s.join("/")),o=[];return o.push(...i.map(c=>c===""?l:[l,c].join("/"))),a&&o.push(...i),o.map(c=>e.startsWith("/")&&c===""?"/":c)}function Hg(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Xg(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const Vg=/^:[\w-]+$/,Kg=3,Yg=2,Jg=1,Qg=10,Gg=-2,ku=e=>e==="*";function qg(e,t){let n=e.split("/"),s=n.length;return n.some(ku)&&(s+=Gg),t&&(s+=Yg),n.filter(a=>!ku(a)).reduce((a,l)=>a+(Vg.test(l)?Kg:l===""?Jg:Qg),s)}function Xg(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function Zg(e,t,n){let{routesMeta:s}=e,a={},l="/",i=[];for(let o=0;o<s.length;++o){let c=s[o],d=o===s.length-1,u=l==="/"?t:t.slice(l.length)||"/",m=ey({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),h=c.route;if(!m)return null;Object.assign(a,m.params),i.push({params:a,pathname:Ln([l,m.pathname]),pathnameBase:iy(Ln([l,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(l=Ln([l,m.pathnameBase]))}return i}function ey(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=ty(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],i=l.replace(/(.)\/+$/,"$1"),o=a.slice(1);return{params:s.reduce((d,u,m)=>{let{paramName:h,isOptional:x}=u;if(h==="*"){let S=o[m]||"";i=l.slice(0,l.length-S.length).replace(/(.)\/+$/,"$1")}const v=o[m];return x&&!v?d[h]=void 0:d[h]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:l,pathnameBase:i,pattern:e}}function ty(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),ul(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,c)=>(s.push({paramName:o,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function ny(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ul(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Xo(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}const ry=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sy=e=>ry.test(e);function ay(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:a=""}=typeof e=="string"?sr(e):e,l;if(n)if(sy(n))l=n;else{if(n.includes("//")){let i=n;n=n.replace(/\/\/+/g,"/"),ul(!1,"Pathnames cannot have embedded double slashes - normalizing "+(i+" -> "+n))}n.startsWith("/")?l=wu(n.substring(1),"/"):l=wu(n,t)}else l=t;return{pathname:l,search:oy(s),hash:cy(a)}}function wu(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Il(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function ly(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Zo(e,t){let n=ly(e);return t?n.map((s,a)=>a===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function ec(e,t,n,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=sr(e):(a=Rs({},e),Ge(!a.pathname||!a.pathname.includes("?"),Il("?","pathname","search",a)),Ge(!a.pathname||!a.pathname.includes("#"),Il("#","pathname","hash",a)),Ge(!a.search||!a.search.includes("#"),Il("#","search","hash",a)));let l=e===""||a.pathname==="",i=l?"/":a.pathname,o;if(i==null)o=n;else{let m=t.length-1;if(!s&&i.startsWith("..")){let h=i.split("/");for(;h[0]==="..";)h.shift(),m-=1;a.pathname=h.join("/")}o=m>=0?t[m]:"/"}let c=ay(a,o),d=i&&i!=="/"&&i.endsWith("/"),u=(l||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}const Ln=e=>e.join("/").replace(/\/\/+/g,"/"),iy=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oy=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,cy=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function uy(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const Mp=["post","put","patch","delete"];new Set(Mp);const dy=["get",...Mp];new Set(dy);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Os(){return Os=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Os.apply(this,arguments)}const tc=f.createContext(null),fy=f.createContext(null),Fn=f.createContext(null),dl=f.createContext(null),hn=f.createContext({outlet:null,matches:[],isDataRoute:!1}),Lp=f.createContext(null);function py(e,t){let{relative:n}=t===void 0?{}:t;Wr()||Ge(!1);let{basename:s,navigator:a}=f.useContext(Fn),{hash:l,pathname:i,search:o}=Op(e,{relative:n}),c=i;return s!=="/"&&(c=i==="/"?s:Ln([s,i])),a.createHref({pathname:c,search:o,hash:l})}function Wr(){return f.useContext(dl)!=null}function tn(){return Wr()||Ge(!1),f.useContext(dl).location}function Rp(e){f.useContext(Fn).static||f.useLayoutEffect(e)}function _t(){let{isDataRoute:e}=f.useContext(hn);return e?Ny():my()}function my(){Wr()||Ge(!1);let e=f.useContext(tc),{basename:t,future:n,navigator:s}=f.useContext(Fn),{matches:a}=f.useContext(hn),{pathname:l}=tn(),i=JSON.stringify(Zo(a,n.v7_relativeSplatPath)),o=f.useRef(!1);return Rp(()=>{o.current=!0}),f.useCallback(function(d,u){if(u===void 0&&(u={}),!o.current)return;if(typeof d=="number"){s.go(d);return}let m=ec(d,JSON.parse(i),l,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Ln([t,m.pathname])),(u.replace?s.replace:s.push)(m,u.state,u)},[t,s,i,l,e])}function ar(){let{matches:e}=f.useContext(hn),t=e[e.length-1];return t?t.params:{}}function Op(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=f.useContext(Fn),{matches:a}=f.useContext(hn),{pathname:l}=tn(),i=JSON.stringify(Zo(a,s.v7_relativeSplatPath));return f.useMemo(()=>ec(e,JSON.parse(i),l,n==="path"),[e,i,l,n])}function hy(e,t){return gy(e,t)}function gy(e,t,n,s){Wr()||Ge(!1);let{navigator:a}=f.useContext(Fn),{matches:l}=f.useContext(hn),i=l[l.length-1],o=i?i.params:{};i&&i.pathname;let c=i?i.pathnameBase:"/";i&&i.route;let d=tn(),u;if(t){var m;let N=typeof t=="string"?sr(t):t;c==="/"||(m=N.pathname)!=null&&m.startsWith(c)||Ge(!1),u=N}else u=d;let h=u.pathname||"/",x=h;if(c!=="/"){let N=c.replace(/^\//,"").split("/");x="/"+h.replace(/^\//,"").split("/").slice(N.length).join("/")}let v=Ug(e,{pathname:x}),S=jy(v&&v.map(N=>Object.assign({},N,{params:Object.assign({},o,N.params),pathname:Ln([c,a.encodeLocation?a.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?c:Ln([c,a.encodeLocation?a.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),l,n,s);return t&&S?f.createElement(dl.Provider,{value:{location:Os({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:Nn.Pop}},S):S}function yy(){let e=wy(),t=uy(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return f.createElement(f.Fragment,null,f.createElement("h2",null,"Unexpected Application Error!"),f.createElement("h3",{style:{fontStyle:"italic"}},t),n?f.createElement("pre",{style:a},n):null,null)}const vy=f.createElement(yy,null);class xy extends f.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?f.createElement(hn.Provider,{value:this.props.routeContext},f.createElement(Lp.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function _y(e){let{routeContext:t,match:n,children:s}=e,a=f.useContext(tc);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),f.createElement(hn.Provider,{value:t},s)}function jy(e,t,n,s){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var l;if(!n)return null;if(n.errors)e=n.matches;else if((l=s)!=null&&l.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let i=e,o=(a=n)==null?void 0:a.errors;if(o!=null){let u=i.findIndex(m=>m.route.id&&(o==null?void 0:o[m.route.id])!==void 0);u>=0||Ge(!1),i=i.slice(0,Math.min(i.length,u+1))}let c=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let u=0;u<i.length;u++){let m=i[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(d=u),m.route.id){let{loaderData:h,errors:x}=n,v=m.route.loader&&h[m.route.id]===void 0&&(!x||x[m.route.id]===void 0);if(m.route.lazy||v){c=!0,d>=0?i=i.slice(0,d+1):i=[i[0]];break}}}return i.reduceRight((u,m,h)=>{let x,v=!1,S=null,N=null;n&&(x=o&&m.route.id?o[m.route.id]:void 0,S=m.route.errorElement||vy,c&&(d<0&&h===0?(Cy("route-fallback"),v=!0,N=null):d===h&&(v=!0,N=m.route.hydrateFallbackElement||null)));let g=t.concat(i.slice(0,h+1)),p=()=>{let y;return x?y=S:v?y=N:m.route.Component?y=f.createElement(m.route.Component,null):m.route.element?y=m.route.element:y=u,f.createElement(_y,{match:m,routeContext:{outlet:u,matches:g,isDataRoute:n!=null},children:y})};return n&&(m.route.ErrorBoundary||m.route.errorElement||h===0)?f.createElement(xy,{location:n.location,revalidation:n.revalidation,component:S,error:x,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var Dp=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(Dp||{}),Ip=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(Ip||{});function by(e){let t=f.useContext(tc);return t||Ge(!1),t}function Sy(e){let t=f.useContext(fy);return t||Ge(!1),t}function ky(e){let t=f.useContext(hn);return t||Ge(!1),t}function Bp(e){let t=ky(),n=t.matches[t.matches.length-1];return n.route.id||Ge(!1),n.route.id}function wy(){var e;let t=f.useContext(Lp),n=Sy(),s=Bp();return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function Ny(){let{router:e}=by(Dp.UseNavigateStable),t=Bp(Ip.UseNavigateStable),n=f.useRef(!1);return Rp(()=>{n.current=!0}),f.useCallback(function(a,l){l===void 0&&(l={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,Os({fromRouteId:t},l)))},[e,t])}const Nu={};function Cy(e,t,n){Nu[e]||(Nu[e]=!0)}function Ey(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function Cu(e){let{to:t,replace:n,state:s,relative:a}=e;Wr()||Ge(!1);let{future:l,static:i}=f.useContext(Fn),{matches:o}=f.useContext(hn),{pathname:c}=tn(),d=_t(),u=ec(t,Zo(o,l.v7_relativeSplatPath),c,a==="path"),m=JSON.stringify(u);return f.useEffect(()=>d(JSON.parse(m),{replace:n,state:s,relative:a}),[d,m,a,n,s]),null}function Le(e){Ge(!1)}function Ty(e){let{basename:t="/",children:n=null,location:s,navigationType:a=Nn.Pop,navigator:l,static:i=!1,future:o}=e;Wr()&&Ge(!1);let c=t.replace(/^\/*/,"/"),d=f.useMemo(()=>({basename:c,navigator:l,static:i,future:Os({v7_relativeSplatPath:!1},o)}),[c,o,l,i]);typeof s=="string"&&(s=sr(s));let{pathname:u="/",search:m="",hash:h="",state:x=null,key:v="default"}=s,S=f.useMemo(()=>{let N=Xo(u,c);return N==null?null:{location:{pathname:N,search:m,hash:h,state:x,key:v},navigationType:a}},[c,u,m,h,x,v,a]);return S==null?null:f.createElement(Fn.Provider,{value:d},f.createElement(dl.Provider,{children:n,value:S}))}function $y(e){let{children:t,location:n}=e;return hy(Vi(t),n)}new Promise(()=>{});function Vi(e,t){t===void 0&&(t=[]);let n=[];return f.Children.forEach(e,(s,a)=>{if(!f.isValidElement(s))return;let l=[...t,a];if(s.type===f.Fragment){n.push.apply(n,Vi(s.props.children,l));return}s.type!==Le&&Ge(!1),!s.props.index||!s.props.children||Ge(!1);let i={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(i.children=Vi(s.props.children,l)),n.push(i)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ki(){return Ki=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ki.apply(this,arguments)}function Py(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,l;for(l=0;l<s.length;l++)a=s[l],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function zy(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Ay(e,t){return e.button===0&&(!t||t==="_self")&&!zy(e)}function Yi(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(a=>[n,a]):[[n,s]])},[]))}function My(e,t){let n=Yi(e);return t&&t.forEach((s,a)=>{n.has(a)||t.getAll(a).forEach(l=>{n.append(a,l)})}),n}const Ly=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ry="6";try{window.__reactRouterVersion=Ry}catch{}const Oy="startTransition",Eu=Cm[Oy];function Dy(e){let{basename:t,children:n,future:s,window:a}=e,l=f.useRef();l.current==null&&(l.current=Ig({window:a,v5Compat:!0}));let i=l.current,[o,c]=f.useState({action:i.action,location:i.location}),{v7_startTransition:d}=s||{},u=f.useCallback(m=>{d&&Eu?Eu(()=>c(m)):c(m)},[c,d]);return f.useLayoutEffect(()=>i.listen(u),[i,u]),f.useEffect(()=>Ey(s),[s]),f.createElement(Ty,{basename:t,children:n,location:o.location,navigationType:o.action,navigator:i,future:s})}const Iy=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",By=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ke=f.forwardRef(function(t,n){let{onClick:s,relative:a,reloadDocument:l,replace:i,state:o,target:c,to:d,preventScrollReset:u,viewTransition:m}=t,h=Py(t,Ly),{basename:x}=f.useContext(Fn),v,S=!1;if(typeof d=="string"&&By.test(d)&&(v=d,Iy))try{let y=new URL(window.location.href),_=d.startsWith("//")?new URL(y.protocol+d):new URL(d),w=Xo(_.pathname,x);_.origin===y.origin&&w!=null?d=w+_.search+_.hash:S=!0}catch{}let N=py(d,{relative:a}),g=Fy(d,{replace:i,state:o,target:c,preventScrollReset:u,relative:a,viewTransition:m});function p(y){s&&s(y),y.defaultPrevented||g(y)}return f.createElement("a",Ki({},h,{href:v||N,onClick:S||l?s:p,ref:n,target:c}))});var Tu;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Tu||(Tu={}));var $u;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})($u||($u={}));function Fy(e,t){let{target:n,replace:s,state:a,preventScrollReset:l,relative:i,viewTransition:o}=t===void 0?{}:t,c=_t(),d=tn(),u=Op(e,{relative:i});return f.useCallback(m=>{if(Ay(m,n)){m.preventDefault();let h=s!==void 0?s:Va(d)===Va(u);c(e,{replace:h,state:a,preventScrollReset:l,relative:i,viewTransition:o})}},[d,c,u,s,a,n,e,l,i,o])}function Fp(e){let t=f.useRef(Yi(e)),n=f.useRef(!1),s=tn(),a=f.useMemo(()=>My(s.search,n.current?null:t.current),[s.search]),l=_t(),i=f.useCallback((o,c)=>{const d=Yi(typeof o=="function"?o(a):o);n.current=!0,l("?"+d,c)},[l,a]);return[a,i]}const Uy="modulepreload",Wy=function(e){return"/misogi/"+e},Pu={},os=function(t,n,s){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),o=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=Wy(c),c in Pu)return;Pu[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const m=document.createElement("link");if(m.rel=d?"stylesheet":Uy,d||(m.as="script"),m.crossOrigin="",m.href=c,o&&m.setAttribute("nonce",o),document.head.appendChild(m),d)return new Promise((h,x)=>{m.addEventListener("load",h),m.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function l(i){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i}return a.then(i=>{for(const o of i||[])o.status==="rejected"&&l(o.reason);return t().catch(l)})},Up=5200,Hy="log-transition",Vy="transitioning-out",Wp="MODE CHANGE",Ky=2200,Yy=4e3;function Jy({visible:e}){const[t,n]=f.useState(!1),[s,a]=f.useState(!1),[l,i]=f.useState(!1);return f.useEffect(()=>{if(!e){n(!1),a(!1),i(!1);return}const o=setTimeout(()=>n(!0),1e3),c=setTimeout(()=>a(!0),Ky),d=setTimeout(()=>i(!0),Yy);return()=>{clearTimeout(o),clearTimeout(c),clearTimeout(d)}},[e]),e?r.jsxs("div",{className:"report-transition-overlay","aria-hidden":"true",children:[r.jsx("div",{className:`report-transition-label ${t?"visible":""}`,children:r.jsx("span",{className:"label-jitter",children:Wp})}),s&&r.jsx("div",{className:"report-transition-glitch report-transition-glitch-active"}),l&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"report-transition-white-flash"}),r.jsx("div",{className:"report-transition-dark-instant"})]})]}):null}function Qy(e){const[t,n]=f.useState(!1),[s,a]=f.useState(null);f.useEffect(()=>{if(!s)return;const i=setTimeout(()=>{s.endsWith(".html")?window.location.href=s:e(s),a(null),n(!1)},Up);return()=>clearTimeout(i)},[s,e]);const l=f.useCallback(i=>{a(i),n(!0)},[]);return{isTransitioning:t,startTransition:l}}function nn(){return{startTransition:f.useCallback(t=>{window.dispatchEvent(new CustomEvent("misogi-flash-transition",{detail:{path:t}}))},[])}}function Gy(){const e=_t(),[t,n]=f.useState("idle"),[s,a]=f.useState(null);return f.useEffect(()=>{const l=i=>{const{path:o}=i.detail;a(o),n("noise"),setTimeout(()=>n("snap"),600),setTimeout(()=>n("dark"),1e3),setTimeout(()=>{o.endsWith(".html")?window.location.href=o:e(o),setTimeout(()=>n("fading"),300)},1200),setTimeout(()=>{n("idle"),a(null)},2e3)};return window.addEventListener("misogi-flash-transition",l),()=>window.removeEventListener("misogi-flash-transition",l)},[e]),t==="idle"?null:r.jsxs("div",{className:"report-transition-overlay",style:{zIndex:1e7,background:t==="dark"||t==="snap"||t==="fading"?"#000":"transparent",pointerEvents:"all"},children:[(t==="noise"||t==="snap")&&r.jsx("div",{className:"report-transition-glitch report-transition-glitch-active",style:{zIndex:10000001}}),t==="snap"&&r.jsx("div",{className:"report-transition-crt-snap",style:{zIndex:10000002}}),t==="fading"&&r.jsx("div",{className:"report-transition-dark-fade-out",style:{animationDuration:"0.6s",zIndex:10000003}})]})}const zu="READY TO ASSIST",qy="LISTENING...",Au="PROCESSING...";function at({mode:e="base",onLogTransitionEnd:t,active:n=!1,interactive:s=!1,onActiveChange:a,className:l=""}){const i=f.useId().replace(/:/g,"-"),[o,c]=f.useState(!1),[d,u]=f.useState(zu),m=f.useRef(null),[h,x]=f.useState({x:0,y:0}),[v,S]=f.useState(0),[N,g]=f.useState(0),p=a!==void 0,y=p?n:o;f.useEffect(()=>{if(e!=="plan")return;const F=setInterval(()=>{S(z=>z+6)},1e3);return()=>clearInterval(F)},[e]),f.useEffect(()=>{if(e!=="log"){g(0);return}g(0);const F=setTimeout(()=>g(1),2e3),z=setTimeout(()=>g(2),3200),k=setTimeout(()=>g(3),4200),Y=setTimeout(()=>t==null?void 0:t(),Up);return()=>{clearTimeout(F),clearTimeout(z),clearTimeout(k),clearTimeout(Y)}},[e,t]);const _=f.useCallback(()=>{if(!s)return;const F=!y;p||c(F),a==null||a(F),F?u(qy):(u(Au),setTimeout(()=>u(z=>z===Au?zu:z),1500))},[y,s,p,a]),w=f.useCallback(F=>{if(!s||y){x({x:0,y:0});return}const z=window.innerWidth,k=window.innerHeight;x({x:(z/2-F.pageX)/50,y:(k/2-F.pageY)/50})},[s,y]),P=f.useCallback(()=>x({x:0,y:0}),[]),D={...s&&(h.x!==0||h.y!==0)?{transform:`translate(${h.x}px, ${h.y}px)`}:{},...e==="plan"?{"--plan-angle":`${v}deg`}:{}},H=e!=="status",I=r.jsxs("div",{ref:m,className:`visualizer-container${y?" active":""} viz-mode-${e}${e==="log"?" log-freeze":""} ${l}`.trim(),"data-mode":e,role:"img","aria-label":"M.I.S.O.G.I ",onClick:s?_:void 0,onMouseMove:s?w:void 0,onMouseLeave:s?P:void 0,style:Object.keys(D).length?D:void 0,children:[r.jsx("div",{className:"circle-text-container viz-ring",children:r.jsxs("svg",{viewBox:"0 0 200 200",className:"circle-svg",width:200,height:200,children:[r.jsx("path",{id:i,d:"M 100, 100 m -70, 0 a 70,70 0 1,1 140,0 a 70,70 0 1,1 -140,0"}),r.jsx("text",{children:r.jsx("textPath",{href:`#${i}`,children:"Misesapo Intelligent System for Operational Guidance & interface  M.I.S.O.G.I "})})]})}),r.jsx("div",{className:"core-circle"}),(H||e==="status")&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"wave"}),r.jsx("div",{className:"wave"}),r.jsx("div",{className:"wave"})]})]});return r.jsxs("div",{className:`visualizer-viz-wrap${e==="log"&&N>=2?" log-glitch":""}`,children:[I,e==="log"&&r.jsxs("div",{className:"report-cinematic","aria-hidden":"true",children:[r.jsx("div",{className:`report-cinematic-label ${N>=1?"visible":""}`,children:r.jsx("span",{className:"label-jitter",children:Wp})}),N>=2&&r.jsx("div",{className:"glitch-overlay glitch-active"}),N>=3&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"white-flash"}),r.jsx("div",{className:"dark-instant"}),r.jsx("div",{className:"crt-off"})]})]}),s&&r.jsxs("div",{className:"visualizer-status",children:[r.jsx("p",{className:"status-text",children:d}),r.jsx("p",{className:"hint",children:"Click the visualizer to toggle active mode"})]})]})}const Hp={cleaning:{label:"",color:"#10b981",colorVar:"--job-cleaning",glowVar:"--job-cleaning-glow",icon:"fa-broom"},office:{label:"",color:"#3b82f6",colorVar:"--job-office",glowVar:"--job-office-glow",icon:"fa-briefcase"},sales:{label:"",color:"#8b5cf6",colorVar:"--job-sales",glowVar:"--job-sales-glow",icon:"fa-handshake"},hr:{label:"",color:"#ec4899",colorVar:"--job-hr",glowVar:"--job-hr-glow",icon:"fa-users"},accounting:{label:"",color:"#eab308",colorVar:"--job-accounting",glowVar:"--job-accounting-glow",icon:"fa-calculator"},admin:{label:"",color:"#ffffff",colorVar:"--job-admin",glowVar:"--job-admin-glow",icon:"fa-cog"},dev:{label:"",color:"#ef4444",colorVar:"--job-dev",glowVar:"--job-dev-glow",icon:"fa-code"}},Xy="cognito_id_token",Zy="cognito_user";function Ji(){return typeof window>"u"||!window.localStorage?null:window.localStorage.getItem(Xy)}function ev(){if(typeof window>"u"||!window.localStorage)return null;try{const e=window.localStorage.getItem(Zy);return e?JSON.parse(e):null}catch{return null}}function pt(){const e=Ji();return e?{Authorization:`Bearer ${e}`}:{}}function tv(e){if(!e||typeof e!="string")return null;try{const t=e.split(".");if(t.length!==3)return null;const s=JSON.parse(atob(t[1].replace(/-/g,"+").replace(/_/g,"/"))).exp;return typeof s=="number"?s:null}catch{return null}}function Mu(e){const t=tv(e);return t==null?!1:Date.now()/1e3<t-60}function Vp(){const[e,t]=f.useState(null),[n,s]=f.useState(!1),[a,l]=f.useState(!0),i=f.useCallback(()=>{const u=Ji();if(!(!!u&&Mu(u))){t(null),s(!1);return}const h=ev();t(h||{id:"unknown",role:"staff"}),s(!0)},[]);f.useEffect(()=>{i(),l(!1)},[i]);const o=f.useCallback(()=>{const u=Ji();return!u||!Mu(u)?null:u},[]),c=f.useCallback(u=>{const m=typeof window<"u"?window.location.origin:"",h="/staff/signin.html",x=typeof window<"u"?window.location.href:"",v=u??x,S=new URL(h,m);S.searchParams.set("redirect",v),typeof window<"u"&&(window.location.href=S.toString())},[]),d=f.useCallback(()=>{if(typeof window>"u"||!window.localStorage)return;window.localStorage.removeItem("cognito_id_token"),window.localStorage.removeItem("cognito_access_token"),window.localStorage.removeItem("cognito_refresh_token"),window.localStorage.removeItem("cognito_user"),window.localStorage.removeItem("misesapo_auth"),t(null),s(!1);const u=window.location.origin,m="/staff/signin.html",h=new URL(m,u);window.location.href=h.toString()},[]);return{user:e,isAuthenticated:n,isLoading:a,getToken:o,login:c,logout:d,refresh:i}}const nv=Xt.lazy(()=>os(()=>import("./SignInModal-Bf12Lozq.js"),[])),Bl=["sales","cleaning","office","dev","admin"],Lu={admin:"/admin/entrance",sales:"/jobs/sales/entrance",office:"/jobs/office/entrance",staff:"/jobs/cleaning/entrance",cleaning:"/jobs/cleaning/entrance",developer:"/jobs/dev/entrance",dev:"/jobs/dev/entrance",operation:"/admin/entrance",human_resources:"/admin/entrance"};function rv(){const e=_t(),{user:t,isAuthenticated:n,isLoading:s,refresh:a,logout:l}=Vp(),[i,o]=f.useState(!1),[c,d]=f.useState(!1),u=t??{name:"",role:""};function m(){o(!0);const h=u.role&&String(u.role).trim()||"",x=Lu[h];if(x){e(x);return}if(h.startsWith("single:")){const v=h.replace("single:",""),S=v==="admin"?"/admin/entrance":Bl.includes(v)?`/jobs/${v}/entrance`:null;if(S){e(S);return}}}return s?r.jsxs("div",{className:"entrance-page",children:[r.jsx("div",{className:"logo-section",children:r.jsxs("div",{className:"logo-main",children:[r.jsx("span",{className:"initial-glow","aria-hidden":"true",children:"M"}),"ISOGI"]})}),r.jsx("p",{style:{marginTop:24,color:"var(--muted)",fontSize:"0.9rem"},children:"..."})]}):r.jsxs("div",{className:"entrance-page",children:[r.jsxs("div",{className:"logo-section",children:[r.jsxs("div",{className:"logo-main",children:[r.jsx("span",{className:"initial-glow","aria-hidden":"true",children:"M"}),"ISOGI"]}),r.jsxs("div",{className:"logo-sub",children:["MISESAPO INTELLIGENT SYSTEM FOR",r.jsx("br",{}),"OPERATIONAL GUIDANCE & INTERFACE"]})]}),r.jsx(at,{active:!1}),n?i?(()=>{const h=u.role&&String(u.role).trim()||"",x=!!Lu[h]||h.startsWith("single:")&&(()=>{const v=h.replace("single:","");return v==="admin"||Bl.includes(v)})();return i&&!x})()?r.jsxs(r.Fragment,{children:[u.name&&r.jsxs("p",{className:"job-selector-label",style:{marginTop:16,marginBottom:4,fontSize:"0.85rem",color:"var(--muted)"},children:[u.name," "]}),u.role&&r.jsxs("p",{className:"job-selector-label",style:{marginTop:4,marginBottom:4,fontSize:"0.75rem",color:"var(--muted)",opacity:.9},children:[": ",u.role]}),r.jsx("p",{className:"job-selector-label",style:{marginTop:8,marginBottom:8,fontSize:"0.8rem",color:"var(--muted)"},children:""}),r.jsx("div",{className:"job-selector",children:Bl.map(h=>{const x=Hp[h];if(!x)return null;const v=h==="admin"?"/admin/entrance":`/jobs/${h}/entrance`;return r.jsxs(ke,{to:v,className:"job-btn",style:{"--job-btn-color":x.color},children:[r.jsx("span",{className:"job-btn-dot",style:{background:x.color},"aria-hidden":"true"}),x.label]},h)})})]}):null:r.jsxs(r.Fragment,{children:[u.role&&r.jsxs("p",{className:"job-selector-label",style:{marginTop:16,marginBottom:4,fontSize:"0.75rem",color:"var(--muted)"},children:[": ",u.role]}),r.jsxs("button",{type:"button",className:"start-btn entrance-login-btn",onClick:m,"aria-label":"",style:{marginTop:40,position:"relative",zIndex:200},children:[r.jsx(Ru,{}),r.jsx("span",{className:"start-btn-label",children:""})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"job-selector-label",style:{marginTop:24,marginBottom:8,fontSize:"0.9rem",color:"var(--muted)"},children:""}),r.jsxs("button",{type:"button",className:"start-btn entrance-login-btn",onClick:()=>d(!0),"aria-label":"",style:{marginTop:16,position:"relative",zIndex:200},children:[r.jsx(Ru,{}),r.jsx("span",{className:"start-btn-label",children:""})]})]}),r.jsxs("p",{style:{marginTop:16,fontSize:"0.85rem"},children:[r.jsx(ke,{to:"/",children:"Portal"}),n&&r.jsxs(r.Fragment,{children:["  ",r.jsx("button",{type:"button",onClick:l,style:{background:"none",border:"none",padding:0,color:"var(--job-sales)",cursor:"pointer",textDecoration:"underline",fontSize:"inherit"},children:""})]}),"  ",r.jsx(ke,{to:"/sales/store/demo",children:""})]}),c&&r.jsx(f.Suspense,{fallback:r.jsx("div",{style:{position:"fixed",inset:0,zIndex:1e3,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",color:"var(--fg)"},children:"..."}),children:r.jsx(nv,{onClose:()=>d(!1),onSuccess:()=>{a(),d(!1)}})})]})}function Ru(){return r.jsx("svg",{viewBox:"0 0 1160 1280",preserveAspectRatio:"xMidYMid meet",fill:"currentColor",stroke:"none","aria-hidden":"true",children:r.jsxs("g",{transform:"translate(0, 1280) scale(0.1, -0.1)",children:[r.jsx("path",{d:"M5620 12785 c-244 -39 -488 -168 -656 -348 -171 -184 -270 -392 -309 -647 -22 -143 -22 -4877 0 -5020 20 -132 49 -229 100 -338 170 -358 489 -599 872 -657 562 -85 1094 247 1272 793 64 195 61 59 61 2712 0 2655 3 2517 -61 2713 -178 545 -720 880 -1279 792z"}),r.jsx("path",{d:"M2510 10355 c-8 -2 -49 -9 -90 -15 -208 -34 -430 -150 -588 -308 -553 -551 -926 -1059 -1231 -1672 -383 -772 -576 -1556 -597 -2430 -34 -1339 407 -2662 1235 -3710 272 -345 645 -717 986 -986 713 -559 1565 -950 2448 -1123 406 -80 677 -105 1127 -105 467 0 735 26 1170 114 2252 455 4055 2258 4510 4510 88 436 113 696 114 1165 0 376 -10 532 -55 840 -160 1102 -637 2138 -1371 2972 -154 175 -260 284 -272 280 -6 -3 -49 26 -96 64 -101 82 -287 178 -410 213 -283 80 -614 42 -867 -100 -678 -379 -808 -1289 -261 -1832 46 -45 109 -101 141 -125 104 -76 320 -369 469 -634 421 -753 543 -1634 343 -2478 -296 -1249 -1271 -2245 -2518 -2575 -490 -129 -1017 -149 -1528 -60 -480 84 -977 291 -1383 574 -309 216 -631 533 -852 841 -455 633 -683 1413 -643 2197 39 763 313 1458 811 2055 105 126 149 171 336 349 220 209 338 471 349 777 6 159 -5 248 -49 392 -54 179 -151 339 -288 475 -174 175 -389 285 -630 325 -82 13 -264 19 -310 10z"})]})})}function sv(){return r.jsxs("div",{className:"admin-page",children:[r.jsx("h1",{children:" TOP"}),r.jsx("p",{style:{color:"var(--muted)",marginBottom:16},children:""}),r.jsxs("nav",{style:{display:"flex",flexDirection:"column",gap:8},children:[r.jsx(ke,{to:"/admin/entrance",children:""}),r.jsx(ke,{to:"/admin/hr/attendance",children:"HR / Attendance"})]}),r.jsx("p",{style:{marginTop:24},children:r.jsx(ke,{to:"/entrance",children:""})})]})}function av({actions:e,active:t,onChange:n}){return e!=null&&e.length?r.jsx("div",{className:"hotbar",role:"navigation",children:e.map(s=>{const a=s.disabled===!0;return r.jsx("button",{type:"button",className:`hotbar-btn ${s.id===t?"active":""} ${a?"hotbar-btn-disabled":""}`,disabled:a,onClick:()=>!a&&(n==null?void 0:n(s.id)),children:s.label},s.id)})}):null}const lv=["sales","cleaning","office","dev","admin"];function iv({job:e,hotbarConfig:t}){var N;const n=_t(),{isTransitioning:s,startTransition:a}=Qy(n),l=e&&Hp[e],i=l&&lv.includes(e),o=Array.isArray(t)&&t.length===4?t:null,[c,d]=f.useState(((N=o==null?void 0:o[0])==null?void 0:N.id)??null),u=g=>{const p=o==null?void 0:o.find(y=>y.id===g);d(g),!(p!=null&&p.subItems)&&(p!=null&&p.to)&&n(p.to)};if(!i)return r.jsxs("div",{style:{padding:24,textAlign:"center"},children:[r.jsx("p",{children:""}),r.jsx(ke,{to:"/",children:"Portal "})]});const m=o==null?void 0:o.find(g=>g.id===c),h=(m==null?void 0:m.label)??c,x=(m==null?void 0:m.role)??"base",S=x==="log"||s;return r.jsxs("div",{className:`job-entrance-page ${S?Hy:""}`,"data-job":e,style:{paddingBottom:110},children:[r.jsx("div",{className:"job-entrance-viz",children:r.jsx(at,{mode:x,onLogTransitionEnd:()=>{n(e==="sales"?"/sales/report-day":`/jobs/${e}/report`)}})}),r.jsx("div",{className:`job-entrance-ui ${S?Vy:""}`,children:r.jsxs("main",{className:"job-entrance-main",children:[r.jsx("h1",{className:"job-entrance-title",style:{color:l.color},children:l.label}),(m==null?void 0:m.subItems)&&r.jsx("div",{className:"sub-hotbar",children:m.subItems.map(g=>r.jsx("button",{type:"button",className:"sub-hotbar-btn",onClick:()=>{const p=g.path||g.to;p&&a(p)},disabled:s,children:g.label},g.id))}),!(m!=null&&m.subItems)&&r.jsx("p",{className:"job-entrance-dummy",children:o?`: ${h}`:""}),r.jsx("p",{style:{marginTop:16},children:r.jsx(ke,{to:"/",children:"Portal "})})]})}),o&&r.jsx(av,{actions:o,active:c,onChange:u}),s&&r.jsx(Jy,{visible:!0})]})}const ov=[{id:"work-reports",label:"",to:"/admin/work-reports",disabled:!1},{id:"schedule",label:"",to:"/admin/schedule",disabled:!1},{id:"clients",role:"target",label:"",subItems:[{id:"client-register",label:"",path:"/office/clients/new"},{id:"client-list",label:"",path:"/office/clients/list"},{id:"client-karte",label:"",path:"/office/clients/list"}]},{id:"workers",label:"",to:"/admin/workers",disabled:!0}];function cv(){return r.jsx(iv,{job:"admin",hotbarConfig:ov})}const uv="/api-wr";function dv(){var e;return typeof window<"u"&&((e=window.location)==null?void 0:e.hostname)==="localhost"?uv:"https://1x0f73dj2l.execute-api.ap-northeast-1.amazonaws.com/prod"}async function mt(e,t={}){const n=dv(),s=e.startsWith("http")?e:`${n.replace(/\/$/,"")}/${e.replace(/^\//,"")}`,a=await fetch(s,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!a.ok){let l=a.statusText||"API Error",i="",o=null;try{if(i=await a.text(),i)try{o=JSON.parse(i),l=(o==null?void 0:o.message)||(o==null?void 0:o.error)||(o==null?void 0:o.reason)||l}catch{l=i.length>200?i.substring(0,200)+"...":i}}catch{}const c=new Error(l);throw c.status=a.status,c.response=a,c.url=s,c.body=i,c.bodyParsed=o,console.error(`[apiFetchWorkReport] ${a.status} ${a.statusText}`,{url:s,status:a.status,bodyText:i,bodyParsed:o}),c}return a.json()}async function fv(e={}){var l,i;const t=new URLSearchParams;e.from&&t.set("from",e.from),e.to&&t.set("to",e.to),(l=e.states)!=null&&l.length&&t.set("states",e.states.join(",")),(i=e.templates)!=null&&i.length&&t.set("templates",e.templates.join(",")),e.limit!=null&&t.set("limit",String(e.limit));const n=t.toString(),s=n?`/admin/work-reports?${n}`:"/admin/work-reports",a=await mt(s,{headers:pt()});return(a==null?void 0:a.items)??(a==null?void 0:a.rows)??[]}async function pv(e){return mt(`/admin/work-reports/${encodeURIComponent(e)}`,{headers:pt()})}async function mv(e,t,n={}){const s=new URLSearchParams;n.state&&s.set("state",n.state);const a=s.toString(),l=`/admin/payroll/${encodeURIComponent(e)}/${encodeURIComponent(t)}`,i=a?`${l}?${a}`:l;return mt(i,{headers:pt()})}const hv={log_id:"sample-cleaning-001",version:1,state:"submitted",template_id:"CLEANING_STORE_V1",work_date:new Date().toISOString().slice(0,10),work_minutes:90,target_label:"",created_by_name:"",updated_at:new Date().toISOString().slice(0,19),description:JSON.stringify({store:{name:"",address:" 1-2-3",witness:" ",work_start_time:"09:00",work_end_time:"10:30",note:""},services:[{name:"",minutes:60,memo:""},{name:"",minutes:30,memo:""}],attachments:[{url:"https://example.com/photo.jpg",name:".jpg"}]})};function gv(){const e=new Date;return e.setDate(e.getDate()-1),e.toISOString().slice(0,10)}function vs(e){if(e==null)return{};if(typeof e=="object"&&e!==null)return e;if(typeof e!="string")return{};try{const t=JSON.parse(e);return typeof t=="object"&&t!==null?t:{}}catch{return{}}}function Kp(e){var a,l,i,o,c;const t=[e.summary,(a=e==null?void 0:e.header)==null?void 0:a.summary,(l=e==null?void 0:e.store)==null?void 0:l.name].filter(Boolean).join(" ")||"",n=[e.issues,(i=e==null?void 0:e.header)==null?void 0:i.issues].filter(Boolean).join(" ")||"",s=[e.note,e.notes,(o=e==null?void 0:e.header)==null?void 0:o.note,(c=e==null?void 0:e.store)==null?void 0:c.note].filter(Boolean).join(" ")||"";return{summary:t,issues:n,notes:s}}function Qi(e){var a,l;const t=[],n=vs(e==null?void 0:e.description),s=i=>{Array.isArray(i)&&i.forEach(o=>{o!=null&&o.url&&t.push({name:o.name||o.key||"",url:o.url})})};return s(n.attachments),s((a=n.store)==null?void 0:a.attachments),s((l=n.header)==null?void 0:l.attachments),t}function yv(e){return Qi(e).length}function vv(e){return e?e.startsWith("SALES")||e.includes("SALES")?"":e.startsWith("CLEANING")||e.includes("CLEANING")?"":"":""}function Gi(e){return e.created_by_name||e.created_by||e.worker_id||""}function xv(e,t){if(!t||!String(t).trim())return!0;const n=String(t).trim().toLowerCase(),s=vs(e==null?void 0:e.description),{summary:a,issues:l,notes:i}=Kp(s);return[Gi(e),e.target_label??"",a,l,i].filter(Boolean).join(" ").toLowerCase().includes(n)}function _v(e){return!!((e==null?void 0:e.state)==="submitted"||e!=null&&e.submitted_at||(e==null?void 0:e.status)==="submitted")}function jv(e){return[...e.filter(n=>_v(n))].sort((n,s)=>{const a=n.updated_at||"";return(s.updated_at||"").localeCompare(a)})}function bv(){const[e]=Fp(),t=e.get("sample")==="1",[n,s]=f.useState(()=>gv()),[a,l]=f.useState([]),[i,o]=f.useState(!1),[c,d]=f.useState(""),[u,m]=f.useState(""),[h,x]=f.useState(null),v=f.useCallback(async()=>{o(!0),d("");try{const p=await fv({from:n,to:n});l(Array.isArray(p)?p:[])}catch(p){d((p==null?void 0:p.message)||String(p)||""),l([])}finally{o(!1)}},[n]);f.useEffect(()=>{v()},[v]);const S=f.useMemo(()=>t&&a.length===0?[hv]:a,[t,a]),g=jv(S).filter(p=>xv(p,u));return r.jsxs("div",{className:"admin-work-reports-page",children:[r.jsx("h1",{className:"admin-work-reports-title",children:""}),r.jsx("p",{className:"admin-work-reports-back",children:r.jsx(ke,{to:"/admin/entrance",children:""})}),r.jsxs("div",{className:"admin-work-reports-toolbar",children:[r.jsxs("label",{className:"admin-work-reports-field",children:[r.jsx("span",{children:""}),r.jsx("input",{type:"date",value:n,onChange:p=>s(p.target.value),className:"admin-work-reports-input"})]}),r.jsxs("label",{className:"admin-work-reports-field admin-work-reports-search",children:[r.jsx("span",{children:""}),r.jsx("input",{type:"search",placeholder:"",value:u,onChange:p=>m(p.target.value),className:"admin-work-reports-input","aria-label":""})]})]}),c&&r.jsx("p",{className:"admin-work-reports-error",role:"alert",children:c}),i&&r.jsx("p",{className:"admin-work-reports-loading",children:""}),!i&&a.length===0&&!c&&!t&&r.jsxs("p",{className:"admin-work-reports-empty",children:["",r.jsx(ke,{to:"/admin/work-reports?sample=1",className:"admin-work-reports-sample-link",children:"1"})]}),!i&&a.length>0&&g.length===0&&r.jsx("p",{className:"admin-work-reports-empty",children:""}),t&&a.length===0&&r.jsxs("p",{className:"admin-work-reports-sample-hint",role:"status",children:["1",r.jsx("code",{children:"?sample=1"})," API "]}),!i&&!c&&r.jsxs("details",{className:"admin-work-reports-details",style:{marginBottom:16},children:[r.jsx("summary",{children:""}),r.jsx("pre",{className:"admin-work-reports-pre",style:{maxHeight:200},children:S.length===0?"[]":JSON.stringify(S,null,2)})]}),r.jsx("div",{className:"admin-work-reports-cards",children:!i&&g.map(p=>{const y=vs(p.description),{summary:_,issues:w}=Kp(y),P=p.work_minutes??p.total_minutes??"",D=p.updated_at?String(p.updated_at).slice(0,19):"",H=yv(p);return r.jsxs("button",{type:"button",className:"admin-work-reports-card",onClick:()=>x(p),children:[r.jsxs("span",{className:"admin-work-reports-card-row admin-work-reports-card-meta",children:[r.jsx("span",{className:"admin-work-reports-card-date",children:p.work_date||p.report_date||p.date||""}),r.jsx("span",{className:"admin-work-reports-card-template",children:vv(p.template_id)}),r.jsx("span",{className:"admin-work-reports-card-state",children:p.state==="submitted"?"":p.state??""})]}),r.jsxs("span",{className:"admin-work-reports-card-submitter",children:[": ",Gi(p)]}),r.jsxs("span",{className:"admin-work-reports-card-target",children:[": ",p.target_label??""]}),r.jsxs("span",{className:"admin-work-reports-card-minutes",children:[": ",P===""?"":`${P}`]}),_?r.jsxs("span",{className:"admin-work-reports-card-summary",children:[": ",_.slice(0,80),_.length>80?"":""]}):null,w?r.jsxs("span",{className:"admin-work-reports-card-issues",children:[": ",w.slice(0,80),w.length>80?"":""]}):null,r.jsxs("span",{className:"admin-work-reports-card-attachments",children:[": ",H,""]}),r.jsxs("span",{className:"admin-work-reports-card-updated",children:[": ",D]}),p.log_id&&r.jsx("span",{className:"admin-work-reports-card-link",style:{marginTop:8,display:"block"},children:r.jsx(ke,{to:`/office/work-reports/${p.log_id}`,target:"_blank",rel:"noopener noreferrer",onClick:I=>I.stopPropagation(),children:""})})]},p.log_id??Math.random())})}),h&&r.jsx("div",{className:"admin-work-reports-modal-backdrop",onClick:()=>{x(null),setStateChangeError(""),setStateChangeReason("")},role:"dialog","aria-modal":"true","aria-labelledby":"admin-work-reports-modal-title",children:r.jsxs("div",{className:"admin-work-reports-modal",onClick:p=>p.stopPropagation(),children:[r.jsxs("div",{className:"admin-work-reports-modal-header",children:[r.jsx("h2",{id:"admin-work-reports-modal-title",children:""}),r.jsx("button",{type:"button",className:"admin-work-reports-modal-close",onClick:()=>{x(null),setStateChangeError(""),setStateChangeReason("")},"aria-label":"",children:""})]}),r.jsxs("div",{className:"admin-work-reports-modal-body",children:[r.jsxs("section",{className:"admin-work-reports-modal-meta","aria-label":"",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"log_id:"})," ",h.log_id??""]}),r.jsxs("p",{children:[r.jsx("strong",{children:"version:"})," ",h.version??""]}),r.jsxs("p",{children:[r.jsx("strong",{children:"state:"})," ",h.state==="submitted"?"":h.state==="rejected"?"":h.state==="approved"?"":h.state??""]}),r.jsxs("p",{children:[r.jsx("strong",{children:"work_date:"})," ",h.work_date||h.report_date||""]}),r.jsxs("p",{children:[r.jsx("strong",{children:"template_id:"})," ",h.template_id??""]}),r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",Gi(h)]}),r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",h.target_label??""]}),r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",h.work_minutes??h.total_minutes??"",""]}),r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",h.updated_at??""]}),h.log_id&&r.jsxs("p",{children:[r.jsx("strong",{children:"URL:"})," ",r.jsx(ke,{to:`/office/work-reports/${h.log_id}`,target:"_blank",rel:"noopener noreferrer",children:""})]})]}),h.template_id&&String(h.template_id).includes("CLEANING")&&(()=>{const p=vs(h.description),y=p.store||{},_=Array.isArray(p.services)?p.services:[];return!y.name&&!y.note&&_.length===0?null:r.jsxs("section",{className:"admin-work-reports-modal-cleaning","aria-label":"",children:[r.jsx("h3",{className:"admin-work-reports-modal-h3",children:""}),y.name&&r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",y.name]}),y.address&&r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",y.address]}),y.witness&&r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",y.witness]}),(y.work_start_time||y.work_end_time)&&r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",y.work_start_time||"","  ",y.work_end_time||""]}),y.note&&r.jsxs("p",{children:[r.jsx("strong",{children:":"})," ",y.note]}),_.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("p",{children:r.jsx("strong",{children:":"})}),r.jsx("ul",{className:"admin-work-reports-services",children:_.map((w,P)=>r.jsxs("li",{children:[w.name||""," ",w.minutes!=null?`${w.minutes}`:""," ",w.memo?`${w.memo}`:""]},P))})]})]})})(),r.jsxs("details",{className:"admin-work-reports-details",open:!0,children:[r.jsx("summary",{children:"report_data / description"}),r.jsx("pre",{className:"admin-work-reports-pre",children:(()=>{const p=h.report_data??h.description,y=vs(p);return Object.keys(y).length===0?"()":JSON.stringify(y,null,2)})()})]}),Qi(h).length>0&&r.jsxs("div",{className:"admin-work-reports-attachments",children:[r.jsx("h3",{children:""}),r.jsx("ul",{children:Qi(h).map((p,y)=>r.jsx("li",{children:r.jsx("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",children:p.name})},y))})]})]})]})})]})}var Yp={exports:{}};(function(e,t){(function(n,s){e.exports=s()})(dm,function(){var n=1e3,s=6e4,a=36e5,l="millisecond",i="second",o="minute",c="hour",d="day",u="week",m="month",h="quarter",x="year",v="date",S="Invalid Date",N=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,p={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(G){var C=["th","st","nd","rd"],L=G%100;return"["+G+(C[(L-20)%10]||C[L]||C[0])+"]"}},y=function(G,C,L){var J=String(G);return!J||J.length>=C?G:""+Array(C+1-J.length).join(L)+G},_={s:y,z:function(G){var C=-G.utcOffset(),L=Math.abs(C),J=Math.floor(L/60),b=L%60;return(C<=0?"+":"-")+y(J,2,"0")+":"+y(b,2,"0")},m:function G(C,L){if(C.date()<L.date())return-G(L,C);var J=12*(L.year()-C.year())+(L.month()-C.month()),b=C.clone().add(J,m),$=L-b<0,V=C.clone().add(J+($?-1:1),m);return+(-(J+(L-b)/($?b-V:V-b))||0)},a:function(G){return G<0?Math.ceil(G)||0:Math.floor(G)},p:function(G){return{M:m,y:x,w:u,d,D:v,h:c,m:o,s:i,ms:l,Q:h}[G]||String(G||"").toLowerCase().replace(/s$/,"")},u:function(G){return G===void 0}},w="en",P={};P[w]=p;var D="$isDayjsObject",H=function(G){return G instanceof k||!(!G||!G[D])},I=function G(C,L,J){var b;if(!C)return w;if(typeof C=="string"){var $=C.toLowerCase();P[$]&&(b=$),L&&(P[$]=L,b=$);var V=C.split("-");if(!b&&V.length>1)return G(V[0])}else{var ee=C.name;P[ee]=C,b=ee}return!J&&b&&(w=b),b||!J&&w},F=function(G,C){if(H(G))return G.clone();var L=typeof C=="object"?C:{};return L.date=G,L.args=arguments,new k(L)},z=_;z.l=I,z.i=H,z.w=function(G,C){return F(G,{locale:C.$L,utc:C.$u,x:C.$x,$offset:C.$offset})};var k=function(){function G(L){this.$L=I(L.locale,null,!0),this.parse(L),this.$x=this.$x||L.x||{},this[D]=!0}var C=G.prototype;return C.parse=function(L){this.$d=function(J){var b=J.date,$=J.utc;if(b===null)return new Date(NaN);if(z.u(b))return new Date;if(b instanceof Date)return new Date(b);if(typeof b=="string"&&!/Z$/i.test(b)){var V=b.match(N);if(V){var ee=V[2]-1||0,se=(V[7]||"0").substring(0,3);return $?new Date(Date.UTC(V[1],ee,V[3]||1,V[4]||0,V[5]||0,V[6]||0,se)):new Date(V[1],ee,V[3]||1,V[4]||0,V[5]||0,V[6]||0,se)}}return new Date(b)}(L),this.init()},C.init=function(){var L=this.$d;this.$y=L.getFullYear(),this.$M=L.getMonth(),this.$D=L.getDate(),this.$W=L.getDay(),this.$H=L.getHours(),this.$m=L.getMinutes(),this.$s=L.getSeconds(),this.$ms=L.getMilliseconds()},C.$utils=function(){return z},C.isValid=function(){return this.$d.toString()!==S},C.isSame=function(L,J){var b=F(L);return this.startOf(J)<=b&&b<=this.endOf(J)},C.isAfter=function(L,J){return F(L)<this.startOf(J)},C.isBefore=function(L,J){return this.endOf(J)<F(L)},C.$g=function(L,J,b){return z.u(L)?this[J]:this.set(b,L)},C.unix=function(){return Math.floor(this.valueOf()/1e3)},C.valueOf=function(){return this.$d.getTime()},C.startOf=function(L,J){var b=this,$=!!z.u(J)||J,V=z.p(L),ee=function(W,O){var ae=z.w(b.$u?Date.UTC(b.$y,O,W):new Date(b.$y,O,W),b);return $?ae:ae.endOf(d)},se=function(W,O){return z.w(b.toDate()[W].apply(b.toDate("s"),($?[0,0,0,0]:[23,59,59,999]).slice(O)),b)},ie=this.$W,ue=this.$M,we=this.$D,M="set"+(this.$u?"UTC":"");switch(V){case x:return $?ee(1,0):ee(31,11);case m:return $?ee(1,ue):ee(0,ue+1);case u:var j=this.$locale().weekStart||0,q=(ie<j?ie+7:ie)-j;return ee($?we-q:we+(6-q),ue);case d:case v:return se(M+"Hours",0);case c:return se(M+"Minutes",1);case o:return se(M+"Seconds",2);case i:return se(M+"Milliseconds",3);default:return this.clone()}},C.endOf=function(L){return this.startOf(L,!1)},C.$set=function(L,J){var b,$=z.p(L),V="set"+(this.$u?"UTC":""),ee=(b={},b[d]=V+"Date",b[v]=V+"Date",b[m]=V+"Month",b[x]=V+"FullYear",b[c]=V+"Hours",b[o]=V+"Minutes",b[i]=V+"Seconds",b[l]=V+"Milliseconds",b)[$],se=$===d?this.$D+(J-this.$W):J;if($===m||$===x){var ie=this.clone().set(v,1);ie.$d[ee](se),ie.init(),this.$d=ie.set(v,Math.min(this.$D,ie.daysInMonth())).$d}else ee&&this.$d[ee](se);return this.init(),this},C.set=function(L,J){return this.clone().$set(L,J)},C.get=function(L){return this[z.p(L)]()},C.add=function(L,J){var b,$=this;L=Number(L);var V=z.p(J),ee=function(ue){var we=F($);return z.w(we.date(we.date()+Math.round(ue*L)),$)};if(V===m)return this.set(m,this.$M+L);if(V===x)return this.set(x,this.$y+L);if(V===d)return ee(1);if(V===u)return ee(7);var se=(b={},b[o]=s,b[c]=a,b[i]=n,b)[V]||1,ie=this.$d.getTime()+L*se;return z.w(ie,this)},C.subtract=function(L,J){return this.add(-1*L,J)},C.format=function(L){var J=this,b=this.$locale();if(!this.isValid())return b.invalidDate||S;var $=L||"YYYY-MM-DDTHH:mm:ssZ",V=z.z(this),ee=this.$H,se=this.$m,ie=this.$M,ue=b.weekdays,we=b.months,M=b.meridiem,j=function(O,ae,B,ne){return O&&(O[ae]||O(J,$))||B[ae].slice(0,ne)},q=function(O){return z.s(ee%12||12,O,"0")},W=M||function(O,ae,B){var ne=O<12?"AM":"PM";return B?ne.toLowerCase():ne};return $.replace(g,function(O,ae){return ae||function(B){switch(B){case"YY":return String(J.$y).slice(-2);case"YYYY":return z.s(J.$y,4,"0");case"M":return ie+1;case"MM":return z.s(ie+1,2,"0");case"MMM":return j(b.monthsShort,ie,we,3);case"MMMM":return j(we,ie);case"D":return J.$D;case"DD":return z.s(J.$D,2,"0");case"d":return String(J.$W);case"dd":return j(b.weekdaysMin,J.$W,ue,2);case"ddd":return j(b.weekdaysShort,J.$W,ue,3);case"dddd":return ue[J.$W];case"H":return String(ee);case"HH":return z.s(ee,2,"0");case"h":return q(1);case"hh":return q(2);case"a":return W(ee,se,!0);case"A":return W(ee,se,!1);case"m":return String(se);case"mm":return z.s(se,2,"0");case"s":return String(J.$s);case"ss":return z.s(J.$s,2,"0");case"SSS":return z.s(J.$ms,3,"0");case"Z":return V}return null}(O)||V.replace(":","")})},C.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},C.diff=function(L,J,b){var $,V=this,ee=z.p(J),se=F(L),ie=(se.utcOffset()-this.utcOffset())*s,ue=this-se,we=function(){return z.m(V,se)};switch(ee){case x:$=we()/12;break;case m:$=we();break;case h:$=we()/3;break;case u:$=(ue-ie)/6048e5;break;case d:$=(ue-ie)/864e5;break;case c:$=ue/a;break;case o:$=ue/s;break;case i:$=ue/n;break;default:$=ue}return b?$:z.a($)},C.daysInMonth=function(){return this.endOf(m).$D},C.$locale=function(){return P[this.$L]},C.locale=function(L,J){if(!L)return this.$L;var b=this.clone(),$=I(L,J,!0);return $&&(b.$L=$),b},C.clone=function(){return z.w(this.$d,this)},C.toDate=function(){return new Date(this.valueOf())},C.toJSON=function(){return this.isValid()?this.toISOString():null},C.toISOString=function(){return this.$d.toISOString()},C.toString=function(){return this.$d.toUTCString()},G}(),Y=k.prototype;return F.prototype=Y,[["$ms",l],["$s",i],["$m",o],["$H",c],["$W",d],["$M",m],["$y",x],["$D",v]].forEach(function(G){Y[G[1]]=function(C){return this.$g(C,G[0],G[1])}}),F.extend=function(G,C){return G.$i||(G(C,k,F),G.$i=!0),F},F.locale=I,F.isDayjs=H,F.unix=function(G){return F(1e3*G)},F.en=P[w],F.Ls=P,F.p={},F})})(Yp);var Sv=Yp.exports;const kv=vd(Sv);function bn(e,t,n,s){return e<s&&t>n}function Xe(e){const t=Date.parse(e);if(Number.isNaN(t))throw new Error(`Invalid datetime: ${e}`);return t}function Ou({candidateAppointments:e,existingAppointments:t,blocks:n,userIdToName:s={}}){const a=[],l={};for(const c of t)l[c.assignee_id]||(l[c.assignee_id]=[]),l[c.assignee_id].push(c);const i={},o=[];for(const c of n)c.user_id==null?o.push(c):(i[c.user_id]||(i[c.user_id]=[]),i[c.user_id].push(c));for(const c of e){const d=c.assignee_id,u=Xe(c.start_at),m=Xe(c.end_at),h=l[d]??[];for(const v of h){if(v.id===c.id)continue;const S=Xe(v.start_at),N=Xe(v.end_at);if(bn(u,m,S,N)){const g=s[d];a.push({user_id:d,user_name:g,with_type:"appointment",with_id:v.id,start_at:v.start_at,end_at:v.end_at,message:`${g??d}  ${Sn(c.start_at,c.end_at)} `});break}}const x=i[d]??[];for(const v of x){const S=Xe(v.start_at),N=Xe(v.end_at);if(bn(u,m,S,N)){const g=s[d];a.push({user_id:d,user_name:g,with_type:"block",with_id:v.id,start_at:v.start_at,end_at:v.end_at,message:`${g??d} ${Sn(v.start_at,v.end_at)}`});break}}for(const v of o){const S=Xe(v.start_at),N=Xe(v.end_at);if(bn(u,m,S,N)){const g=s[d];a.push({user_id:d,user_name:g,with_type:"block",with_id:v.id,start_at:v.start_at,end_at:v.end_at,message:`${g??d} ${Sn(v.start_at,v.end_at)}`});break}}}return Nv(a,c=>`${c.user_id}:${c.with_type}:${c.with_id}`)}function wv({block:e,existingAppointments:t,existingBlocks:n,userIdToName:s={}}){const a=[],l=Xe(e.start_at),i=Xe(e.end_at);if(e.user_id!=null){for(const o of t){if(o.assignee_id!==e.user_id)continue;const c=Xe(o.start_at),d=Xe(o.end_at);if(bn(l,i,c,d)){const u=s[e.user_id];a.push({user_id:e.user_id,user_name:u,with_type:"appointment",with_id:o.id,start_at:o.start_at,end_at:o.end_at,message:`${u??e.user_id} ${Sn(o.start_at,o.end_at)}`});break}}for(const o of n){if(o.id===e.id)continue;const c=o.user_id;if(!(c!=null&&c!==e.user_id))if(c===null){const d=Xe(o.start_at),u=Xe(o.end_at);if(bn(l,i,d,u)){const m=s[e.user_id];a.push({user_id:e.user_id,user_name:m,with_type:"block",with_id:o.id,start_at:o.start_at,end_at:o.end_at,message:`${Sn(o.start_at,o.end_at)}`});break}}else{const d=Xe(o.start_at),u=Xe(o.end_at);if(bn(l,i,d,u)){const m=s[e.user_id];a.push({user_id:e.user_id,user_name:m,with_type:"block",with_id:o.id,start_at:o.start_at,end_at:o.end_at,message:`${m??e.user_id} ${Sn(o.start_at,o.end_at)}`});break}}}}else{for(const o of t){const c=Xe(o.start_at),d=Xe(o.end_at);if(bn(l,i,c,d)){const u=s[o.assignee_id];a.push({user_id:o.assignee_id,user_name:u,with_type:"appointment",with_id:o.id,start_at:o.start_at,end_at:o.end_at,message:`${u??o.assignee_id} ${Sn(o.start_at,o.end_at)}`});break}}for(const o of n){if(o.id===e.id)continue;const c=Xe(o.start_at),d=Xe(o.end_at);if(bn(l,i,c,d)){a.push({user_id:"__ALL__",with_type:"block",with_id:o.id,start_at:o.start_at,end_at:o.end_at,message:`${o.user_id==null?"":""}${Sn(o.start_at,o.end_at)}`});break}}}return a}function Nv(e,t){const n=new Set,s=[];for(const a of e){const l=t(a);n.has(l)||(n.add(l),s.push(a))}return s}function Sn(e,t){const n=new Date(e),s=new Date(t),a=l=>String(l).padStart(2,"0");return`${a(n.getHours())}:${a(n.getMinutes())}${a(s.getHours())}:${a(s.getMinutes())}`}function tr(e="sch"){const t=Math.random().toString(36).slice(2,6);return`${e}_${Date.now()}_${t}`}function Cv({userId:e,userName:t,initialStartAt:n,initialEndAt:s,onClose:a,onCreate:l,conflictError:i}){const[o,c]=f.useState(n??""),[d,u]=f.useState(s??""),[m,h]=f.useState("sleep"),[x,v]=f.useState("");f.useEffect(()=>{c(n??""),u(s??"")},[n,s]);function S(){if(!o||!d||Date.parse(o)>=Date.parse(d))return;const g=o.length===16?`${o}:00`:o,p=d.length===16?`${d}:00`:d;l({user_id:e,start_at:g,end_at:p,type:e==null?"company_close":"personal_close",reason_code:m,reason_note:x||void 0,visibility:"admin_only"}),a()}const N=e==null?"":`${t??e}`;return r.jsx("div",{className:"blockCreateModalBackdrop",onMouseDown:a,role:"presentation",children:r.jsxs("div",{className:"blockCreateModal",onMouseDown:g=>g.stopPropagation(),role:"dialog",children:[r.jsxs("div",{className:"blockCreateModalHeader",children:[r.jsx("div",{className:"blockCreateModalTitle",children:N}),r.jsx("button",{type:"button",className:"iconBtn",onClick:a,"aria-label":"",children:""})]}),i&&r.jsx("div",{className:"modalConflictError",role:"alert",children:i}),r.jsxs("div",{className:"blockCreateModalBody",children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:""}),r.jsx("input",{type:"datetime-local",value:o,onChange:g=>c(g.target.value),step:900})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:""}),r.jsx("input",{type:"datetime-local",value:d,onChange:g=>u(g.target.value),step:900})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:""}),r.jsxs("select",{value:m,onChange:g=>h(g.target.value),children:[r.jsx("option",{value:"sleep",children:""}),r.jsx("option",{value:"move",children:""}),r.jsx("option",{value:"private",children:""}),r.jsx("option",{value:"other",children:""})]})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:""}),r.jsx("input",{value:x,onChange:g=>v(g.target.value),placeholder:""})]})]}),r.jsxs("div",{className:"blockCreateModalFooter",children:[r.jsx("button",{type:"button",className:"btn",onClick:a,children:""}),r.jsx("button",{type:"button",className:"btnPrimary",onClick:S,disabled:!o||!d||Date.parse(o)>=Date.parse(d),children:""})]})]})})}const Ev=[{value:"monthly",label:""},{value:"bimonthly",label:""},{value:"quarterly",label:"3"},{value:"semiannual",label:"6"},{value:"yearly",label:"1"},{value:"spot",label:""}],Tv={chart_id:null,store_id:null,brand_id:null,client_id:null,status:"active",version:"complete",plan_frequency:"semiannual",security_box_number:"",equipment:[],services:[],consumables:[],cleaning_staff_history:[],notes:"",issue:"",environment:"",staff_min:"",staff_max:"",hours:"",cleaning_frequency:"",area_sqm:"",area_tatami:"",ceiling_height:"",electrical_amps:"",toilet_count:"",aircon_count:"",wall_material:"",floor_material:"",breaker_location:"",key_location:"",entrances:"",staff_room:"",breaker_photo_url:"",key_photo_url:"",seat_counter:!1,seat_box:!1,seat_zashiki:!1,aircon_state:"",kitchen_state:"",hotspots:"",intake_notes:"",last_clean:"",plan:"",self_rating:""};function nc(e,t={}){if(!e)throw new Error("karteTemplate: storeId is required");return{...Tv,store_id:e,brand_id:t.brand_id??null,client_id:t.client_id??null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}}function $v(e,t,n={}){const s=nc(t,n);return{...s,...e,store_id:t,brand_id:e.brand_id??n.brand_id??null,client_id:e.client_id??n.client_id??null,equipment:Array.isArray(e.equipment)?e.equipment:s.equipment,services:Array.isArray(e.services)?e.services:s.services,consumables:Array.isArray(e.consumables)?e.consumables:s.consumables,cleaning_staff_history:Array.isArray(e.cleaning_staff_history)?e.cleaning_staff_history:s.cleaning_staff_history}}const Pv="chart_",zv=(()=>{var e;return typeof window<"u"&&((e=window.location)==null?void 0:e.hostname)==="localhost"?"/api":"https://51bhoxkbxd.execute-api.ap-northeast-1.amazonaws.com/prod"})();function Jp(e){return`${Pv}${e}`}function Av(){try{const e=localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token;return{"Content-Type":"application/json",...e?{Authorization:`Bearer ${e}`}:{}}}catch{return{"Content-Type":"application/json"}}}function Mv(e){if(!e)return null;try{const t=localStorage.getItem(Jp(e));if(!t)return null;const n=JSON.parse(t);return n&&typeof n=="object"?n:null}catch{return null}}function rc(e,t){if(!e||!t)return;const n={...t,store_id:e,updated_at:new Date().toISOString()};localStorage.setItem(Jp(e),JSON.stringify(n))}function Fl(e,t={}){if(!e)throw new Error("karteStorage: storeId is required");const n=Mv(e);if(n)return $v(n,e,t);const s=nc(e,t);return rc(e,s),s}function Lv(e,t={}){if(!e)throw new Error("karteStorage: storeId is required");const n=nc(e,t);return rc(e,n),n}async function Du(e,t){rc(e,t);try{await fetch(`${zv}/kartes`,{method:"POST",headers:Av(),body:JSON.stringify({store_id:e,...t})})}catch(n){console.warn("[karteStorage] API save failed (optional)",n)}}const Rv=["","","","","","","",""],Ov=["","",""],Dv=["","","3","6","1","",""],Iv=["","","",""],Iu=[{id:1,title:"",category:""},{id:2,title:"U",category:""},{id:3,title:"",category:""},{id:4,title:"",category:""},{id:5,title:"",category:""},{id:6,title:"",category:""},{id:7,title:"",category:""},{id:8,title:"",category:""},{id:9,title:"",category:""},{id:10,title:"HACCP",category:""}],Qp=f.forwardRef(function({storeId:t,store:n,brands:s=[],clients:a=[],getBrandName:l,getClientName:i,onBack:o,isLocked:c=!1},d){var O,ae;const[u,m]=f.useState(()=>Fl(t,n||{})),[h,x]=f.useState([]),[v,S]=f.useState(!0),[N,g]=f.useState(!1),[p,y]=f.useState(""),[_,w]=f.useState(""),[P,D]=f.useState(""),[H,I]=f.useState(""),F=f.useRef(!0),z=f.useRef(null),k=n||{},Y=k&&l?l(k):k.brand_name??((O=s.find(B=>String(B.id)===String(k.brand_id)))==null?void 0:O.name)??"";k&&i?i(k):k.client_name??((ae=a.find(B=>String(B.id)===String(k.client_id)))==null?void 0:ae.name)??k.company_name;const G=(k.address??[k.postcode,k.pref,k.city,k.address1,k.address2].filter(Boolean).join(" "))||"",C=f.useCallback(()=>{try{const B=Fl(t,n||{});m(B)}catch(B){console.warn("[KartePanel] loadKarte failed",B),m(Fl(t,{}))}},[t,n]);f.useEffect(()=>{C()},[t,n,C]),f.useEffect(()=>{let B=!1;return S(!0),fetch("/misogi/data/service_items.json").then(A=>A.ok?A.json():[]).then(A=>{B||x(Array.isArray(A)&&A.length>0?A:Iu)}).catch(()=>{B||x(Iu)}).finally(()=>{B||S(!1)}),()=>{B=!0}},[]),f.useEffect(()=>{if(!t||c)return;if(F.current){F.current=!1,z.current=JSON.stringify(u);return}if(JSON.stringify(u)===z.current)return;const ne=setTimeout(async()=>{try{await Du(t,u),z.current=JSON.stringify(u),console.log("[KartePanel] Auto-saved karte for store:",t)}catch(A){console.warn("[KartePanel] Auto-save failed:",A)}},1500);return()=>{clearTimeout(ne)}},[u,t,c]);const L=(B,ne)=>m(A=>({...A,[B]:ne})),J=(B,ne)=>m(A=>({...A,[B]:ne(A[B]||[])})),b=B=>{J("services",ne=>ne.includes(B)?ne.filter(A=>A!==B):[...ne,B])},$=B=>{J("equipment",ne=>ne.includes(B)?ne.filter(A=>A!==B):[...ne,B])},V=()=>{p.trim()&&(J("consumables",B=>[...B,{name:p.trim(),quantity:_.trim(),notes:""}]),y(""),w(""))},ee=B=>J("consumables",ne=>ne.filter((A,Q)=>Q!==B)),se=()=>{P.trim()&&(J("cleaning_staff_history",B=>[...B,{worker_name:P.trim(),start_date:H||null,end_date:null}]),D(""),I(""))},ie=B=>J("cleaning_staff_history",ne=>ne.filter((A,Q)=>Q!==B)),ue=f.useCallback(async()=>{if(!(!t||c)){g(!0);try{await Du(t,u),z.current=JSON.stringify(u)}catch(B){throw console.error("[KartePanel] Save failed:",B),B}finally{g(!1)}}},[t,u,c]);f.useImperativeHandle(d,()=>({save:ue}),[ue]);const we=h.reduce((B,ne)=>{const A=ne.category||"";return B[A]||(B[A]=[]),B[A].push(ne),B},{}),M=(B,ne,A="")=>r.jsxs("div",{className:"office-karte-panel-field",children:[r.jsx("label",{children:B}),r.jsx("span",{className:"office-karte-panel-value",children:ne||"-"})]},B),j=(B,ne,A,Q="text")=>r.jsxs("div",{className:"office-karte-panel-field",children:[r.jsx("label",{children:B}),r.jsx("input",{type:Q,value:u[ne]??"",onChange:he=>L(ne,he.target.value),placeholder:A,disabled:c,className:"office-karte-panel-input"})]},ne),q=(B,ne,A)=>r.jsxs("div",{className:"office-karte-panel-field",children:[r.jsx("label",{children:B}),r.jsx("textarea",{value:u[ne]??"",onChange:Q=>L(ne,Q.target.value),placeholder:A,rows:2,disabled:c,className:"office-karte-panel-input"})]},ne),W=(B,ne,A)=>r.jsxs("div",{className:"office-karte-panel-field",children:[r.jsx("label",{children:B}),r.jsxs("select",{value:u[ne]??"",onChange:Q=>L(ne,Q.target.value),disabled:c,className:"office-karte-panel-input",children:[r.jsx("option",{value:"",children:""}),A.map(Q=>r.jsx("option",{value:Q.value||Q,children:Q.label||Q},Q.value||Q))]})]},ne);return r.jsx("div",{className:"office-client-karte-panel",style:{opacity:c?.6:1,pointerEvents:c?"none":"auto"},children:r.jsxs("div",{className:"office-karte-panel-body",children:[r.jsxs("section",{className:"office-karte-panel-section",children:[r.jsx("h3",{className:"office-karte-panel-section-title",children:""}),r.jsxs("div",{className:"office-karte-panel-grid",children:[M("",Y),M("",k.name),M("",k.contact_person||k.contact_name),M("",G),M("",k.phone||k.tel),M("",k.email||k.email_address)]}),r.jsxs("div",{className:"office-karte-panel-grid",children:[W("","plan_frequency",Ev),j(" No.","security_box_number","1")]})]}),r.jsxs("section",{className:"office-karte-panel-section",children:[r.jsx("h3",{className:"office-karte-panel-section-title",children:""}),r.jsx("h4",{className:"office-karte-panel-subtitle",children:""}),r.jsxs("div",{className:"office-karte-panel-grid",children:[q("","issue",""),q("","environment",""),j("","staff_min",""),j("","staff_max",""),j("","hours","11:0023:30"),j("","cleaning_frequency","30")]}),r.jsx("h4",{className:"office-karte-panel-subtitle",children:""}),r.jsxs("div",{className:"office-karte-panel-grid",children:[j("","area_sqm","120"),j("","area_tatami","72"),j("","ceiling_height","2.6 m"),j("","electrical_amps","60 A"),j("","toilet_count","2 "),j("","aircon_count","3"),j("","wall_material",""),j("","floor_material",""),j("","breaker_location",""),j("","key_location",""),j("","entrances","1/1"),W("","staff_room",Ov.map(B=>({value:B,label:B}))),j(" URL","breaker_photo_url",""),j(" URL","key_photo_url","")]}),r.jsx("h4",{className:"office-karte-panel-subtitle",children:""}),r.jsx("div",{className:"office-karte-panel-checkgroup",children:["","",""].map(B=>r.jsxs("label",{className:"office-karte-panel-check",children:[r.jsx("input",{type:"checkbox",checked:B===""?u.seat_counter:B===""?u.seat_box:u.seat_zashiki,onChange:ne=>L(B===""?"seat_counter":B===""?"seat_box":"seat_zashiki",ne.target.checked),disabled:c}),r.jsx("span",{children:B})]},B))}),r.jsx("h4",{className:"office-karte-panel-subtitle",children:""}),r.jsx("div",{className:"office-karte-panel-checkgroup",children:Rv.map(B=>r.jsxs("label",{className:"office-karte-panel-check",children:[r.jsx("input",{type:"checkbox",checked:(u.equipment||[]).includes(B),onChange:()=>$(B),disabled:c}),r.jsx("span",{children:B})]},B))}),r.jsx("h4",{className:"office-karte-panel-subtitle",children:""}),r.jsxs("div",{className:"office-karte-panel-grid",children:[j("","aircon_state","31"),j("","kitchen_state",""),j("","hotspots",""),j("","intake_notes","NG"),j("","last_clean","//","date"),W("","plan",Dv.map(B=>({value:B,label:B}))),W("","self_rating",Iv.map(B=>({value:B,label:B})))]})]}),r.jsxs("section",{className:"office-karte-panel-section",children:[r.jsx("h3",{className:"office-karte-panel-section-title",children:""}),v?r.jsx("p",{className:"office-karte-panel-muted",children:"..."}):Object.entries(we).map(([B,ne])=>r.jsxs("div",{className:"office-karte-panel-category",children:[r.jsx("h4",{className:"office-karte-panel-subtitle",children:B}),r.jsx("div",{className:"office-karte-panel-checkgroup",children:ne.map(A=>r.jsxs("label",{className:"office-karte-panel-check",children:[r.jsx("input",{type:"checkbox",checked:(u.services||[]).includes(A.title),onChange:()=>b(A.title),disabled:c}),r.jsx("span",{children:A.title})]},A.id||A.title))})]},B))]}),r.jsxs("section",{className:"office-karte-panel-section",children:[r.jsx("h3",{className:"office-karte-panel-section-title",children:""}),(u.consumables||[]).length===0?r.jsx("p",{className:"office-karte-panel-muted",children:""}):r.jsx("ul",{className:"office-karte-panel-list",children:u.consumables.map((B,ne)=>r.jsxs("li",{className:"office-karte-panel-list-item",children:[r.jsxs("span",{children:[B.name,B.quantity?`${B.quantity}`:""]}),r.jsx("button",{type:"button",onClick:()=>ee(ne),disabled:c,className:"office-karte-panel-list-remove","aria-label":"",children:""})]},ne))}),r.jsxs("div",{className:"office-karte-panel-inline",children:[r.jsx("input",{type:"text",value:p,onChange:B=>y(B.target.value),disabled:c,placeholder:"",className:"office-karte-panel-input office-karte-panel-input--small"}),r.jsx("input",{type:"text",value:_,onChange:B=>w(B.target.value),disabled:c,placeholder:"",className:"office-karte-panel-input office-karte-panel-input--small"}),r.jsx("button",{type:"button",onClick:V,disabled:c,className:"office-karte-panel-btn office-karte-panel-btn--small",children:""})]})]}),r.jsxs("section",{className:"office-karte-panel-section",children:[r.jsx("h3",{className:"office-karte-panel-section-title",children:""}),(u.cleaning_staff_history||[]).length===0?r.jsx("p",{className:"office-karte-panel-muted",children:""}):r.jsx("ul",{className:"office-karte-panel-list",children:u.cleaning_staff_history.map((B,ne)=>r.jsxs("li",{className:"office-karte-panel-list-item",children:[r.jsxs("span",{children:[B.worker_name||"-"," ",B.start_date?`${B.start_date}`:""]}),r.jsx("button",{type:"button",onClick:()=>ie(ne),disabled:c,className:"office-karte-panel-list-remove","aria-label":"",children:""})]},ne))}),r.jsxs("div",{className:"office-karte-panel-inline",children:[r.jsx("input",{type:"text",value:P,onChange:B=>D(B.target.value),disabled:c,placeholder:"",className:"office-karte-panel-input office-karte-panel-input--small"}),r.jsx("input",{type:"date",value:H,onChange:B=>I(B.target.value),disabled:c,className:"office-karte-panel-input office-karte-panel-input--small"}),r.jsx("button",{type:"button",onClick:se,disabled:c,className:"office-karte-panel-btn office-karte-panel-btn--small",children:""})]})]}),r.jsxs("section",{className:"office-karte-panel-section",children:[r.jsx("h3",{className:"office-karte-panel-section-title",children:""}),q("","notes","")]})]})})}),qi="admin-schedule-appointments",Bu="admin-schedule-cleaners",Fu="admin-schedule-blocks";var yd;const Bt=typeof window<"u"&&((yd=window.location)==null?void 0:yd.hostname)==="localhost"?"/api":"https://51bhoxkbxd.execute-api.ap-northeast-1.amazonaws.com/prod",Ir=[{key:"booked",label:"",colorClass:"s-booked"},{key:"checked_in",label:"",colorClass:"s-checkedin"},{key:"in_progress",label:"",colorClass:"s-inprogress"},{key:"done",label:"",colorClass:"s-done"},{key:"cancelled",label:"",colorClass:"s-cancelled"}],Gp=["1","2","3","6","12","",""],Xi=[{key:"pending",label:"",colorClass:"contact-pending"},{key:"done",label:"",colorClass:"contact-done"},{key:"unreachable",label:"",colorClass:"contact-unreachable"}],Bv=["","","","","","Noemi",""],Fv=["","","","",""];function Zi(e){if(!e||typeof e!="string")return"cleaning";const t=e.trim();for(const n of Fv)if(t.includes(n))return"maintenance";for(const n of Bv)if(t.includes(n))return"cleaning";return"cleaning"}function Uu(e,t){return[...e].sort((n,s)=>{const a=n.name&&n.name.includes(t)?0:1,l=s.name&&s.name.includes(t)?0:1;return a-l})}const Uv=[{id:"c1",name:"",unit:"cleaning"},{id:"c2",name:"",unit:"cleaning"},{id:"c3",name:"",unit:"maintenance"},{id:"c4",name:"",unit:"maintenance"}];function Ul(e,t){try{const n=localStorage.getItem(e);return n?JSON.parse(n):t}catch{return t}}function Wl(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.warn("localStorage save failed",n)}}function Je(e){return String(e).padStart(2,"0")}function Te(e){const t=Math.round(e)%1440,n=Math.floor(t/60),s=Math.round(t%60);return`${Je(n)}:${Je(s)}`}function Ka(e){const[t,n]=e.split(":").map(s=>parseInt(s,10));return t*60+n}function Gt(e){return Math.round(e/30)*30}function Wu(e,t){return Math.max(e,600)<Math.min(t,1260)}function la(e){return e>=1260?e-1260:e+1440-1260}function Hu(e,t,n){return Math.max(t,Math.min(n,e))}function Zr(){const e=new Date;return`${e.getFullYear()}-${Je(e.getMonth()+1)}-${Je(e.getDate())}`}function lr(e){const t=new Date(e+"T00:00:00"),n=["","","","","","",""][t.getDay()];return`${t.getMonth()+1}/${t.getDate()}(${n})`}function Wv(e){const t=new Date(e+"T00:00:00"),n=t.getDay(),s=new Date(t);s.setDate(s.getDate()-n);const a=[];for(let l=0;l<7;l++){const i=new Date(s);i.setDate(s.getDate()+l),a.push(`${i.getFullYear()}-${Je(i.getMonth()+1)}-${Je(i.getDate())}`)}return a}function Hv(e){const t=Wv(e),n=new Date(t[0]+"T00:00:00"),s=new Date(t[6]+"T00:00:00");return`${n.getMonth()+1}/${n.getDate()}${s.getMonth()+1}/${s.getDate()}`}async function Vv(e,t,n,s,a){if(e.length===0){alert("");return}if(s.length===0){alert("");return}const l=["","","","",""],i=["booked","checked_in","in_progress","done"],o=[9*60,10*60,11*60,13*60,14*60,15*60,16*60],c=localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token,d=a.replace(/\/$/,""),u=[];for(let h=0;h<Math.min(5,s.length);h++){const x=s[Math.floor(Math.random()*s.length)];u.find(v=>v.id===x.id)||u.push(x)}const m=[];for(let h=0;h<u.length;h++){const x=u[h];try{const v=await fetch(`${d}/stores?client_id=${x.id}`,{headers:c?{Authorization:`Bearer ${c}`}:{},cache:"no-store"});let S=[];if(v.ok){const H=await v.json();S=Array.isArray(H)?H:(H==null?void 0:H.items)??[]}let N=null,g="",p=null;S.length>0?(N=S[Math.floor(Math.random()*S.length)],g=N.name||N.store_name||"",p=N.id):g=x.name||x.client_name||`${h+1}`,g||(g=`${h+1}`);const y=e[Math.floor(Math.random()*e.length)],_=o[Math.floor(Math.random()*o.length)],w=[30,60,90][Math.floor(Math.random()*3)],P=Math.min(_+w,24*60),D={id:`random_${Date.now()}_${h}`,schedule_id:tr("sch"),date:t,cleaner_id:y.id,start_min:_,end_min:P,target_name:g,work_type:l[Math.floor(Math.random()*l.length)],status:i[Math.floor(Math.random()*i.length)],client_id:x.id,store_id:p,memo:"",created_at:Date.now()-h*6e4,contact_note:"",contact_last_at:null,contact_status:"pending",contact_reminders:[]};m.push(D)}catch(v){console.warn(`[createRandomAppointments] Failed to get stores for client ${x.id}:`,v);const S=e[Math.floor(Math.random()*e.length)],N=o[Math.floor(Math.random()*o.length)],g=[30,60,90][Math.floor(Math.random()*3)],p=Math.min(N+g,24*60),y={id:`random_${Date.now()}_${h}`,schedule_id:tr("sch"),date:t,cleaner_id:S.id,start_min:N,end_min:p,target_name:x.name||x.client_name||`${h+1}`,work_type:l[Math.floor(Math.random()*l.length)],status:i[Math.floor(Math.random()*i.length)],client_id:x.id,store_id:null,memo:"",created_at:Date.now()-h*6e4,contact_note:"",contact_last_at:null,contact_status:"pending",contact_reminders:[]};m.push(y)}}n(h=>[...h,...m]),alert(`${m.length}`)}async function Kv(e,t,n,s,a,l){if(e.length===0){alert("");return}if(a.length===0){alert("");return}const i=["","","","",""],o=["booked","checked_in","in_progress","done"],c=[21*60,22*60,23*60,0,1*60,2*60,3*60,4*60,5*60,6*60],d=4*60,u=localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token,m=l.replace(/\/$/,""),h=[],x=Math.min(8,a.length);for(let g=0;g<x;g++){const p=a[Math.floor(Math.random()*a.length)];h.find(y=>y.id===p.id)||h.push(p)}const v=[],S=n||[],N=new Map;for(const g of S)if(g.date===t){const p=N.get(g.cleaner_id)||[];p.push({start_min:g.start_min,end_min:g.end_min}),N.set(g.cleaner_id,p)}for(let g=0;g<h.length;g++){const p=h[g];try{const y=await fetch(`${m}/stores?client_id=${p.id}`,{headers:u?{Authorization:`Bearer ${u}`}:{},cache:"no-store"});let _=[];if(y.ok){const C=await y.json();_=Array.isArray(C)?C:(C==null?void 0:C.items)??[]}let w=null,P="",D=null;_.length>0?(w=_[Math.floor(Math.random()*_.length)],P=w.name||w.store_name||"",D=w.id):P=p.name||p.client_name||`${g+1}`,P||(P=`${g+1}`);const H=[...e].sort(()=>Math.random()-.5);let I=null,F=null,z=null,k=null;for(const C of H){const L=C.id,J=N.get(L)||[],b=c.filter($=>($+d)%1440<=10*60||$>=21*60);for(let $=0;$<20;$++){let V=b[Math.floor(Math.random()*b.length)];V=Gt(V);const ee=(Math.random()-.5)*60;let se=Math.max(180,Math.min(300,d+ee));se=Gt(se);let ie=V+se;if(V>=21*60){if(ie>24*60){const M=ie-1440;M>10*60?ie=10*60:ie=M}}else ie=Math.min(ie,10*60);if(ie=Gt(ie),![...J,...v.filter(M=>M.cleaner_id===L).map(M=>({start_min:M.start_min,end_min:M.end_min}))].some(M=>Ya(V,ie,M.start_min,M.end_min))){I=C,F=V,z=ie,k=se;break}}if(I)break}if(!I||F===null||z===null){console.warn(`[createGoldenTimeAppointments] ${g+1}`);continue}const Y={id:`golden_${Date.now()}_${g}`,schedule_id:tr("sch"),date:t,cleaner_id:I.id,start_min:F,end_min:z,target_name:P,work_type:i[Math.floor(Math.random()*i.length)],status:o[Math.floor(Math.random()*o.length)],client_id:p.id,store_id:D,memo:"",created_at:Date.now()-g*6e4,contact_note:"",contact_last_at:null,contact_status:"pending",contact_reminders:[]};v.push(Y);const G=N.get(I.id)||[];G.push({start_min:F,end_min:z}),N.set(I.id,G)}catch(y){console.warn(`[createGoldenTimeAppointments] Failed to get stores for client ${p.id}:`,y);const _=p.name||p.client_name||`${g+1}`,w=[...e].sort(()=>Math.random()-.5);let P=null,D=null,H=null;for(const z of w){const k=z.id,Y=N.get(k)||[],G=c.filter(C=>(C+d)%1440<=10*60||C>=21*60);for(let C=0;C<20;C++){let L=G[Math.floor(Math.random()*G.length)];L=Gt(L);const J=(Math.random()-.5)*60;let b=Math.max(180,Math.min(300,d+J));b=Gt(b);let $=L+b;if(L>=21*60){if($>24*60){const se=$-1440;se>10*60?$=10*60:$=se}}else $=Math.min($,10*60);if($=Gt($),![...Y,...v.filter(se=>se.cleaner_id===k).map(se=>({start_min:se.start_min,end_min:se.end_min}))].some(se=>Ya(L,$,se.start_min,se.end_min))){P=z,D=L,H=$;break}}if(P)break}if(!P||D===null||H===null){console.warn(`[createGoldenTimeAppointments] ${g+1}`);continue}const I={id:`golden_${Date.now()}_${g}`,schedule_id:tr("sch"),date:t,cleaner_id:P.id,start_min:D,end_min:H,target_name:_,work_type:i[Math.floor(Math.random()*i.length)],status:o[Math.floor(Math.random()*o.length)],client_id:p.id,store_id:null,memo:"",created_at:Date.now()-g*6e4,contact_note:"",contact_last_at:null,contact_status:"pending",contact_reminders:[]};v.push(I);const F=N.get(P.id)||[];F.push({start_min:D,end_min:H}),N.set(P.id,F)}}s(g=>[...g,...v]),alert(`${v.length}21:0010:004`)}async function Yv(e,t,n,s,a,l){if(e.length===0){alert("");return}if(a.length===0){alert("");return}const i=localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token,o=l.replace(/\/$/,""),c=a[Math.floor(Math.random()*a.length)];try{const d=await fetch(`${o}/stores?client_id=${c.id}`,{headers:i?{Authorization:`Bearer ${i}`}:{},cache:"no-store"});let u=[];if(d.ok){const H=await d.json();u=Array.isArray(H)?H:(H==null?void 0:H.items)??[]}let m=null,h="",x=null;u.length>0?(m=u[Math.floor(Math.random()*u.length)],h=m.name||m.store_name||"",x=m.id):h=c.name||c.client_name||"1",h||(h="1");const v=e[Math.floor(Math.random()*e.length)],S=10*60,N=21*60,g=4*60,p=Math.floor(Math.random()*((N-S-g)/30))*30+S,y=Gt(p),_=Gt(Math.min(y+g,N));if((n||[]).filter(H=>H.date===t&&H.cleaner_id===v.id&&Ya(y,_,H.start_min,H.end_min)).length>0){alert("");return}const D={id:`appt_${Date.now()}`,schedule_id:tr("sch"),date:t,cleaner_id:v.id,cleaner_ids:[v.id],start_min:y,end_min:_,target_name:h,work_type:"1",status:"booked",memo:"",created_at:Date.now(),contact_note:"",contact_last_at:null,contact_status:"pending",contact_reminders:[],store_id:x||null,client_id:c.id||null,brand_id:(m==null?void 0:m.brand_id)||null};s(H=>[...H,D]),alert(`1${Te(y)}${Te(_)}${h}`)}catch(d){console.error(`[createDaytimeAppointment] Failed to get stores for client ${c.id}:`,d),alert("")}}function Jv(e){e([]),localStorage.removeItem(qi)}function Qv(e){return[{cleaner_id:"c1",start:"09:00",end:"09:30",target_name:"A",work_type:"",status:"booked"},{cleaner_id:"c1",start:"10:00",end:"10:30",target_name:"B",work_type:"",status:"checked_in"},{cleaner_id:"c2",start:"09:30",end:"10:00",target_name:"C",work_type:"",status:"in_progress"},{cleaner_id:"c2",start:"10:15",end:"10:45",target_name:"D",work_type:"",status:"booked"},{cleaner_id:"c3",start:"13:00",end:"13:30",target_name:"E",work_type:"",status:"done"},{cleaner_id:"c4",start:"15:00",end:"15:30",target_name:"F",work_type:"",status:"cancelled"}].map((n,s)=>{const a=`a_${e}_${s}`;return{id:a,schedule_id:a,date:e,cleaner_id:n.cleaner_id,start_min:Ka(n.start),end_min:Ka(n.end),target_name:n.target_name,work_type:n.work_type,status:n.status,memo:"",created_at:Date.now()-s*6e4,contact_note:"",contact_last_at:null,contact_status:"pending",contact_reminders:[]}})}function eo(e){return{...e,schedule_id:e.schedule_id??e.id,contact_note:e.contact_note??"",contact_last_at:e.contact_last_at??null,contact_status:e.contact_status??"pending",contact_reminders:e.contact_reminders??[],cleaner_ids:e.cleaner_ids||(e.cleaner_id?[e.cleaner_id]:[])}}function ir(e){return Ir.find(t=>t.key===e)??Ir[0]}function to(e){return Xi.find(t=>t.key===e)??Xi[0]}function Gv(e){if(!e)return null;const t=typeof e=="number"?new Date(e):new Date(e);return Number.isNaN(t.getTime())?null:`${t.getMonth()+1}/${t.getDate()} ${Je(t.getHours())}:${Je(t.getMinutes())}`}function Ya(e,t,n,s){return e<s&&n<t}function es(e){const t=`${e.date}T${Je(Math.floor(e.start_min/60))}:${Je(e.start_min%60)}:00`,n=`${e.date}T${Je(Math.floor(e.end_min/60))}:${Je(e.end_min%60)}:00`;return{id:e.id,schedule_id:e.schedule_id??e.id,assignee_id:e.cleaner_id,start_at:t,end_at:n,title:e.target_name,kind:"job"}}function qp(e,t){const n=new Date(t+"T00:00:00").getTime(),s=new Date(t+"T23:59:59.999").getTime(),a=Date.parse(e.start_at),l=Date.parse(e.end_at);if(Number.isNaN(a)||Number.isNaN(l)||a>=s||l<=n)return null;const i=Math.max(a,n),o=Math.min(l,s),c=Math.round((i-n)/6e4),d=Math.round((o-n)/6e4);return{start_min:c,end_min:d}}function qv(e){const t=new Map;for(const s of e){const a=t.get(s.cleaner_id)??[];a.push(s),t.set(s.cleaner_id,a)}const n=new Set;for(const[,s]of t.entries()){const a=[...s].sort((l,i)=>l.start_min-i.start_min);for(let l=0;l<a.length;l++)for(let i=l+1;i<a.length&&!(a[i].start_min>=a[l].end_min);i++)Ya(a[l].start_min,a[l].end_min,a[i].start_min,a[i].end_min)&&(n.add(a[l].id),n.add(a[i].id))}return n}function Xv(){var uc,dc;const[e,t]=f.useState(()=>Ul(Bu,Uv)),[n,s]=f.useState(Zr()),[a,l]=f.useState("day"),[i,o]=f.useState(""),[c,d]=f.useState("all"),[u,m]=f.useState("all"),[h,x]=f.useState("all"),[v,S]=f.useState("all"),[N,g]=f.useState(((uc=e[0])==null?void 0:uc.id)??"c1"),p=f.useMemo(()=>{const T=e.map(Z=>({...Z,unit:Z.unit??Zi(Z.name)})),R=Uu(T.filter(Z=>Z.unit==="cleaning"),""),X=Uu(T.filter(Z=>Z.unit==="maintenance"),"");return[...R,...X]},[e]),y=f.useMemo(()=>new Set(p.filter(T=>T.unit==="cleaning").map(T=>T.id)),[p]),_=f.useMemo(()=>new Set(p.filter(T=>T.unit==="maintenance").map(T=>T.id)),[p]),w=f.useMemo(()=>c==="cleaning"?p.filter(T=>T.unit==="cleaning"):c==="maintenance"?p.filter(T=>T.unit==="maintenance"):p,[p,c]),P=f.useMemo(()=>{const T=p.filter(X=>X.unit==="cleaning"),R=p.filter(X=>X.unit==="maintenance");return{cleaning:T,maintenance:R}},[p]),[D,H]=f.useState(()=>{const T=Ul(qi,null);return T&&Array.isArray(T)&&T.length>0?T.map(eo):Qv(Zr())}),[I,F]=f.useState(()=>Ul(Fu,[])),[z,k]=f.useState(null),[Y,G]=f.useState(()=>{const T=localStorage.getItem("admin-schedule-karte-dock-height");return T?parseInt(T,10):320}),[C,L]=f.useState(!1),[J,b]=f.useState(null),[$,V]=f.useState([]),[ee,se]=f.useState([]),[ie,ue]=f.useState([]),[we,M]=f.useState(!1),j=f.useRef(null);f.useEffect(()=>{Wl(qi,D)},[D]),f.useEffect(()=>{Wl(Bu,e)},[e]),f.useEffect(()=>{Wl(Fu,I)},[I]),f.useEffect(()=>{localStorage.setItem("admin-schedule-karte-dock-height",String(Y))},[Y]),f.useEffect(()=>{let T=!1;const R=Bt.replace(/\/$/,"");return fetch(`${R}/workers?t=${Date.now()}`,{cache:"no-store"}).then(X=>X.ok?X.json():Promise.reject(new Error(X.statusText))).then(X=>{if(T)return;const _e=((Array.isArray(X)?X:(X==null?void 0:X.items)??(X==null?void 0:X.workers)??[]).filter(Ee=>Ee.department&&String(Ee.department).trim()===""||Ee.parent_department&&String(Ee.parent_department).trim()==="")||[]).map(Ee=>({id:Ee.id,name:Ee.name||Ee.email||Ee.id||"",unit:Zi(Ee.name||Ee.email||Ee.id)})).filter(Ee=>Ee.id),Ke=[..._e.filter(Ee=>Ee.unit==="cleaning"),..._e.filter(Ee=>Ee.unit==="maintenance")];Ke.length>0&&t(Ke)}).catch(X=>{T||console.warn("[AdminScheduleTimeline] workers API failed, keeping current cleaners",X)}),()=>{T=!0}},[]),f.useEffect(()=>{let T=!1;const R=localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token,X=Bt.replace(/\/$/,"");return fetch(`${X}/clients`,{headers:R?{Authorization:`Bearer ${R}`}:{},cache:"no-store"}).then(Z=>Z.ok?Z.json():Promise.reject(new Error(Z.statusText))).then(Z=>{if(T)return;const Ne=Array.isArray(Z)?Z:(Z==null?void 0:Z.items)??[];se(Ne)}).catch(Z=>{T||console.warn("[AdminScheduleTimeline] clients API failed",Z)}),()=>{T=!0}},[]),f.useEffect(()=>{let T=!1;const R=localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token,X=Bt.replace(/\/$/,"");return fetch(`${X}/brands`,{headers:R?{Authorization:`Bearer ${R}`}:{},cache:"no-store"}).then(Z=>Z.ok?Z.json():Promise.reject(new Error(Z.statusText))).then(Z=>{if(T)return;const Ne=Array.isArray(Z)?Z:(Z==null?void 0:Z.items)??[];V(Ne)}).catch(Z=>{T||console.warn("[AdminScheduleTimeline] brands API failed",Z)}),()=>{T=!0}},[]),f.useEffect(()=>{let T=!1;const R=localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token,X=Bt.replace(/\/$/,"");return fetch(`${X}/stores`,{headers:R?{Authorization:`Bearer ${R}`}:{},cache:"no-store"}).then(Z=>Z.ok?Z.json():Promise.reject(new Error(Z.statusText))).then(Z=>{if(T)return;const Ne=Array.isArray(Z)?Z:(Z==null?void 0:Z.items)??[];ue(Ne)}).catch(Z=>{T||console.warn("[AdminScheduleTimeline] stores API failed",Z)}),()=>{T=!0}},[]),f.useEffect(()=>{if(!(z!=null&&z.store_id)){b(null);return}let T=!1;const R=localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token,X=Bt.replace(/\/$/,"");return fetch(`${X}/stores/${z.store_id}`,{headers:R?{Authorization:`Bearer ${R}`}:{},cache:"no-store"}).then(Z=>{if(!Z.ok){if(Z.status===404)return fetch(`${X}/stores?client_id=${z.client_id||""}`,{headers:R?{Authorization:`Bearer ${R}`}:{},cache:"no-store"}).then(Ne=>{if(Ne.ok)return Ne.json().then(_e=>{const Ee=(Array.isArray(_e)?_e:(_e==null?void 0:_e.items)??[]).find(Fe=>String(Fe.id)===String(z.store_id));if(Ee)return Ee;throw new Error("Store not found")});throw new Error("Store not found")});throw new Error(`HTTP ${Z.status}`)}return Z.json()}).then(Z=>{T||b(Z)}).catch(Z=>{T||(console.warn("[AdminScheduleTimeline] store API failed",Z),b(null))}),()=>{T=!0}},[z==null?void 0:z.store_id,z==null?void 0:z.client_id]),f.useEffect(()=>{const T=new Set(e.map(R=>R.id));e.length>0&&!T.has(N)&&g(e[0].id)},[e]),f.useEffect(()=>{if(u==="all")return;new Set(w.map(R=>R.id)).has(u)||m("all")},[c,w,u]);const q=f.useMemo(()=>qv(D),[D]),W=Zr(),O=f.useMemo(()=>{const T=kv().startOf("day");return Array.from({length:8},(R,X)=>T.add(X,"day").format("YYYY-MM-DD"))},[W]),ae=f.useMemo(()=>O.map(T=>{const R=new Date(T+"T00:00:00");return R.setDate(R.getDate()-7),`${R.getFullYear()}-${Je(R.getMonth()+1)}-${Je(R.getDate())}`}),[O]),B=f.useMemo(()=>{const T=i.trim().toLowerCase();return D.filter(R=>{var Ne;if(R.date!==n||c==="cleaning"&&!y.has(R.cleaner_id)||c==="maintenance"&&!_.has(R.cleaner_id)||u!=="all"&&R.cleaner_id!==u||h!=="all"&&R.status!==h||v!=="all"&&R.work_type!==v)return!1;if(!T)return!0;const X=((Ne=p.find(_e=>_e.id===R.cleaner_id))==null?void 0:Ne.name)??"";return`${R.target_name} ${R.work_type} ${X}`.toLowerCase().includes(T)})},[D,n,i,c,u,h,v,p,y,_]),ne=f.useMemo(()=>{const T=new Set(O),R=i.trim().toLowerCase();return D.filter(X=>{var _e;if(!T.has(X.date)||c==="cleaning"&&!y.has(X.cleaner_id)||c==="maintenance"&&!_.has(X.cleaner_id)||u!=="all"&&X.cleaner_id!==u||h!=="all"&&X.status!==h||v!=="all"&&X.work_type!==v)return!1;if(!R)return!0;const Z=((_e=p.find(Ke=>Ke.id===X.cleaner_id))==null?void 0:_e.name)??"";return`${X.target_name} ${X.work_type} ${Z}`.toLowerCase().includes(R)})},[D,O,i,c,u,h,v,p,y,_]),A=f.useMemo(()=>{const T=B.length,R=new Map;for(const X of B)R.set(X.status,(R.get(X.status)??0)+1);return{total:T,byStatus:R}},[B]),[Q,he]=f.useState({open:!1,appt:null,mode:"view"}),[pe,qe]=f.useState(!1),[Oe,U]=f.useState(null),[re,ye]=f.useState(null),[ve,fe]=f.useState(!1),[le,ce]=f.useState(!1),[$e,be]=f.useState(null),[Se,ge]=f.useState(null),[ht,Yt]=f.useState(null),[gn,or]=f.useState(null),[E,K]=f.useState({open:!1}),[xe,je]=f.useState(!1);function de(T,R=null){var _e,Ke,Ee,Fe;let Z=R??540;Z=Gt(Z);let Ne=Math.min(Z+30,1440);Ne=Gt(Ne),he({open:!0,mode:"create",appt:{id:`new_${Date.now()}`,schedule_id:tr("sch"),date:n,cleaner_id:T??((_e=p[0])==null?void 0:_e.id)??((Ke=e[0])==null?void 0:Ke.id)??"c1",cleaner_ids:T?[T]:(Ee=p[0])!=null&&Ee.id?[p[0].id]:(Fe=e[0])!=null&&Fe.id?[e[0].id]:["c1"],start_min:Z,end_min:Ne,target_name:"",work_type:"1",status:"booked",memo:"",created_at:Date.now(),contact_note:"",contact_last_at:null,contact_status:"pending",contact_reminders:[]}})}function ze(T){he({open:!0,mode:"view",appt:{...T}})}function me(){he({open:!1,appt:null,mode:"view"}),ye(null)}function Ae(T){ye(null);const R=T.cleaner_ids||(T.cleaner_id?[T.cleaner_id]:[]);if(R.length===0){ye("1");return}if(D.some(Z=>Z.id===T.id)){const Z=[es({...T,cleaner_id:R[0],schedule_id:T.schedule_id??T.id})],_e=D.filter(Fe=>Fe.date===T.date&&Fe.id!==T.id).map(es),Ke=Object.fromEntries(p.map(Fe=>[Fe.id,Fe.name])),Ee=Ou({candidateAppointments:Z,existingAppointments:_e,blocks:I,userIdToName:Ke});if(Ee.length>0){ye(`409 Conflict
${Ee.map(Fe=>Fe.message).join(`
`)}`),fe(!0),setTimeout(()=>{fe(!1)},3e3);return}H(Fe=>Fe.map(nt=>nt.id===T.id?{...T,cleaner_id:R[0],cleaner_ids:R,schedule_id:T.schedule_id??T.id}:nt)),me()}else{const Z=R.map((nt,cr)=>{const fl=cr===0?T.id:`new_${Date.now()}_${cr}`;return{...T,id:fl,cleaner_id:nt,cleaner_ids:R,schedule_id:cr===0?T.schedule_id??T.id:tr("sch")}}),Ne=Z.map(nt=>es(nt)),Ke=D.filter(nt=>nt.date===T.date).map(es),Ee=Object.fromEntries(p.map(nt=>[nt.id,nt.name])),Fe=Ou({candidateAppointments:Ne,existingAppointments:Ke,blocks:I,userIdToName:Ee});if(Fe.length>0){ye(`409 Conflict
${Fe.map(nt=>nt.message).join(`
`)}`),fe(!0),setTimeout(()=>{fe(!1)},3e3);return}H(nt=>[...nt,...Z]),me()}}function Me(T){var X;const R=(X=D.find(Z=>Z.id===T))==null?void 0:X.schedule_id;H(Z=>Z.filter(Ne=>Ne.id!==T)),Oe===T&&U(null),(z==null?void 0:z.schedule_id)===R&&k(null),me()}function Hr(T){k(T)}function zt(){k(null)}function rm(){k(null)}async function sm(){if(j.current){M(!0);try{await j.current.save(),alert("")}catch(T){console.error("[AdminScheduleTimelinePage] Failed to save karte:",T),alert("")}finally{M(!1)}}}function ac(T){var _e,Ke;T.preventDefault(),T.stopPropagation(),L(!0);const R=T.clientY??((Ke=(_e=T.touches)==null?void 0:_e[0])==null?void 0:Ke.clientY),X=Y,Z=Ee=>{var nt,cr;Ee.preventDefault();const Fe=Ee.clientY??((cr=(nt=Ee.touches)==null?void 0:nt[0])==null?void 0:cr.clientY);if(Fe!==void 0&&R!==void 0){const fl=R-Fe,cm=Math.max(200,Math.min(window.innerHeight-100,X+fl));G(cm)}},Ne=()=>{L(!1),document.removeEventListener("mousemove",Z),document.removeEventListener("mouseup",Ne),document.removeEventListener("touchmove",Z),document.removeEventListener("touchend",Ne)};document.addEventListener("mousemove",Z),document.addEventListener("mouseup",Ne),document.addEventListener("touchmove",Z,{passive:!1}),document.addEventListener("touchend",Ne)}function lc(T,R){const Z=R??540,Ne=Math.min(Z+60,1440);or(null),be(T),ge(`${n}T${Te(Z)}`),Yt(`${n}T${Te(Ne)}`),ce(!0)}function ic(){ce(!1),be(null),ge(null),Yt(null),or(null)}function am(T){const R={id:`block_${Date.now()}`,user_id:T.user_id,start_at:T.start_at,end_at:T.end_at,type:T.type,reason_code:T.reason_code??"other",reason_note:T.reason_note??null,visibility:T.visibility??"admin_only"},X=D.map(es),Z=Object.fromEntries(p.map(_e=>[_e.id,_e.name])),Ne=wv({block:R,existingAppointments:X,existingBlocks:I,userIdToName:Z});if(Ne.length>0){or(`409 Conflict
${Ne.map(_e=>_e.message).join(`
`)}`);return}F(_e=>[..._e,R]),ic()}function lm(T,{contact_note:R,contact_status:X}){const Z=new Date().toISOString();H(Ne=>Ne.map(_e=>_e.id===T?{..._e,contact_note:R??_e.contact_note,contact_status:X??_e.contact_status,contact_last_at:Z}:_e))}function im(){s(Zr())}function oc(T){const R=new Date(n+"T00:00:00");R.setDate(R.getDate()+T),s(`${R.getFullYear()}-${Je(R.getMonth()+1)}-${Je(R.getDate())}`)}function cc(T){const R=new Date(n+"T00:00:00");R.setDate(R.getDate()+T*7),s(`${R.getFullYear()}-${Je(R.getMonth()+1)}-${Je(R.getDate())}`)}function om(){s(Zr())}return r.jsxs("div",{className:"report-page admin-schedule-timeline-page","data-job":"admin",children:[r.jsx("div",{className:`report-page-viz ${xe?"hidden":""}`,children:r.jsx(at,{mode:"base",className:"report-page-visualizer"})}),r.jsxs("div",{className:"report-page-content admin-schedule-timeline-content",children:[r.jsx("p",{className:"admin-schedule-timeline-back",children:r.jsx(ke,{to:"/admin/entrance",children:" "})}),r.jsxs("header",{className:"header",children:[r.jsxs("div",{className:"headerRow",children:[r.jsxs("div",{className:"titleBlock",children:[r.jsx("div",{className:"title",children:""}),r.jsx("div",{className:"subtitle",children:a==="week"?`${Hv(n)} `:`${lr(n)} `})]}),r.jsxs("div",{className:"headerActions",children:[a==="week"?r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",className:"btn",onClick:()=>cc(-1),children:" "}),r.jsx("button",{type:"button",className:"btn",onClick:om,children:""}),r.jsx("button",{type:"button",className:"btn",onClick:()=>cc(1),children:" "}),r.jsxs("label",{className:"contactModeToggle",children:[r.jsx("input",{type:"checkbox",checked:pe,onChange:T=>qe(T.target.checked)}),r.jsx("span",{className:"contactModeLabel",children:""})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",className:"btn",onClick:()=>oc(-1),children:" "}),r.jsx("button",{type:"button",className:"btn",onClick:im,children:""}),r.jsx("button",{type:"button",className:"btn",onClick:()=>oc(1),children:" "})]}),r.jsx("button",{type:"button",className:"btnPrimary",onClick:()=>{var T;return de(u!=="all"?u:(T=p[0])==null?void 0:T.id)},children:" "}),r.jsx("button",{type:"button",className:"btn",onClick:()=>K({open:!0}),children:" Google"}),r.jsx("button",{type:"button",className:"btn",onClick:()=>Vv(p,n,H,ee,Bt),children:" "}),r.jsx("button",{type:"button",className:"btn",onClick:async()=>{Jv(H),setTimeout(async()=>{await Kv(p,n,D,H,ee,Bt)},100)},children:" "}),r.jsx("button",{type:"button",className:"btn",onClick:async()=>{await Yv(p,n,D,H,ee,Bt)},children:" 1"})]})]}),r.jsxs("div",{className:"headerRow headerRow2",children:[r.jsxs("div",{className:"controlsLeft",children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:""}),r.jsx("input",{type:"date",value:n,onChange:T=>s(T.target.value)})]}),r.jsxs("label",{className:"field grow",children:[r.jsx("span",{children:""}),r.jsx("input",{placeholder:" /  / ",value:i,onChange:T=>o(T.target.value)})]})]}),r.jsxs("div",{className:"controlsRight",children:[r.jsxs("div",{className:"field viewSwitcher",children:[r.jsx("span",{children:""}),r.jsxs("div",{className:"viewSwitcherButtons",role:"group","aria-label":"",children:[r.jsx("button",{type:"button",className:`viewSwitcherBtn ${a==="day"?"active":""}`,onClick:()=>l("day"),title:"","aria-pressed":a==="day",children:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":!0,children:[r.jsx("rect",{x:"2",y:"4",width:"4",height:"3",rx:"0.5"}),r.jsx("rect",{x:"8",y:"6",width:"4",height:"3",rx:"0.5"}),r.jsx("rect",{x:"14",y:"8",width:"4",height:"3",rx:"0.5"})]})}),r.jsx("button",{type:"button",className:`viewSwitcherBtn ${a==="week"?"active":""}`,onClick:()=>l("week"),title:"","aria-pressed":a==="week",children:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":!0,children:[r.jsx("rect",{x:"1",y:"4",width:"2.5",height:"12",rx:"0.5"}),r.jsx("rect",{x:"5",y:"4",width:"2.5",height:"12",rx:"0.5"}),r.jsx("rect",{x:"9",y:"4",width:"2.5",height:"12",rx:"0.5"}),r.jsx("rect",{x:"13",y:"4",width:"2.5",height:"12",rx:"0.5"}),r.jsx("rect",{x:"17",y:"4",width:"2.5",height:"12",rx:"0.5"})]})}),r.jsx("button",{type:"button",className:`viewSwitcherBtn ${a==="list"?"active":""}`,onClick:()=>l("list"),title:"","aria-pressed":a==="list",children:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":!0,children:[r.jsx("rect",{x:"2",y:"3",width:"16",height:"2",rx:"0.5"}),r.jsx("rect",{x:"2",y:"9",width:"16",height:"2",rx:"0.5"}),r.jsx("rect",{x:"2",y:"15",width:"16",height:"2",rx:"0.5"})]})}),r.jsx("button",{type:"button",className:`viewSwitcherBtn ${a==="month"?"active":""}`,onClick:()=>l("month"),title:"","aria-pressed":a==="month",children:r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":!0,children:[r.jsx("rect",{x:"2",y:"2",width:"16",height:"16",rx:"1",stroke:"currentColor",strokeWidth:"1.2",fill:"none"}),r.jsx("rect",{x:"4",y:"5",width:"2.5",height:"2.5",rx:"0.3"}),r.jsx("rect",{x:"8",y:"5",width:"2.5",height:"2.5",rx:"0.3"}),r.jsx("rect",{x:"12",y:"5",width:"2.5",height:"2.5",rx:"0.3"}),r.jsx("rect",{x:"4",y:"9",width:"2.5",height:"2.5",rx:"0.3"}),r.jsx("rect",{x:"8",y:"9",width:"2.5",height:"2.5",rx:"0.3"}),r.jsx("rect",{x:"12",y:"9",width:"2.5",height:"2.5",rx:"0.3"})]})})]})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:""}),r.jsxs("select",{value:c,onChange:T=>d(T.target.value),children:[r.jsx("option",{value:"all",children:""}),r.jsx("option",{value:"cleaning",children:""}),r.jsx("option",{value:"maintenance",children:""})]})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:""}),r.jsxs("select",{value:u,onChange:T=>m(T.target.value),children:[r.jsx("option",{value:"all",children:c==="all"?"":c==="cleaning"?"":""}),w.map(T=>r.jsx("option",{value:T.id,children:T.name},T.id))]})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:""}),r.jsxs("select",{value:h,onChange:T=>x(T.target.value),children:[r.jsx("option",{value:"all",children:""}),Ir.map(T=>r.jsx("option",{value:T.key,children:T.label},T.key))]})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:""}),r.jsxs("select",{value:v,onChange:T=>S(T.target.value),children:[r.jsx("option",{value:"all",children:""}),Gp.map(T=>r.jsx("option",{value:T,children:T},T))]})]}),r.jsxs("div",{className:"summaryPills",children:[r.jsxs("span",{className:"pill",children:[" ",A.total]}),Ir.map(T=>r.jsxs("span",{className:"pill subtle",children:[T.label," ",A.byStatus.get(T.key)??0]},T.key))]})]})]})]}),r.jsxs("main",{className:"main",children:[a==="day"&&r.jsxs("div",{className:"grid",children:[r.jsx("div",{className:"pcOnly",children:r.jsx(ex,{dateISO:n,cleaners:p,timelineUnitColumns:P,appointments:B,blocks:I,conflictIds:q,activeScheduleId:(z==null?void 0:z.schedule_id)??null,onCardClick:Hr,onBackgroundClick:zt,onCreate:de,onOpenBlockModalWithSlot:lc,stores:ie,clients:ee,brands:$})}),r.jsx("div",{className:"spOnly",children:r.jsx(nx,{dateISO:n,cleaners:p,activeCleanerId:N,setActiveCleanerId:g,appointments:B,blocks:I,conflictIds:q,activeScheduleId:(z==null?void 0:z.schedule_id)??null,onCardClick:Hr,onCreate:de,onOpenBlockModalWithSlot:lc})})]}),a==="week"&&!pe&&r.jsx(sx,{dateISO:n,setDateISO:s,rollingDays:O,cleaners:p,appointments:ne,conflictIds:q,onCardClick:k,onCreate:de}),a==="week"&&pe&&r.jsxs("div",{className:"contactModePanels",children:[r.jsx(ax,{columnLabelIsos:ae,weekDayIsos:O,cleaners:p,appointments:ne,conflictIds:q,selectedAppointmentId:Oe,onSelectCard:T=>{U(T);const R=ne.find(X=>X.id===T);R&&k(R)},onSaveContact:lm,onOpen:ze,activeScheduleId:(z==null?void 0:z.schedule_id)??null}),r.jsx(ix,{weekDayIsos:O,cleaners:p,appointments:ne,conflictIds:q,selectedAppointmentId:Oe,activeScheduleId:(z==null?void 0:z.schedule_id)??null,onCardClick:k,onOpen:ze})]}),a==="list"&&r.jsx(rx,{dateISO:n,cleaners:p,appointments:B,conflictIds:q,onCardClick:k,onCreate:de}),a==="month"&&r.jsx(ox,{dateISO:n,setDateISO:s})]}),ve&&r.jsx("div",{className:"conflictOverlay",children:r.jsx("div",{className:"conflictOverlayBubble",children:r.jsx("div",{className:"conflictOverlayMessage",children:""})})}),z&&r.jsxs("section",{className:"karteDock",style:{height:`${Y}px`},children:[r.jsxs("div",{className:`karteDockHeader ${C?"resizing":""}`,onMouseDown:ac,onTouchStart:ac,children:[r.jsx("div",{className:"karteDockHeaderTitle",children:""}),r.jsxs("div",{className:"karteDockHeaderActions",children:[r.jsx("button",{type:"button",className:"karteDockSaveBtn",onClick:sm,disabled:we||!(z!=null&&z.store_id),"aria-label":"",onMouseDown:T=>T.stopPropagation(),onTouchStart:T=>T.stopPropagation(),children:we?"...":""}),r.jsx("button",{type:"button",className:"karteDockCloseBtn",onClick:rm,"aria-label":"",onMouseDown:T=>T.stopPropagation(),onTouchStart:T=>T.stopPropagation(),children:""})]})]}),r.jsxs("div",{className:"karteDockInner",children:[r.jsxs("div",{className:"karteDockLeft",children:[r.jsxs("div",{className:"kdLeftColumn",children:[r.jsx("div",{className:"kdTitle",children:z.target_name??""}),r.jsxs("div",{className:"kdMeta",children:[r.jsxs("div",{children:["",z.date??""]}),r.jsxs("div",{children:["",Te(z.start_min),"",Te(z.end_min)]}),r.jsxs("div",{children:["",z.work_type??""]})]}),(()=>{const R=(z==null?void 0:z.store_id)?J:null,X=R!=null&&R.client_id?ee.find(Fe=>String(Fe.id)===String(R.client_id)):null,Z=R!=null&&R.brand_id?$.find(Fe=>String(Fe.id)===String(R.brand_id)):null,Ne=(Z==null?void 0:Z.name)||(R==null?void 0:R.brand_name)||"",_e=(R==null?void 0:R.name)||(R==null?void 0:R.store_name)||"",Ke=(X==null?void 0:X.name)||(X==null?void 0:X.client_name)||(R==null?void 0:R.client_name)||"",Ee=(R==null?void 0:R.phone)||(R==null?void 0:R.tel)||(R==null?void 0:R.phone_number)||(X==null?void 0:X.phone)||(X==null?void 0:X.tel)||(X==null?void 0:X.phone_number)||"";return r.jsxs(r.Fragment,{children:[_e&&r.jsxs("div",{className:"kdInfoRow",children:[r.jsx("span",{className:"kdInfoLabel",children:""}),r.jsx("span",{children:_e})]}),Ne&&r.jsxs("div",{className:"kdInfoRow",children:[r.jsx("span",{className:"kdInfoLabel",children:""}),r.jsx("span",{children:Ne})]}),Ke&&r.jsxs("div",{className:"kdInfoRow",children:[r.jsx("span",{className:"kdInfoLabel",children:""}),r.jsx("span",{children:Ke})]}),Ee&&r.jsxs("div",{className:"kdInfoRow",children:[r.jsx("span",{className:"kdInfoLabel",children:""}),r.jsx("span",{children:Ee})]})]})})()]}),r.jsxs("div",{className:"kdRightColumn",children:[(()=>{const R=(z==null?void 0:z.store_id)?J:null,X=(R==null?void 0:R.sales_person)||(R==null?void 0:R.sales_person_name)||(R==null?void 0:R.salesPerson)||"";return r.jsx(r.Fragment,{children:X&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"kdSectionTitle",children:""}),r.jsx("div",{className:"kdInfoRow",children:r.jsx("span",{children:X})})]})})})(),r.jsx("div",{className:"kdSectionTitle",children:""}),r.jsx("div",{className:"kdContactReminders",children:["7","3","1"].map(T=>{const R=(z.contact_reminders||[]).includes(T);return r.jsxs("label",{className:"kdReminderCheckbox",children:[r.jsx("input",{type:"checkbox",checked:R,onChange:X=>{const Z=z.contact_reminders||[],Ne=X.target.checked?[...Z,T]:Z.filter(_e=>_e!==T);H(_e=>_e.map(Ke=>Ke.id===z.id?{...Ke,contact_reminders:Ne}:Ke)),k(_e=>_e?{..._e,contact_reminders:Ne}:null)}}),r.jsx("span",{children:T})]},T)})}),(()=>{const T=z==null?void 0:z.cleaner_id,R=T?p.find(Z=>String(Z.id)===String(T)):null,X=(R==null?void 0:R.name)||(R==null?void 0:R.cleaner_name)||"";return r.jsx(r.Fragment,{children:X&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"kdSectionTitle",children:""}),r.jsx("div",{className:"kdInfoRow",children:r.jsx("span",{children:X})})]})})})(),(()=>{const R=(z==null?void 0:z.store_id)?J:null,X=(R==null?void 0:R.plan)||(R==null?void 0:R.plan_name)||"",Z=(R==null?void 0:R.security_box)||(R==null?void 0:R.security_box_number)||(R==null?void 0:R.box_number)||"";return r.jsxs(r.Fragment,{children:[X&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"kdSectionTitle",children:""}),r.jsx("div",{className:"kdInfoRow",children:r.jsx("span",{children:X})})]}),Z&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"kdSectionTitle",children:""}),r.jsx("div",{className:"kdInfoRow",children:r.jsx("span",{children:Z})})]})]})})()]})]}),r.jsxs("div",{className:"karteDockRight",children:[r.jsxs("div",{className:"kdRightTop",children:[r.jsx("div",{className:"kdSectionTitle",children:""}),r.jsx("div",{className:"kdMemberList",children:z.cleaner_id&&r.jsx("span",{className:"kdChip",children:((dc=p.find(T=>T.id===z.cleaner_id))==null?void 0:dc.name)??z.cleaner_id})})]}),(()=>{const T=z==null?void 0:z.store_id;return T&&J?r.jsx(Qp,{ref:j,storeId:T,store:J,brands:$,clients:ee,getBrandName:R=>{const X=$.find(Z=>String(Z.id)===String(R.brand_id));return(X==null?void 0:X.name)||R.brand_name||""},getClientName:R=>{const X=ee.find(Z=>String(Z.id)===String(R.client_id));return(X==null?void 0:X.name)||(X==null?void 0:X.client_name)||R.client_name||""},isLocked:!1}):T?r.jsx("div",{className:"kdEmpty",children:"..."}):r.jsx("div",{className:"kdEmpty",children:""})})()]})]})]}),r.jsx(Zv,{selectedSchedule:z,rollingDays:O,visibleSchedules:ne,conflictIds:q,apiBase:Bt,onOpenChange:je}),Q.open&&Q.appt&&r.jsx(ux,{cleaners:p,appt:Q.appt,mode:Q.mode,onClose:me,onSave:Ae,onDelete:Me,conflictIds:q,saveConflictError:re,clients:ee,stores:ie,brands:$,onClientChange:async T=>{if(!T){ue([]);return}try{const R=await fetch(`${Bt}/clients/${T}/stores`,{headers:{Authorization:`Bearer ${localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token}`}});if(R.ok){const X=await R.json();ue(X.stores||[])}}catch(R){console.error("[AdminScheduleTimelinePage] Failed to fetch stores:",R)}},apiBase:Bt}),le&&r.jsx(Cv,{open:le,onClose:ic,onCreate:am,cleaners:p,dateISO:n,initialUserId:$e,initialStartAt:Se,initialEndAt:ht})]})]})}function Zv({selectedSchedule:e,rollingDays:t,visibleSchedules:n,conflictIds:s,apiBase:a,onOpenChange:l}){const[i,o]=f.useState(!1),[c,d]=f.useState({x:16,y:16}),[u,m]=f.useState(!1),[h,x]=f.useState({x:0,y:0}),[v,S]=f.useState([]),[N,g]=f.useState(""),[p,y]=f.useState(!1),[_,w]=f.useState("normal"),P=Xt.useRef(null),D=Xt.useRef(null),H=()=>localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token,I=k=>{var L,J,b,$,V;if(k.target.closest(".misogi-close-btn")||k.target.closest(".misogi-input-area"))return;m(!0);const Y=k.clientX??((J=(L=k.touches)==null?void 0:L[0])==null?void 0:J.clientX),G=k.clientY??(($=(b=k.touches)==null?void 0:b[0])==null?void 0:$.clientY),C=(V=P.current)==null?void 0:V.getBoundingClientRect();C&&Y!==void 0&&G!==void 0&&x({x:Y-C.left,y:G-C.top})};f.useEffect(()=>{if(!u)return;const k=G=>{var J,b,$,V;if(!u)return;const C=G.clientX??((b=(J=G.touches)==null?void 0:J[0])==null?void 0:b.clientX),L=G.clientY??((V=($=G.touches)==null?void 0:$[0])==null?void 0:V.clientY);C!==void 0&&L!==void 0&&d({x:C-h.x,y:L-h.y})},Y=()=>{m(!1)};return document.addEventListener("mousemove",k),document.addEventListener("mouseup",Y),document.addEventListener("touchmove",k,{passive:!1}),document.addEventListener("touchend",Y),()=>{document.removeEventListener("mousemove",k),document.removeEventListener("mouseup",Y),document.removeEventListener("touchmove",k),document.removeEventListener("touchend",Y)}},[u,h]);const F=async()=>{if(!N.trim()||p)return;const k=N.trim();g(""),y(!0),S([{role:"user",text:k}]);try{const Y=e?{id:e.id,schedule_id:e.schedule_id,date:e.date,target_name:e.target_name,cleaner_id:e.cleaner_id,start_min:e.start_min,end_min:e.end_min,work_type:e.work_type,status:e.status}:null,G=n.map(ee=>({id:ee.id,schedule_id:ee.schedule_id,date:ee.date,target_name:ee.target_name,cleaner_id:ee.cleaner_id,start_min:ee.start_min,end_min:ee.end_min,work_type:ee.work_type,status:ee.status,conflict:s.has(ee.id)})),C=H();if(!C)throw new Error("");const L=await fetch(`${a}/ai/process`,{method:"POST",headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"},body:JSON.stringify({action:"schedule_assistant",text:k,selectedSchedule:Y,rollingDays:t,visibleSchedules:G})});if(!L.ok)throw new Error(`API Error: ${L.status}`);const b=(await L.json()).result||{};let $="normal";b.overlaps&&Array.isArray(b.overlaps)&&b.overlaps.length>=2?$="danger":b.overlaps&&(Array.isArray(b.overlaps)?b.overlaps.length>=1:b.overlaps!=="")&&($="warning"),b.congestion&&b.congestion!==""&&b.congestion.includes("high")&&($="danger"),w($);let V=b.message||b.notes_summary||"";b.overlaps&&b.overlaps!==""&&!Array.isArray(b.overlaps)&&(V+=`

: ${b.overlaps}`),b.congestion&&b.congestion!==""&&(V+=`

: ${b.congestion}`),b.contact_deadline&&b.contact_deadline!==""&&(V+=`

: ${b.contact_deadline}`),S([{role:"user",text:k},{role:"ai",text:V,raw:b}])}catch(Y){console.error("[MisogiSupportWidget] Error:",Y),S([{role:"user",text:k},{role:"ai",text:"",error:!0}]),w("normal")}finally{y(!1)}},z=k=>{k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),F())};return r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",className:"misogi-support-btn",onClick:()=>{o(!0),l==null||l(!0)},style:{display:i?"none":"block"},children:"MISOGI"}),i&&r.jsxs("div",{ref:P,className:`misogi-overlay status-${_}`,style:{left:`${c.x}px`,top:`${c.y}px`,cursor:u?"grabbing":"grab"},children:[r.jsx("div",{ref:D,className:"misogi-header",onMouseDown:I,onTouchStart:I,children:r.jsx("button",{type:"button",className:"misogi-close-btn",onClick:()=>{o(!1),l==null||l(!1)},"aria-label":"",children:""})}),r.jsx("div",{className:"misogi-visualizer-container",onMouseDown:I,onTouchStart:I,style:{cursor:u?"grabbing":"grab"},children:r.jsx(at,{mode:"base",className:"misogi-visualizer"})}),r.jsxs("div",{className:"misogi-ai-message-container",children:[v.length===0?r.jsx("div",{className:"misogi-message ai",children:r.jsx("div",{className:"misogi-bubble",children:"..."})}):v.filter(k=>k.role==="ai").map((k,Y)=>r.jsx("div",{className:"misogi-message ai",children:r.jsx("div",{className:`misogi-bubble ${k.error?"error":""}`,children:k.text.split(`
`).map((G,C)=>r.jsxs(Xt.Fragment,{children:[G,C<k.text.split(`
`).length-1&&r.jsx("br",{})]},C))})},Y)),p&&r.jsx("div",{className:"misogi-message ai",children:r.jsx("div",{className:"misogi-bubble loading",children:"..."})})]}),r.jsx("div",{className:"misogi-user-message-container",children:v.filter(k=>k.role==="user").map((k,Y)=>r.jsx("div",{className:"misogi-message user",children:r.jsx("div",{className:"misogi-bubble",children:k.text.split(`
`).map((G,C)=>r.jsxs(Xt.Fragment,{children:[G,C<k.text.split(`
`).length-1&&r.jsx("br",{})]},C))})},Y))}),r.jsxs("div",{className:"misogi-input-area",children:[r.jsx("input",{type:"text",className:"misogi-input",placeholder:"...",value:N,onChange:k=>g(k.target.value),onKeyPress:z,disabled:p}),r.jsx("button",{type:"button",className:"misogi-send-btn",onClick:F,disabled:!N.trim()||p,children:""})]})]})]})}function ex({dateISO:e,cleaners:t,timelineUnitColumns:n,appointments:s,blocks:a,conflictIds:l,activeScheduleId:i,onCardClick:o,onBackgroundClick:c,onCreate:d,onOpenBlockModalWithSlot:u,stores:m=[],clients:h=[],brands:x=[]}){const y=[];for(let k=1260;k<=2040;k+=60){const Y=k%1440;y.push(Y)}const{cleaning:_,maintenance:w}=n??{cleaning:t.filter(k=>k.unit==="cleaning"),maintenance:t.filter(k=>k.unit==="maintenance")},{daytimeEvents:P,nighttimeAppointments:D,nighttimeBlocks:H}=f.useMemo(()=>{const k=[],Y=[],G=[];for(const C of s)Wu(C.start_min,C.end_min)?k.push(C):Y.push(C);for(const C of a??[]){const L=qp(C,e);L&&(Wu(L.start_min,L.end_min)||G.push({block:C,start_min:L.start_min,end_min:L.end_min}))}return{daytimeEvents:k,nighttimeAppointments:Y,nighttimeBlocks:G}},[s,a,e]),I=f.useMemo(()=>{var Y,G;const k=new Map;for(const C of t)k.set(C.id,[]);for(const C of D)(Y=k.get(C.cleaner_id))==null||Y.push({type:"appointment",data:C,start_min:C.start_min,end_min:C.end_min});for(const C of H)if(C.block.user_id==null)for(const L of t)(G=k.get(L.id))==null||G.push({type:"block",block:C.block,start_min:C.start_min,end_min:C.end_min});else{const L=k.get(C.block.user_id);L&&L.push({type:"block",block:C.block,start_min:C.start_min,end_min:C.end_min})}for(const[,C]of k.entries())C.sort((L,J)=>L.start_min-J.start_min);return k},[t,D,H]),F=[..._,...w],z=f.useMemo(()=>F.map(k=>({cleaner:k,unit:Zi(k.name),items:I.get(k.id)??[]})),[F,I]);return r.jsxs("section",{className:"timelinePC timelinePCHorizontal",children:[r.jsxs("div",{className:"timelinePCContainerHorizontal",children:[r.jsxs("div",{className:"timelineNameListContainer",children:[P.length>0&&r.jsx("div",{className:"timelineNameListSpacer",style:{height:"44px"}}),r.jsx("div",{className:"timelineNameListHeader",children:r.jsx("div",{className:"nameListHeaderCell",children:""})}),r.jsx("div",{className:"timelineNameListBody",children:z.map(k=>r.jsx("div",{className:`nameListCell unit-${k.unit}`,children:r.jsx("span",{className:"name",children:k.cleaner.name})},k.cleaner.id))})]}),r.jsxs("div",{className:"timelineTimeAreaContainer",children:[P.length>0&&r.jsx("div",{className:"daytimeEventRow",children:r.jsx("div",{className:"daytimeEventRowInner",children:P.map(k=>{const Y=ir(k.status),G=l.has(k.id),C=k.store_id?m.find(se=>String(se.id)===String(k.store_id)):null;k.client_id&&h.find(se=>String(se.id)===String(k.client_id));const L=C!=null&&C.brand_id?x.find(se=>String(se.id)===String(C.brand_id)):null,J=(L==null?void 0:L.name)||(C==null?void 0:C.brand_name)||"",b=(C==null?void 0:C.name)||(C==null?void 0:C.store_name)||k.target_name||"",$=k.contact_reminders||[],V=[];$.includes("7")&&V.push("7"),$.includes("3")&&V.push("3"),$.includes("1")&&V.push("1");const ee=V.length>0?V.join(" "):"";return r.jsxs("button",{type:"button",className:`daytimeChip ${Y.colorClass} ${G?"conflict":""}`,onClick:se=>{se.stopPropagation(),o(k)},title:`${Te(k.start_min)}-${Te(k.end_min)} ${k.target_name}`,children:[r.jsx("span",{className:"daytimeChipIcon",children:""}),J&&r.jsx("span",{className:"daytimeChipBrand",children:J}),J&&b&&r.jsx("span",{children:"/"}),b&&r.jsx("span",{className:"daytimeChipStore",children:b}),(J||b)&&r.jsx("span",{children:"/"}),r.jsxs("span",{className:"daytimeChipTime",children:[Te(k.start_min),"-",Te(k.end_min)]}),ee&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"/"}),r.jsx("span",{className:"daytimeChipReminders",children:ee})]}),k.work_type===""&&r.jsx("span",{className:"daytimeChipNightIcon",children:""}),r.jsxs("span",{className:"daytimeChipStatus",children:["(",Y.label,")"]}),G&&r.jsx("span",{className:"daytimeChipWarn",children:""})]},k.id)})})}),r.jsx("div",{className:"timelineTimeHeaderHorizontal",children:y.map(k=>r.jsx("div",{className:"timeHeaderCell",children:Te(k)},k))}),r.jsx("div",{className:"timelineTimeBodyContainer",onClick:c,role:"presentation",children:z.map(k=>r.jsx(tx,{cleaner:k.cleaner,rows:y,dayStart:1260,dayEnd:2040,items:k.items,conflictIds:l,activeScheduleId:i,onCardClick:o,onSlotClick:(Y,G)=>{d(Y,G)},onSlotRightClick:u,stores:m,clients:h,brands:x},k.cleaner.id))})]})]}),r.jsxs("div",{className:"legend",children:[r.jsx("span",{className:"legendTitle",children:":"}),Ir.map(k=>r.jsx("span",{className:`legendItem ${k.colorClass}`,children:k.label},k.key)),r.jsx("span",{className:"legendItem s-conflict",children:""}),r.jsx("span",{className:"legendItem blockCard",children:" "}),r.jsx("span",{className:"legendItem unit-cleaning-legend",children:""}),r.jsx("span",{className:"legendItem unit-maintenance-legend",children:""})]})]})}function tx({cleaner:e,rows:t,dayStart:n,dayEnd:s,items:a,conflictIds:l,activeScheduleId:i,onCardClick:o,onSlotClick:c,onSlotRightClick:d,stores:u=[],clients:m=[],brands:h=[]}){const S=Xt.useRef(null),[N,g]=Xt.useState(0);Xt.useEffect(()=>{const y=()=>{if(S.current){const _=S.current.offsetWidth;g(_)}};return y(),window.addEventListener("resize",y),()=>window.removeEventListener("resize",y)},[]);const p=N>0?N/780:0;return r.jsxs("div",{className:"cleanerRow",ref:S,children:[r.jsx("div",{className:"cleanerRowGrid",children:t.map(y=>{const _=y<1260?y+1440:y;return r.jsx("button",{type:"button",className:"slotCellHorizontal",onClick:w=>{w.stopPropagation(),c==null||c(e.id,_)},onContextMenu:w=>{w.preventDefault(),d==null||d(e.id,_)},"aria-label":`${Te(y)}`},y)})}),N>0&&r.jsx("div",{className:"cleanerRowOverlay",style:{width:N},children:a.map(y=>{if(y.type==="block"){const{block:$,start_min:V,end_min:ee}=y,se=la(V),ie=la(ee),ue=se*p,we=Math.max(60,(ie-se)*p);return r.jsxs("div",{className:"apptCard scheduleCard blockCard",style:{left:ue,width:we},title:`  ${Te(V)}${Te(ee)}`,children:[r.jsx("div",{className:"apptTop",children:r.jsxs("span",{className:"apptTime",children:[Te(V),"",Te(ee)]})}),r.jsx("div",{className:"apptName",children:" "}),r.jsx("div",{className:"apptMeta",children:$.reason_code==="sleep"?"":$.reason_code==="move"?"":$.reason_code==="private"?"":""})]},$.id)}const _=y.data,w=la(_.start_min),P=la(_.end_min),D=w*p,H=Math.max(60,(P-w)*p),I=ir(_.status),F=l.has(_.id),z=i!=null&&_.schedule_id===i,k=_.store_id?u.find($=>String($.id)===String(_.store_id)):null;_.client_id&&m.find($=>String($.id)===String(_.client_id));const Y=k!=null&&k.brand_id?h.find($=>String($.id)===String(k.brand_id)):null,G=(Y==null?void 0:Y.name)||(k==null?void 0:k.brand_name)||"",C=(k==null?void 0:k.name)||(k==null?void 0:k.store_name)||_.target_name||"",L=_.contact_reminders||[],J=[];L.includes("7")&&J.push("7"),L.includes("3")&&J.push("3"),L.includes("1")&&J.push("1");const b=J.length>0?J.join(" "):"";return r.jsx("button",{type:"button",className:`apptCard scheduleCard ${I.colorClass} ${F?"conflict":""} ${z?"is-linked":""}`,style:{left:D,width:H},onClick:$=>{$.stopPropagation(),o(_)},title:`${Te(_.start_min)}-${Te(_.end_min)} ${_.target_name}`,children:r.jsx("div",{className:"apptContent",children:r.jsxs("div",{className:"apptSingleLine",children:[G&&r.jsx("span",{className:"apptBrand",children:G}),G&&C&&r.jsx("span",{className:"apptSeparator",children:"/"}),C&&r.jsx("span",{className:"apptStore",children:C}),(G||C)&&r.jsx("span",{className:"apptSeparator",children:"/"}),r.jsxs("span",{className:"apptTime",children:[Te(_.start_min),"",Te(_.end_min)]}),b&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"apptSeparator",children:"/"}),r.jsx("span",{className:"apptReminders",children:b})]})]})})},_.id)})})]})}function nx({dateISO:e,cleaners:t,activeCleanerId:n,setActiveCleanerId:s,appointments:a,blocks:l,conflictIds:i,activeScheduleId:o,onCardClick:c,onCreate:d,onOpenBlockModalWithSlot:u,stores:m=[],clients:h=[],brands:x=[]}){var _;const g=[];for(let w=0;w<=1440;w+=60)g.push(w);const p=f.useMemo(()=>{const w=[];for(const P of a.filter(D=>D.cleaner_id===n))w.push({type:"appointment",data:P,start_min:P.start_min,end_min:P.end_min});for(const P of l??[]){if(P.user_id!==n&&P.user_id!=null)continue;const D=qp(P,e);D&&w.push({type:"block",block:P,start_min:D.start_min,end_min:D.end_min})}return w.sort((P,D)=>P.start_min-D.start_min),w},[a,l,n,e]),y=f.useMemo(()=>{const w=new Map;for(const P of p)w.set(P.start_min,(w.get(P.start_min)??[]).concat(P));return g.map(P=>({t:P,items:w.get(P)??[]}))},[p,g]);return r.jsxs("section",{className:"timelineSP",children:[r.jsx("div",{className:"doctorTabs",children:t.map(w=>r.jsx("button",{type:"button",className:`tab ${w.id===n?"active":""}`,onClick:()=>s(w.id),children:w.name},w.id))}),r.jsxs("div",{className:"spList",children:[r.jsxs("div",{className:"spHint",children:[r.jsx("span",{className:"muted",children:lr(e)}),r.jsxs("span",{className:"muted",children:[" / ",(_=t.find(w=>w.id===n))==null?void 0:_.name]})]}),y.map(w=>r.jsxs("div",{className:"spSlot",children:[r.jsx("div",{className:"spTime",children:Te(w.t)}),r.jsx("div",{className:"spSlotBody",children:w.items.length===0?r.jsx("button",{type:"button",className:"spEmpty",onClick:()=>d(n,w.t),onContextMenu:P=>{P.preventDefault(),u==null||u(n,w.t)},children:""}):w.items.map(P=>{if(P.type==="block"){const{block:b,start_min:$,end_min:V}=P;return r.jsx("div",{className:"spAppt scheduleCard blockCard",children:r.jsxs("div",{className:"spApptRow",children:[r.jsxs("div",{className:"spApptMain",children:[r.jsx("div",{className:"spApptName",children:" "}),r.jsx("div",{className:"spApptMeta",children:b.reason_code==="sleep"?"":b.reason_code==="move"?"":b.reason_code==="private"?"":""})]}),r.jsxs("div",{className:"spApptTime",children:[Te($),"",Te(V)]})]})},b.id)}const D=P.data,H=ir(D.status),I=i.has(D.id),F=o!=null&&D.schedule_id===o,z=D.store_id?m.find(b=>String(b.id)===String(D.store_id)):null;D.client_id&&h.find(b=>String(b.id)===String(D.client_id));const k=z!=null&&z.brand_id?x.find(b=>String(b.id)===String(z.brand_id)):null,Y=(k==null?void 0:k.name)||(z==null?void 0:z.brand_name)||"",G=(z==null?void 0:z.name)||(z==null?void 0:z.store_name)||D.target_name||"",C=D.contact_reminders||[],L=[];C.includes("7")&&L.push("7"),C.includes("3")&&L.push("3"),C.includes("1")&&L.push("1");const J=L.length>0?L.join(" "):"";return r.jsx("button",{type:"button",className:`spAppt scheduleCard ${H.colorClass} ${I?"conflict":""} ${F?"is-linked":""}`,onClick:()=>c(D),children:r.jsxs("div",{className:"spApptSingleLine",children:[Y&&r.jsx("span",{className:"spApptBrand",children:Y}),Y&&G&&r.jsx("span",{children:"/"}),G&&r.jsx("span",{className:"spApptStore",children:G}),(Y||G)&&r.jsx("span",{children:"/"}),r.jsxs("span",{className:"spApptTime",children:[Te(D.start_min),"",Te(D.end_min)]}),J&&r.jsxs(r.Fragment,{children:[r.jsx("span",{children:"/"}),r.jsx("span",{className:"spApptReminders",children:J})]})]})},D.id)})})]},w.t))]})]})}function rx({dateISO:e,cleaners:t,appointments:n,conflictIds:s,onCardClick:a,onCreate:l}){const i=f.useMemo(()=>[...n].sort((o,c)=>o.start_min-c.start_min),[n]);return r.jsxs("section",{className:"listView",children:[r.jsxs("div",{className:"listHeader",children:[r.jsxs("div",{className:"listTitle",children:["",lr(e),""]}),r.jsx("button",{type:"button",className:"btnPrimary",onClick:()=>l(),children:" "})]}),r.jsxs("div",{className:"table",children:[r.jsxs("div",{className:"row head",children:[r.jsx("div",{children:""}),r.jsx("div",{children:""}),r.jsx("div",{children:""}),r.jsx("div",{children:""}),r.jsx("div",{children:""}),r.jsx("div",{children:""})]}),i.map(o=>{const c=t.find(m=>m.id===o.cleaner_id),d=ir(o.status),u=s.has(o.id);return r.jsxs("button",{type:"button",className:"row body",onClick:()=>a==null?void 0:a(o),children:[r.jsxs("div",{children:[Te(o.start_min),"",Te(o.end_min)]}),r.jsx("div",{className:"strong",children:o.target_name}),r.jsx("div",{children:(c==null?void 0:c.name)??"-"}),r.jsx("div",{children:o.work_type}),r.jsx("div",{children:r.jsx("span",{className:`badge ${d.colorClass}`,children:d.label})}),r.jsx("div",{children:u?r.jsx("span",{className:"warn",children:""}):"-"})]},o.id)}),i.length===0&&r.jsx("div",{className:"empty",children:""})]})]})}function sx({dateISO:e,setDateISO:t,rollingDays:n,cleaners:s,appointments:a,conflictIds:l,onCardClick:i,onCreate:o}){const c=f.useMemo(()=>{var m;const u=new Map;for(const h of n)u.set(h,[]);for(const h of a)(m=u.get(h.date))==null||m.push(h);for(const[,h]of u.entries())h.sort((x,v)=>x.start_min-v.start_min);return u},[n,a]);function d(u,m){const h=c.get(u)??[],x=u===e;return r.jsxs("div",{className:`weekCol ${x?"active":""} ${m?"todayCol":""}`,children:[r.jsxs("button",{type:"button",className:"weekColHead",onClick:()=>t(u),"aria-pressed":x,children:[m&&r.jsx("div",{className:"todayBadge",children:"TODAY"}),r.jsx("span",{className:"weekColDate",children:lr(u)}),r.jsxs("span",{className:"weekColCount",children:[h.length,""]})]}),r.jsx("div",{className:"weekColBody",children:h.length===0?r.jsx("div",{className:"weekEmpty",children:""}):h.map(v=>{var p;const S=ir(v.status),N=l.has(v.id),g=((p=s.find(y=>y.id===v.cleaner_id))==null?void 0:p.name)??"";return r.jsxs("button",{type:"button",className:`weekAppt ${S.colorClass} ${N?"conflict":""}`,onClick:()=>i==null?void 0:i(v),title:`${v.target_name} ${g}`,children:[r.jsx("span",{className:"weekApptTime",children:Te(v.start_min)}),r.jsx("span",{className:"weekApptName",children:v.target_name}),N&&r.jsx("span",{className:"warn",children:""})]},v.id)})})]},u)}return r.jsxs("section",{className:"weekView",children:[r.jsx("div",{className:"weekTitle",children:"87"}),r.jsxs("div",{className:"rollingWeekGrid",children:[r.jsx("div",{className:"todayColumn",children:n[0]!=null&&d(n[0],!0)}),r.jsx("div",{className:"futureColumns",children:n.slice(1).map(u=>d(u,!1))})]})]})}function ax({columnLabelIsos:e,weekDayIsos:t,cleaners:n,appointments:s,conflictIds:a,selectedAppointmentId:l,onSelectCard:i,onSaveContact:o,onOpen:c,activeScheduleId:d}){const u=f.useMemo(()=>{var h;const m=new Map;for(const x of t)m.set(x,[]);for(const x of s)(h=m.get(x.date))==null||h.push(x);for(const[,x]of m.entries())x.sort((v,S)=>v.start_min-S.start_min);return m},[t,s]);return r.jsxs("section",{className:"contactWeekPanel",children:[r.jsx("div",{className:"contactWeekPanelTitle",children:"11"}),r.jsx("div",{className:"weekGrid",children:t.map((m,h)=>{const x=u.get(m)??[],v=e[h]??m;return r.jsxs("div",{className:"weekCol",children:[r.jsxs("div",{className:"weekColHead static",children:[r.jsx("span",{className:"weekColDate",children:lr(v)}),r.jsxs("span",{className:"weekColCount",children:[x.length,""]})]}),r.jsx("div",{className:"weekColBody",children:x.length===0?r.jsx("div",{className:"weekEmpty",children:""}):x.map(S=>r.jsx(lx,{appt:S,cleaners:cleanersWithUnit,conflictIds:a,isSelected:l===S.id,isLinked:d!=null&&(S.schedule_id??S.id)===d,onSelect:()=>i(S.id),onSaveContact:o,onOpen:c},S.id))})]},m)})})]})}function lx({appt:e,cleaners:t,conflictIds:n,isSelected:s,isLinked:a,onSelect:l,onSaveContact:i,onOpen:o}){var S;const[c,d]=f.useState(e.contact_note??""),[u,m]=f.useState(e.contact_status??"pending"),h=to(e.contact_status??"pending"),x=n.has(e.id);(S=t.find(N=>N.id===e.cleaner_id))==null||S.name,f.useEffect(()=>{d(e.contact_note??""),m(e.contact_status??"pending")},[e.id,e.contact_note,e.contact_status]);function v(){i(e.id,{contact_note:c.trim(),contact_status:u})}return r.jsxs("div",{className:`contactCard ${h.colorClass} ${s?"selected":""} ${a?"is-linked":""} ${x?"conflict":""}`,"data-schedule-id":e.id,children:[r.jsxs("button",{type:"button",className:"contactCardHeader",onClick:()=>l(),"aria-pressed":s,children:[r.jsx("span",{className:"contactCardTime",children:Te(e.start_min)}),r.jsx("span",{className:"contactCardName",children:e.target_name}),r.jsx("span",{className:"contactCardStatus",children:to(u).label}),x&&r.jsx("span",{className:"warn",children:""})]}),r.jsxs("div",{className:"contactCardBody",onClick:N=>N.stopPropagation(),children:[r.jsx("textarea",{className:"contactCardNote",placeholder:"",value:c,onChange:N=>d(N.target.value),onBlur:v,rows:2}),r.jsxs("div",{className:"contactCardActions",children:[r.jsx("select",{value:u,onChange:N=>{const g=N.target.value;m(g),i(e.id,{contact_status:g})},className:"contactStatusSelect",children:Xi.map(N=>r.jsx("option",{value:N.key,children:N.label},N.key))}),r.jsx("button",{type:"button",className:"btn small",onClick:v,children:""}),r.jsx("button",{type:"button",className:"btn small",onClick:()=>o(e),children:""})]})]})]})}function ix({weekDayIsos:e,cleaners:t,appointments:n,conflictIds:s,selectedAppointmentId:a,activeScheduleId:l,onCardClick:i,onOpen:o}){const c=f.useMemo(()=>{var u;const d=new Map;for(const m of e)d.set(m,[]);for(const m of n)(u=d.get(m.date))==null||u.push(m);for(const[,m]of d.entries())m.sort((h,x)=>h.start_min-x.start_min);return d},[e,n]);return r.jsxs("section",{className:"cleaningWeekPanel",children:[r.jsx("div",{className:"cleaningWeekPanelTitle",children:""}),r.jsx("div",{className:"weekGrid",children:e.map(d=>{const u=c.get(d)??[];return r.jsxs("div",{className:"weekCol",children:[r.jsxs("div",{className:"weekColHead static",children:[r.jsx("span",{className:"weekColDate",children:lr(d)}),r.jsxs("span",{className:"weekColCount",children:[u.length,""]})]}),r.jsx("div",{className:"weekColBody",children:u.length===0?r.jsx("div",{className:"weekEmpty",children:""}):u.map(m=>{const h=ir(m.status),x=to(m.contact_status??"pending"),v=s.has(m.id),S=a===m.id,N=l!=null&&(m.schedule_id??m.id)===l,g=Gv(m.contact_last_at);return r.jsxs("button",{type:"button",className:`weekAppt cleaningCard ${h.colorClass} ${x.colorClass} ${S?"highlight":""} ${N?"is-linked":""} ${v?"conflict":""}`,onClick:()=>i?i(m):o==null?void 0:o(m),"data-schedule-id":m.schedule_id??m.id,children:[r.jsx("span",{className:"weekApptTime",children:Te(m.start_min)}),r.jsx("span",{className:"weekApptName",children:m.target_name}),v&&r.jsx("span",{className:"warn",children:""}),(m.contact_note||g)&&r.jsxs("div",{className:"cleaningCardContact",children:[m.contact_note&&r.jsx("span",{className:"cleaningCardNote",children:m.contact_note}),g&&r.jsx("span",{className:"cleaningCardLastAt",children:g})]})]},m.id)})})]},d)})})]})}function ox({dateISO:e,setDateISO:t}){const n=new Date(e+"T00:00:00"),s=n.getFullYear(),a=n.getMonth(),i=new Date(s,a,1).getDay(),o=new Date(s,a+1,0).getDate(),c=[];for(let u=0;u<i;u++)c.push(null);for(let u=1;u<=o;u++)c.push(u);function d(u){t(`${s}-${Je(a+1)}-${Je(u)}`)}return r.jsxs("section",{className:"monthView",children:[r.jsxs("div",{className:"monthTitle",children:[s,"/",a+1]}),r.jsxs("div",{className:"monthGrid",children:[["","","","","","",""].map(u=>r.jsx("div",{className:"monthHead",children:u},u)),c.map((u,m)=>{if(!u)return r.jsx("div",{className:"monthCell blank"},m);const x=`${s}-${Je(a+1)}-${Je(u)}`===e;return r.jsx("button",{type:"button",className:`monthCell ${x?"active":""}`,onClick:()=>d(u),children:u},m)})]})]})}const cx=[{key:"basic",label:""},{key:"memo",label:""}];function ux({cleaners:e,appt:t,mode:n,onClose:s,onSave:a,onDelete:l,conflictIds:i,saveConflictError:o,clients:c=[],stores:d=[],brands:u=[],onClientChange:m,apiBase:h}){var $,V,ee,se,ie,ue,we,M;const[x,v]=f.useState(()=>{const j=eo(t);return!j.cleaner_ids&&j.cleaner_id&&(j.cleaner_ids=[j.cleaner_id]),j}),[S,N]=f.useState("basic"),[g,p]=f.useState(t.client_id||""),[y,_]=f.useState(t.brand_id||""),[w,P]=f.useState([]),[D,H]=f.useState([]),[I,F]=f.useState(""),z=i.has(t.id),k=f.useMemo(()=>{if(!I||!I.trim())return[];if(!d||d.length===0)return[];if(!c||!u)return[];const j=I.toLowerCase().trim();if(!j)return[];const q=[];return d.forEach(W=>{if(W)try{const O=(W.name||W.store_name||W.id||"").toLowerCase(),ae=W.client_id&&c.find(pe=>String(pe.id)===String(W.client_id))||null,B=((ae==null?void 0:ae.name)||(ae==null?void 0:ae.client_name)||(ae==null?void 0:ae.company_name)||"").toLowerCase(),ne=W.brand_id&&u.find(pe=>String(pe.id)===String(W.brand_id))||null,A=((ne==null?void 0:ne.name)||(ne==null?void 0:ne.brand_name)||"").toLowerCase(),Q=(W.phone||W.tel||W.phone_number||"").toLowerCase(),he=`${O} ${B} ${A} ${Q}`.trim();he&&he.includes(j)&&q.push({store:W,client:ae||null,brand:ne||null,displayText:`${A||""} / ${O||W.id||""} / ${B||""}`,searchText:he})}catch(O){console.warn("[AppointmentModal] Error processing store for search:",W,O)}}),q.sort((W,O)=>{var ne,A,Q,he;const ae=(((ne=W.store)==null?void 0:ne.name)||((A=W.store)==null?void 0:A.store_name)||"").toLowerCase(),B=(((Q=O.store)==null?void 0:Q.name)||((he=O.store)==null?void 0:he.store_name)||"").toLowerCase();return ae.localeCompare(B)}),q},[I,d,c,u]);f.useEffect(()=>{const j=eo(t);!j.cleaner_ids&&j.cleaner_id&&(j.cleaner_ids=[j.cleaner_id]),v(j),_(t.brand_id||""),p(t.client_id||"")},[t]),f.useEffect(()=>{if(g){const j=d.filter(O=>String(O.client_id)===String(g)),q=new Set(j.map(O=>O.brand_id).filter(Boolean)),W=u.filter(O=>q.has(String(O.id)));P(W)}else P([]),_(""),H([])},[g,d,u]),f.useEffect(()=>{if(y&&g){const j=d.filter(q=>String(q.brand_id)===String(y)&&String(q.client_id)===String(g));H(j)}else H([])},[y,g,d]);const Y=j=>{p(j),_(""),H([]),v(q=>({...q,client_id:j,brand_id:null,store_id:null,target_name:""}))},G=j=>{_(j),H([]),v(q=>({...q,brand_id:j,store_id:null,target_name:""}))},C=j=>{const q=D.find(W=>W.id===j);v(W=>({...W,store_id:j,target_name:q?q.name||q.store_name||"":W.target_name}))};function L(j,q){v(W=>({...W,[j]:q}))}function J(j,q){let W=Ka(j),O=Ka(q);W=Hu(W,0,24*60),O=Hu(O,0,24*60),O<=W&&(O=W+15),v(ae=>({...ae,start_min:W,end_min:O}))}const b=ir(x.status);return r.jsx("div",{className:"modalBackdrop",onMouseDown:s,role:"presentation",children:r.jsxs("div",{className:"modal",onMouseDown:j=>j.stopPropagation(),role:"dialog",children:[r.jsxs("div",{className:"modalHeader",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"modalTitle",children:[" ",n==="create"?"":"",z&&r.jsx("span",{className:"warn",children:""})]}),r.jsx("div",{className:"muted",children:lr(x.date)})]}),r.jsx("button",{type:"button",className:"iconBtn",onClick:s,"aria-label":"",children:""})]}),r.jsx("div",{className:"modalTabs",role:"tablist",children:cx.map(j=>r.jsx("button",{type:"button",role:"tab","aria-selected":S===j.key,className:`modalTab ${S===j.key?"active":""}`,onClick:()=>N(j.key),children:j.label},j.key))}),o&&r.jsx("div",{className:"modalConflictError",role:"alert",children:o}),r.jsxs("div",{className:"modalBody",children:[S==="basic"&&r.jsxs("div",{className:"formGrid",children:[r.jsxs("label",{className:"field",children:[r.jsx("span",{children:""}),r.jsx("input",{type:"date",value:x.date||dateISO,onChange:j=>L("date",j.target.value),style:{width:"100%"}})]}),r.jsxs("label",{className:"field span2",children:[r.jsx("span",{children:""}),r.jsx("div",{className:"cleanerCheckboxes",style:{display:"flex",flexDirection:"column",gap:"8px",maxHeight:"200px",overflowY:"auto",padding:"8px",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"4px"},children:e.map(j=>{const W=(x.cleaner_ids||(x.cleaner_id?[x.cleaner_id]:[])).includes(j.id);return r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[r.jsx("input",{type:"checkbox",checked:W,onChange:O=>{const ae=x.cleaner_ids||(x.cleaner_id?[x.cleaner_id]:[]),B=O.target.checked?[...ae,j.id]:ae.filter(ne=>ne!==j.id);v(ne=>({...ne,cleaner_ids:B,cleaner_id:B[0]||null}))}}),r.jsx("span",{children:j.name})]},j.id)})})]}),r.jsxs("label",{className:"field span2",style:{display:"flex",gap:"12px",flexDirection:"column"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"4px"},children:[r.jsx("span",{style:{fontSize:"13px",color:"var(--text)"},children:""}),r.jsxs(ke,{to:"/office/clients/new",target:"_blank",rel:"noopener noreferrer",onClick:j=>j.stopPropagation(),style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 8px",borderRadius:"4px",background:"rgba(58, 108, 255, 0.15)",border:"1px solid rgba(58, 108, 255, 0.3)",color:"var(--text)",fontSize:"12px",textDecoration:"none",transition:"all 0.2s",whiteSpace:"nowrap"},onMouseEnter:j=>{j.target.style.background="rgba(58, 108, 255, 0.25)",j.target.style.borderColor="rgba(58, 108, 255, 0.5)"},onMouseLeave:j=>{j.target.style.background="rgba(58, 108, 255, 0.15)",j.target.style.borderColor="rgba(58, 108, 255, 0.3)"},children:[r.jsx("span",{children:""}),r.jsx("span",{children:""})]})]}),r.jsxs("div",{style:{position:"relative"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"6px 8px",borderRadius:"4px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(0, 0, 0, 0.2)",color:"var(--text)"},children:[r.jsx("i",{className:"fas fa-search",style:{color:"var(--muted)",fontSize:"14px"}}),r.jsx("input",{type:"text",value:I,onChange:j=>F(j.target.value),placeholder:"...",style:{flex:1,border:"none",background:"transparent",color:"var(--text)",outline:"none",fontSize:"14px"}}),I&&r.jsx("button",{type:"button",onClick:j=>{j.stopPropagation(),F("")},style:{background:"transparent",border:"none",color:"var(--muted)",cursor:"pointer",padding:"0 4px"},"aria-label":"",children:""})]}),I&&k.length>0&&r.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",maxHeight:"400px",overflowY:"auto",background:"rgba(18, 22, 33, 0.95)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",zIndex:1e3,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.3)"},children:k.map((j,q)=>{const W=j.store,O=j.client,ae=j.brand;return r.jsxs("div",{onClick:()=>{W&&(O&&Y(O.id),ae&&G(ae.id),C(W.id),F(""))},style:{padding:"12px",cursor:"pointer",borderBottom:"1px solid rgba(255, 255, 255, 0.1)",color:"var(--text)",transition:"background 0.2s"},onMouseEnter:B=>B.target.style.background="rgba(255, 255, 255, 0.1)",onMouseLeave:B=>B.target.style.background="transparent",children:[r.jsx("div",{style:{fontWeight:"600",marginBottom:"4px",fontSize:"15px"},children:(W==null?void 0:W.name)||(W==null?void 0:W.store_name)||(W==null?void 0:W.id)||""}),r.jsx("div",{style:{fontSize:"13px",color:"var(--muted)",marginBottom:"2px"},children:ae!=null&&ae.name||ae!=null&&ae.brand_name?`: ${ae.name||ae.brand_name}`:": "}),r.jsx("div",{style:{fontSize:"13px",color:"var(--muted)",marginBottom:"2px"},children:O!=null&&O.name||O!=null&&O.client_name?`: ${O.name||O.client_name}`:": "}),W!=null&&W.phone||W!=null&&W.tel||W!=null&&W.phone_number?r.jsxs("div",{style:{fontSize:"12px",color:"var(--muted)"},children:[" ",W.phone||W.tel||W.phone_number]}):null]},(W==null?void 0:W.id)||q)})}),I&&k.length===0&&r.jsx("div",{style:{position:"absolute",top:"100%",left:0,right:0,marginTop:"4px",padding:"12px",background:"rgba(18, 22, 33, 0.95)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"4px",zIndex:1e3,color:"var(--muted)",fontSize:"14px"},children:d.length===0?"":""})]})]}),g&&r.jsxs("div",{style:{marginTop:"8px",padding:"8px 12px",borderRadius:"4px",background:"rgba(58, 108, 255, 0.1)",border:"1px solid rgba(58, 108, 255, 0.3)",fontSize:"13px",color:"var(--text)",gridColumn:"span 2"},children:[r.jsxs("div",{children:[r.jsx("strong",{children:":"})," ",(($=c.find(j=>String(j.id)===String(g)))==null?void 0:$.name)||((V=c.find(j=>String(j.id)===String(g)))==null?void 0:V.client_name)||g]}),y&&r.jsxs("div",{style:{marginTop:"4px"},children:[r.jsx("strong",{children:":"})," ",((ee=u.find(j=>String(j.id)===String(y)))==null?void 0:ee.name)||((se=u.find(j=>String(j.id)===String(y)))==null?void 0:se.brand_name)||y]}),x.store_id&&r.jsxs("div",{style:{marginTop:"4px"},children:[r.jsx("strong",{children:":"})," ",((ie=D.find(j=>String(j.id)===String(x.store_id)))==null?void 0:ie.name)||((ue=D.find(j=>String(j.id)===String(x.store_id)))==null?void 0:ue.store_name)||x.store_id]})]}),r.jsx("div",{style:{marginTop:"12px",gridColumn:"span 2"},children:r.jsxs(ke,{to:"/office/clients/new",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex",alignItems:"center",gap:"6px",padding:"8px 16px",borderRadius:"4px",background:"rgba(58, 108, 255, 0.15)",border:"1px solid rgba(58, 108, 255, 0.3)",color:"var(--text)",textDecoration:"none",fontSize:"14px",fontWeight:"500",transition:"all 0.2s",cursor:"pointer"},onMouseEnter:j=>{j.target.style.background="rgba(58, 108, 255, 0.25)",j.target.style.borderColor="rgba(58, 108, 255, 0.5)"},onMouseLeave:j=>{j.target.style.background="rgba(58, 108, 255, 0.15)",j.target.style.borderColor="rgba(58, 108, 255, 0.3)"},children:[r.jsx("span",{children:""}),r.jsx("span",{children:""})]})}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:""}),r.jsx("input",{type:"time",value:Te(x.start_min),onChange:j=>J(j.target.value,Te(x.end_min)),step:1800})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:""}),r.jsx("input",{type:"time",value:Te(x.end_min),onChange:j=>J(Te(x.start_min),j.target.value),step:1800})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:""}),r.jsx("select",{value:x.work_type,onChange:j=>L("work_type",j.target.value),children:Gp.map(j=>r.jsx("option",{value:j,children:j},j))})]}),r.jsxs("label",{className:"field",children:[r.jsx("span",{children:""}),r.jsx("select",{value:x.status,onChange:j=>L("status",j.target.value),children:Ir.map(j=>r.jsx("option",{value:j.key,children:j.label},j.key))}),r.jsxs("div",{className:`badge preview ${b.colorClass}`,children:[": ",b.label]})]}),r.jsxs("label",{className:"field span2",children:[r.jsx("span",{children:""}),r.jsx("div",{className:"contactRemindersCheckboxes",children:["7","3","1"].map(j=>{const q=(x.contact_reminders||[]).includes(j);return r.jsxs("label",{className:"reminderCheckbox",children:[r.jsx("input",{type:"checkbox",checked:q,onChange:W=>{const O=x.contact_reminders||[],ae=W.target.checked?[...O,j]:O.filter(B=>B!==j);L("contact_reminders",ae)}}),r.jsx("span",{children:j})]},j)})})]})]}),S==="memo"&&r.jsx("div",{className:"formGrid",children:r.jsxs("label",{className:"field span2",children:[r.jsx("span",{children:""}),r.jsx("textarea",{value:x.memo,onChange:j=>L("memo",j.target.value),placeholder:"",rows:5})]})})]}),r.jsxs("div",{className:"modalFooter",children:[r.jsx("div",{className:"left",children:n!=="create"&&r.jsx("button",{type:"button",className:"btnDanger",onClick:()=>l(x.id),children:""})}),r.jsxs("div",{className:"right",children:[r.jsx("button",{type:"button",className:"btn",onClick:s,children:""}),r.jsx("button",{type:"button",className:"btnPrimary",onClick:()=>a(x),disabled:!((we=x.target_name)!=null&&we.trim()),title:(M=x.target_name)!=null&&M.trim()?"":"",children:""})]})]})]})})}function dx(){return r.jsxs("div",{className:"admin-page admin-hr-attendance",children:[r.jsx("h1",{children:"HR Attendance Placeholder"}),r.jsx("p",{style:{color:"var(--muted)"},children:""}),r.jsx("p",{style:{marginTop:16},children:r.jsx(ke,{to:"/admin",children:" TOP "})})]})}async function Vu(e){return mt("/work-report",{method:"PUT",headers:pt(),body:JSON.stringify(e)})}async function fx(e,t){return mt(`/work-report/${e}`,{method:"PATCH",headers:pt(),body:JSON.stringify(t)})}async function px(e={}){const n=new URLSearchParams(e).toString();return mt(n?`/work-report?${n}`:"/work-report",{headers:pt()})}async function mx({filename:e,mime:t,size:n,context:s,date:a,storeIndex:l}){return mt("/upload-url",{method:"POST",headers:pt(),body:JSON.stringify({filename:e,mime:t,size:n,context:s,date:a,storeIndex:l})})}const Ku="CLEANING_DAY_V1",Yu="CLEANING_STORE_V1",hx="cleaning-store-attachment",dr=10,gx=10*1024*1024,Ju=["jpg","jpeg","png","pdf","xlsx","docx","heic"],Hl=(e=!1)=>({enabled:e,store_name:"",address:"",witness:"",work_start_time:"",work_end_time:"",store_minutes:0,note:"",services:[{name:"",minutes:0,memo:""}],attachments:[],saved:{log_id:null,version:null,state:null}});function yx(e){return{store:{name:e.store_name||"",address:e.address||"",witness:e.witness||"",work_start_time:e.work_start_time||"",work_end_time:e.work_end_time||"",note:e.note||""},services:e.services||[],attachments:e.attachments||[]}}function vx(e,t){let n={},s=[{name:"",minutes:0,memo:""}],a=[];try{const l=JSON.parse(e||"{}");n=l.store||{},s=Array.isArray(l.services)&&l.services.length?l.services:s,a=Array.isArray(l.attachments)?l.attachments:[]}catch{}return{enabled:!0,store_name:n.name||(t==null?void 0:t.target_label)||"",address:n.address||"",witness:n.witness||"",work_start_time:n.work_start_time||"",work_end_time:n.work_end_time||"",store_minutes:(t==null?void 0:t.work_minutes)||0,note:n.note||"",services:s,attachments:a,saved:{log_id:(t==null?void 0:t.log_id)??null,version:(t==null?void 0:t.version)??null,state:(t==null?void 0:t.state)??null}}}function xx(e){return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function _x(){return[Hl(!0),Hl(!1),Hl(!1)]}function jx(){return{work_date:new URLSearchParams(typeof window<"u"?window.location.search:"").get("date")||"",total_minutes:0,note:""}}function bx(){const e=tn(),[t,n]=f.useState(jx),[s,a]=f.useState(_x),[l,i]=f.useState({log_id:null,version:null,state:null}),[o,c]=f.useState(0),[d,u]=f.useState(""),[m,h]=f.useState(!1),[x,v]=f.useState({}),[S,N]=f.useState({}),[g,p]=f.useState({}),[y,_]=f.useState({}),[w,P]=f.useState({}),D=f.useRef([]),I=s.filter(M=>M.enabled).reduce((M,j)=>M+(Number(j.store_minutes)||0),0),F=t.total_minutes>0&&I>0&&t.total_minutes!==I,z=f.useCallback(M=>n(j=>({...j,...M})),[]),k=f.useCallback((M,j)=>{a(q=>{const W=[...q];return W[M]=typeof j=="function"?j(W[M]):{...W[M],...j},W})},[]),Y=f.useCallback(M=>{k(M,j=>({...j,services:[...j.services,{name:"",minutes:0,memo:""}]}))},[k]),G=f.useCallback((M,j)=>{k(M,q=>({...q,services:q.services.filter((W,O)=>O!==j)}))},[k]),C=f.useCallback((M,j,q,W)=>{k(M,O=>({...O,services:O.services.map((ae,B)=>B===j?{...ae,[q]:q==="minutes"?Number(W)||0:W}:ae)}))},[k]),L=f.useCallback((M,j)=>{const q=(M.name.split(".").pop()||"").toLowerCase();return Ju.includes(q)?M.size>gx?`${M.name} 10MB `:j>=dr?`1 ${dr} `:"":`${M.name}: ${Ju.join(", ")}`},[]),J=f.useCallback(async(M,j)=>{const q=t.work_date||new Date().toISOString().slice(0,10);P(W=>({...W,[j]:null}));try{const{uploadUrl:W,fileUrl:O,key:ae}=await mx({filename:M.name,mime:M.type||"application/octet-stream",size:M.size,context:hx,date:q,storeIndex:j});if(!(await fetch(W,{method:"PUT",body:M,headers:{"Content-Type":M.type||"application/octet-stream"}})).ok)throw new Error("");const ne={name:M.name,mime:M.type||"application/octet-stream",size:M.size,url:O,key:ae,uploaded_at:new Date().toISOString()};k(j,A=>({...A,attachments:[...A.attachments||[],ne]}))}catch(W){P(O=>({...O,[j]:W.message||""}))}},[t.work_date,k]),b=f.useCallback(async(M,j)=>{var B,ne;const q=Array.from(j||[]),W=((ne=(B=s[M])==null?void 0:B.attachments)==null?void 0:ne.length)||0;let O="";for(let A=0;A<q.length&&(O=L(q[A],W+A),!O);A++);if(!O&&W+q.length>dr&&(O=`1 ${dr} `),O){P(A=>({...A,[M]:O}));return}_(A=>({...A,[M]:!0})),P(A=>({...A,[M]:null}));for(const A of q)await J(A,M);_(A=>({...A,[M]:!1}));const ae=D.current[M];ae&&(ae.value="")},[s,L,J]),$=f.useCallback((M,j)=>{k(M,q=>({...q,attachments:(q.attachments||[]).filter((W,O)=>O!==j)})),P(q=>({...q,[M]:null}))},[k]),V=f.useCallback(()=>{var M;return(M=t.work_date)!=null&&M.trim()?Number(t.total_minutes)<=0?"":"":""},[t.work_date,t.total_minutes]),ee=f.useCallback((M,j)=>{var W,O,ae;const q=[];return(W=M.store_name)!=null&&W.trim()||q.push(`${j+1}: `),Number(M.store_minutes)<=0&&q.push(`${j+1}: `),(O=M.services)!=null&&O.length||q.push(`${j+1}: 1`),(ae=M.services)==null||ae.forEach((B,ne)=>{var A;(A=B.name)!=null&&A.trim()||q.push(`${j+1} ${ne+1}: `),Number(B.minutes)<=0&&q.push(`${j+1} ${ne+1}: `)}),q},[]),se=f.useCallback(async()=>{const M=V();if(u(M),!M){h(!0);try{const j={date:t.work_date,work_date:t.work_date,work_minutes:Number(t.total_minutes),template_id:Ku,state:"draft",description:JSON.stringify({note:t.note,stores_enabled:s.map(W=>W.enabled)})};l.log_id&&(j.log_id=l.log_id,j.version=l.version);const q=await Vu(j);i({log_id:q.log_id,version:q.version,state:q.state}),u("")}catch(j){u(j.message||"")}finally{h(!1)}}},[t,s,l,V]),ie=f.useCallback(async M=>{var q;const j=s[M];N(W=>({...W,[M]:!0})),v(W=>({...W,[M]:null}));try{const W={date:t.work_date||new Date().toISOString().slice(0,10),work_date:t.work_date||new Date().toISOString().slice(0,10),work_minutes:Number(j.store_minutes)||0,template_id:Yu,state:"draft",target_label:j.store_name||`${M+1}`,description:JSON.stringify(yx(j))};(q=j.saved)!=null&&q.log_id&&(W.log_id=j.saved.log_id,W.version=j.saved.version);const O=await Vu(W);k(M,ae=>({...ae,saved:{log_id:O.log_id,version:O.version,state:O.state}}))}catch(W){v(O=>({...O,[M]:W.message||""}))}finally{N(W=>({...W,[M]:!1}))}},[s,t.work_date,k]),ue=f.useCallback(async M=>{var W;const j=s[M],q=ee(j,M);if(q.length){p(O=>({...O,[M]:q.join(" ")}));return}if(p(O=>({...O,[M]:null})),!((W=j.saved)!=null&&W.log_id)){p(O=>({...O,[M]:""}));return}N(O=>({...O,[M]:!0}));try{await fx(j.saved.log_id,{state:"submitted",version:j.saved.version}),k(M,O=>{var ae;return{...O,saved:{...O.saved,state:"submitted",version:(((ae=O.saved)==null?void 0:ae.version)||0)+1}}})}catch(O){p(ae=>({...ae,[M]:O.message||""}))}finally{N(O=>({...O,[M]:!1}))}},[s,ee,k]);f.useEffect(()=>{const j=new URLSearchParams(e.search).get("date")||t.work_date;j&&px({date:j}).then(q=>{if(!q||!Array.isArray(q)||q.length===0)return;const W=q.find(ae=>ae.template_id===Ku);W&&(n(ae=>({...ae,work_date:W.work_date||j,total_minutes:W.work_minutes||0,note:(()=>{try{return JSON.parse(W.description||"{}").note||""}catch{return""}})()})),i({log_id:W.log_id,version:W.version,state:W.state}));const O=q.filter(ae=>ae.template_id===Yu);O.length>0&&a(ae=>{const B=[...ae];return O.slice(0,3).forEach((ne,A)=>{B[A]=vx(ne.description,ne)}),B})}).catch(q=>{})},[e.search]);const we=M=>M!=null&&M.log_id?M.state==="submitted"||M.state==="approved"?"":"":"";return r.jsxs("div",{className:"report-page cleaning-day-report-page","data-job":"cleaning",children:[r.jsx("div",{className:"report-page-viz",children:r.jsx(at,{mode:"base",className:"report-page-visualizer"})}),r.jsxs("div",{className:"report-page-content cleaning-day-content",children:[r.jsx("h1",{className:"cleaning-day-title",children:""}),r.jsxs("section",{className:"cleaning-day-header",children:[r.jsxs("div",{className:"cleaning-day-header-row",children:[r.jsx("label",{htmlFor:"cd-work-date",children:""}),r.jsx("input",{id:"cd-work-date",type:"date",value:t.work_date,onChange:M=>z({work_date:M.target.value})})]}),r.jsxs("div",{className:"cleaning-day-header-row",children:[r.jsx("label",{htmlFor:"cd-total-min",children:""}),r.jsx("input",{id:"cd-total-min",type:"number",min:0,value:t.total_minutes||"",onChange:M=>z({total_minutes:M.target.value})})]}),r.jsxs("div",{className:"cleaning-day-header-row",children:[r.jsx("label",{htmlFor:"cd-note",children:""}),r.jsx("input",{id:"cd-note",type:"text",value:t.note,onChange:M=>z({note:M.target.value}),placeholder:""})]}),r.jsx("div",{className:"cleaning-day-header-actions",children:r.jsx("button",{type:"button",className:"btn",onClick:se,disabled:m,children:m?"...":""})}),d&&r.jsx("p",{className:"cleaning-day-error",children:d}),F&&r.jsxs("p",{className:"cleaning-day-warning",children:["",t.total_minutes,"",I,""]})]}),r.jsx("div",{className:"cleaning-day-tabs",children:[0,1,2].map(M=>{var j,q;return r.jsxs("button",{type:"button",className:`cleaning-day-tab ${o===M?"active":""} ${s[M].enabled?"":"disabled"}`,onClick:()=>c(M),children:[r.jsxs("span",{className:"cleaning-day-tab-label",children:["",M+1,(j=s[M].store_name)!=null&&j.trim()?`${s[M].store_name}`:""]}),M>0&&r.jsxs("label",{className:"cleaning-day-tab-enable",onClick:W=>W.stopPropagation(),children:[r.jsx("input",{type:"checkbox",checked:s[M].enabled,onChange:W=>k(M,{enabled:W.target.checked})}),""]}),r.jsx("span",{className:"cleaning-day-tab-badge",title:(q=s[M].saved)!=null&&q.log_id?s[M].saved.state==="submitted"||s[M].saved.state==="approved"?"":"":"",children:we(s[M].saved)})]},M)})}),s.map((M,j)=>{var q,W;return M.enabled&&r.jsxs("div",{className:`cleaning-day-panel ${o===j?"active":""}`,hidden:o!==j,children:[r.jsxs("div",{className:"cleaning-day-store-fields",children:[r.jsxs("div",{className:"cleaning-day-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",value:M.store_name,onChange:O=>k(j,{store_name:O.target.value})})]}),r.jsxs("div",{className:"cleaning-day-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",value:M.address,onChange:O=>k(j,{address:O.target.value})})]}),r.jsxs("div",{className:"cleaning-day-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",value:M.witness,onChange:O=>k(j,{witness:O.target.value})})]}),r.jsxs("div",{className:"cleaning-day-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"time",value:M.work_start_time,onChange:O=>k(j,{work_start_time:O.target.value})})]}),r.jsxs("div",{className:"cleaning-day-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"time",value:M.work_end_time,onChange:O=>k(j,{work_end_time:O.target.value})})]}),r.jsxs("div",{className:"cleaning-day-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"number",min:0,value:M.store_minutes||"",onChange:O=>k(j,{store_minutes:O.target.value})})]}),r.jsxs("div",{className:"cleaning-day-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",value:M.note,onChange:O=>k(j,{note:O.target.value})})]})]}),r.jsxs("section",{className:"cleaning-day-attachments",children:[r.jsx("h3",{children:""}),r.jsx("input",{ref:O=>{D.current[j]=O},type:"file",multiple:!0,accept:".jpg,.jpeg,.png,.pdf,.xlsx,.docx,.heic,image/jpeg,image/png,application/pdf,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.openxmlformats-officedocument.wordprocessingml.document,image/heic",className:"cleaning-day-file-input",onChange:O=>{b(j,O.target.files)}}),r.jsx("button",{type:"button",className:"btn btn-sm",disabled:y[j]||(((q=M.attachments)==null?void 0:q.length)||0)>=dr,onClick:()=>{var O;return(O=D.current[j])==null?void 0:O.click()},children:y[j]?"...":""}),r.jsxs("p",{className:"cleaning-day-attachments-hint",children:[" ",dr," 1 10MB jpg, png, pdf, xlsx, docx, heic"]}),(((W=M.attachments)==null?void 0:W.length)||0)>0&&r.jsx("ul",{className:"cleaning-day-attachment-list",children:(M.attachments||[]).map((O,ae)=>r.jsxs("li",{className:"cleaning-day-attachment-row",children:[r.jsx("span",{className:"cleaning-day-attachment-name",title:O.name,children:O.name}),r.jsx("span",{className:"cleaning-day-attachment-size",children:xx(O.size)}),O.url&&r.jsx("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"cleaning-day-attachment-open",children:""}),r.jsx("button",{type:"button",className:"cleaning-day-attachment-remove",onClick:()=>$(j,ae),title:"",children:""})]},ae))}),w[j]&&r.jsx("p",{className:"cleaning-day-error",children:w[j]})]}),r.jsxs("div",{className:"cleaning-day-services",children:[r.jsx("h3",{children:""}),M.services.map((O,ae)=>r.jsxs("div",{className:"cleaning-day-service-row",children:[r.jsx("input",{type:"text",placeholder:"",value:O.name,onChange:B=>C(j,ae,"name",B.target.value)}),r.jsx("input",{type:"number",min:0,placeholder:"",value:O.minutes||"",onChange:B=>C(j,ae,"minutes",B.target.value)}),r.jsx("input",{type:"text",placeholder:"",value:O.memo,onChange:B=>C(j,ae,"memo",B.target.value)}),r.jsx("button",{type:"button",className:"btn btn-sm",onClick:()=>G(j,ae),disabled:M.services.length<=1,children:""})]},ae)),r.jsx("button",{type:"button",className:"btn btn-sm",onClick:()=>Y(j),children:"+ "})]}),r.jsxs("div",{className:"cleaning-day-store-actions",children:[r.jsx("button",{type:"button",className:"btn",onClick:()=>ie(j),disabled:S[j],children:S[j]?"...":""}),r.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>ue(j),disabled:S[j],children:""})]}),x[j]&&r.jsx("p",{className:"cleaning-day-error",children:x[j]}),g[j]&&r.jsx("p",{className:"cleaning-day-error",children:g[j]})]},j)}),r.jsx("p",{className:"report-page-back",children:r.jsx(ke,{to:"/jobs/cleaning/entrance",children:""})})]})]})}function Sx({jobKey:e}){return r.jsxs("div",{className:"report-page","data-job":e||void 0,children:[r.jsx("div",{className:"report-page-viz",children:r.jsx(at,{mode:"base",className:"report-page-visualizer"})}),r.jsxs("div",{className:"report-page-content",children:[r.jsx("p",{className:"report-page-muted",children:""}),r.jsx("p",{className:"report-page-back",children:r.jsx(ke,{to:e?`/jobs/${e}/entrance`:"/portal",children:""})})]})]})}function kx(){const{job:e}=ar();return e==="cleaning"?r.jsx(bx,{}):r.jsx(Sx,{jobKey:e})}async function ia(e){return mt("/work-report",{method:"PUT",headers:pt(),body:JSON.stringify(e)})}async function wx(e={}){const n=new URLSearchParams(e).toString();return mt(n?`/work-report?${n}`:"/work-report",{headers:pt()})}async function Nx(e,t=30){var l;const n=new Date,s=[],a=new Set;for(let i=0;i<t;i++){const o=new Date(n);o.setDate(o.getDate()-i);const c=o.toISOString().slice(0,10);try{const d=await wx({date:c});if(!Array.isArray(d))continue;for(const u of d){let m=!1;try{const h=typeof u.description=="string"?JSON.parse(u.description||"{}"):u.description||{};(((l=h.store)==null?void 0:l.key)===e||h.store_key===e)&&(m=!0)}catch{}m&&u.log_id&&!a.has(u.log_id)&&(a.add(u.log_id),s.push(u))}}catch{}}return s}async function Cx({filename:e,mime:t,size:n,context:s,date:a,storeKey:l}){return mt("/upload-url",{method:"POST",headers:pt(),body:JSON.stringify({filename:e,mime:t,size:n,context:s,date:a,storeKey:l})})}const Qu="SALES_ENTITY_V1",Gu="SALES_ACTIVITY_V1",Vl="SALES_TODO_V1",fr=10,Ex=10*1024*1024,qu=["jpg","jpeg","png","pdf","xlsx","docx","heic"],Xu=[{value:"new",label:""},{value:"contacted",label:""},{value:"qualified",label:""},{value:"proposal",label:""},{value:"estimate",label:""},{value:"won",label:""},{value:"lost",label:""}],Zu=[{value:"visit",label:""},{value:"call",label:""},{value:"email",label:""},{value:"other",label:""}];function Tx(e=""){return{store:{key:e,company_name:"",brand_name:"",store_name:"",address:"",tel:"",contact_person:"",email:""},pipeline:"new",note:"",attachments:[],saved:{log_id:null,version:null,state:null}}}function ed(e="",t=""){return{store_key:e,store_name:t,type:"visit",datetime:new Date().toISOString().slice(0,16),summary:"",detail:"",pipeline_after:"",attachments:[],saved:{log_id:null,version:null,state:null}}}function td(e="",t=""){return{store_key:e,store_name:t,due_date:"",title:"",note:"",status:"open",attachments:[],saved:{log_id:null,version:null,state:null}}}function $x(e){return{store:{...e.store},pipeline:e.pipeline||"new",note:e.note||"",attachments:e.attachments||[]}}function Px(e,t){let n={key:"",company_name:"",brand_name:"",store_name:"",address:"",tel:"",contact_person:"",email:""},s="new",a="",l=[];try{const i=JSON.parse(e||"{}");n={...n,...i.store||{}},s=i.pipeline||"new",a=i.note||"",l=Array.isArray(i.attachments)?i.attachments:[]}catch{}return{store:n,pipeline:s,note:a,attachments:l,saved:{log_id:(t==null?void 0:t.log_id)??null,version:(t==null?void 0:t.version)??null,state:(t==null?void 0:t.state)??null}}}function zx(e){return{store_key:e.store_key||"",store_name:e.store_name||"",type:e.type||"visit",datetime:e.datetime||"",summary:e.summary||"",detail:e.detail||"",pipeline_after:e.pipeline_after||"",attachments:e.attachments||[]}}function Ax(e,t){let n={};try{n=JSON.parse(e||"{}")}catch{}return{store_key:n.store_key||"",store_name:n.store_name||"",type:n.type||"visit",datetime:n.datetime||"",summary:n.summary||"",detail:n.detail||"",pipeline_after:n.pipeline_after||"",attachments:Array.isArray(n.attachments)?n.attachments:[],saved:{log_id:(t==null?void 0:t.log_id)??null,version:(t==null?void 0:t.version)??null,state:(t==null?void 0:t.state)??null}}}function nd(e){return{store_key:e.store_key||"",store_name:e.store_name||"",due_date:e.due_date||"",title:e.title||"",note:e.note||"",status:e.status||"open",attachments:e.attachments||[]}}function Mx(e,t){let n={};try{n=JSON.parse(e||"{}")}catch{}return{store_key:n.store_key||"",store_name:n.store_name||"",due_date:n.due_date||"",title:n.title||"",note:n.note||"",status:n.status||"open",attachments:Array.isArray(n.attachments)?n.attachments:[],saved:{log_id:(t==null?void 0:t.log_id)??null,version:(t==null?void 0:t.version)??null,state:(t==null?void 0:t.state)??null}}}function Lx(e){return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function Rx(){var Oe,U,re,ye,ve,fe,le,ce,$e,be,Se,ge,ht,Yt,gn,or;const{storeKey:e}=ar(),t=e?decodeURIComponent(e):"",[n,s]=f.useState(()=>Tx(t)),[a,l]=f.useState([]),[i,o]=f.useState([]),[c,d]=f.useState(!0),[u,m]=f.useState(""),[h,x]=f.useState(!1),[v,S]=f.useState(""),[N,g]=f.useState({}),[p,y]=f.useState({}),[_,w]=f.useState({}),[P,D]=f.useState({}),[H,I]=f.useState({section:null,id:null}),[F,z]=f.useState({}),[k,Y]=f.useState(!1),[G,C]=f.useState(!1),[L,J]=f.useState("entity"),[b,$]=f.useState(()=>{var E;return ed(t,((E=n.store)==null?void 0:E.store_name)||"")}),[V,ee]=f.useState(()=>{var E;return td(t,((E=n.store)==null?void 0:E.store_name)||"")}),se=f.useRef({}),ie=new Date().toISOString().slice(0,10),ue=f.useCallback(E=>{s(K=>typeof E=="function"?E(K):{...K,...E})},[]),we=f.useCallback((E,K)=>{l(xe=>{const je=[...xe];return je[E]=typeof K=="function"?K(je[E]):{...je[E],...K},je})},[]),M=f.useCallback((E,K)=>{o(xe=>{const je=[...xe];return je[E]=typeof K=="function"?K(je[E]):{...je[E],...K},je})},[]),j=f.useCallback(()=>{var E,K;return(K=(E=n.store)==null?void 0:E.store_name)!=null&&K.trim()?"":""},[(Oe=n.store)==null?void 0:Oe.store_name]),q=f.useCallback(E=>{var K;return(K=E.summary)!=null&&K.trim()?"":""},[]),W=f.useCallback(E=>{var K,xe;return(K=E.due_date)!=null&&K.trim()?(xe=E.title)!=null&&xe.trim()?"":"ToDo":"ToDo"},[]),O=f.useCallback((E,K)=>{const xe=(E.name.split(".").pop()||"").toLowerCase();return qu.includes(xe)?E.size>Ex?`${E.name} 10MB `:K>=fr?` ${fr} `:"":`${E.name}: ${qu.join(", ")}`},[]),ae=f.useCallback(async(E,K,xe)=>{z(je=>({...je,[xe.key]:null})),I({section:xe.section,id:xe.id});try{const{uploadUrl:je,fileUrl:de,key:ze}=await Cx({filename:E.name,mime:E.type||"application/octet-stream",size:E.size,context:K,date:ie,storeKey:t});if(!(await fetch(je,{method:"PUT",body:E,headers:{"Content-Type":E.type||"application/octet-stream"}})).ok)throw new Error("");const Ae={name:E.name,mime:E.type||"application/octet-stream",size:E.size,url:de,key:ze,uploaded_at:new Date().toISOString()};xe.section==="entity"?ue(Me=>({...Me,attachments:[...Me.attachments||[],Ae]})):xe.section==="activity"?we(xe.id,Me=>({...Me,attachments:[...Me.attachments||[],Ae]})):xe.section==="todo"&&M(xe.id,Me=>({...Me,attachments:[...Me.attachments||[],Ae]}))}catch(je){z(de=>({...de,[xe.key]:je.message||""}))}finally{I({section:null,id:null})}},[t,ie,ue,we,M]),B=f.useCallback(async(E,K,xe,je)=>{const de=Array.from(xe||[]);let ze="";for(let zt=0;zt<de.length&&(ze=O(de[zt],je+zt),!ze);zt++);!ze&&je+de.length>fr&&(ze=` ${fr} `);const me=E==="entity"?"entity":`${E}-${K}`;if(ze){z(zt=>({...zt,[me]:ze}));return}z(zt=>({...zt,[me]:null}));const Ae=E==="entity"?"sales-entity-attachment":E==="activity"?"sales-activity-attachment":"sales-todo-attachment";for(const zt of de)await ae(zt,Ae,{section:E,id:K,key:me});const Me=E==="entity"?"entity":`${E}-${K}`,Hr=se.current[Me];Hr&&(Hr.value="")},[O,ae]),ne=f.useCallback((E,K,xe)=>{const je=E==="entity"?"entity":`${E}-${K}`;z(de=>({...de,[je]:null})),E==="entity"?ue(de=>({...de,attachments:(de.attachments||[]).filter((ze,me)=>me!==xe)})):E==="activity"?we(K,de=>({...de,attachments:(de.attachments||[]).filter((ze,me)=>me!==xe)})):E==="todo"&&M(K,de=>({...de,attachments:(de.attachments||[]).filter((ze,me)=>me!==xe)}))},[ue,we,M]),A=f.useCallback(async()=>{var K,xe;const E=j();if(S(E),!E){x(!0);try{const je={date:ie,work_date:ie,work_minutes:0,template_id:Qu,state:"draft",target_label:((K=n.store)==null?void 0:K.store_name)||t,description:JSON.stringify($x(n))};(xe=n.saved)!=null&&xe.log_id&&(je.log_id=n.saved.log_id,je.version=n.saved.version);const de=await ia(je);s(ze=>({...ze,saved:{log_id:de.log_id,version:de.version,state:de.state}})),S("")}catch(je){S(je.message||"")}finally{x(!1)}}},[n,t,ie,j]),Q=f.useCallback(async E=>{var je,de,ze;const K=E===-1?b:a[E],xe=q(K);if(y(E===-1?me=>({...me,new:xe}):me=>({...me,[E]:xe})),!xe){g(me=>({...me,[E]:!0}));try{const me={date:ie,work_date:ie,work_minutes:0,template_id:Gu,state:"draft",target_label:K.store_name||((je=n.store)==null?void 0:je.store_name)||t,description:JSON.stringify(zx(K))};E>=0&&((de=K.saved)!=null&&de.log_id)&&(me.log_id=K.saved.log_id,me.version=K.saved.version);const Ae=await ia(me);E===-1?(l(Me=>[{...b,saved:{log_id:Ae.log_id,version:Ae.version,state:Ae.state}},...Me]),$(ed(t,((ze=n.store)==null?void 0:ze.store_name)||"")),Y(!1)):we(E,Me=>({...Me,saved:{log_id:Ae.log_id,version:Ae.version,state:Ae.state}})),y(Me=>({...Me,[E]:null,new:null})),K.pipeline_after&&ue(Me=>({...Me,pipeline:K.pipeline_after}))}catch(me){y(Ae=>({...Ae,[E]:me.message||""}))}finally{g(me=>({...me,[E]:!1}))}}},[a,b,(U=n.store)==null?void 0:U.store_name,t,ie,q,we,ue]),he=f.useCallback(async E=>{var je,de,ze;const K=E===-1?V:i[E],xe=W(K);if(D(E===-1?me=>({...me,new:xe}):me=>({...me,[E]:xe})),!xe){w(me=>({...me,[E]:!0}));try{const me={date:K.due_date||ie,work_date:K.due_date||ie,work_minutes:0,template_id:Vl,state:"draft",target_label:K.store_name||((je=n.store)==null?void 0:je.store_name)||t,description:JSON.stringify(nd(K))};E>=0&&((de=K.saved)!=null&&de.log_id)&&(me.log_id=K.saved.log_id,me.version=K.saved.version);const Ae=await ia(me);E===-1?(o(Me=>[...Me,{...V,saved:{log_id:Ae.log_id,version:Ae.version,state:Ae.state}}]),ee(td(t,((ze=n.store)==null?void 0:ze.store_name)||"")),C(!1)):M(E,Me=>({...Me,saved:{log_id:Ae.log_id,version:Ae.version,state:Ae.state}})),D(Me=>({...Me,[E]:null,new:null}))}catch(me){D(Ae=>({...Ae,[E]:me.message||""}))}finally{w(me=>({...me,[E]:!1}))}}},[i,V,(re=n.store)==null?void 0:re.store_name,t,ie,W,M]),pe=f.useCallback(async E=>{var de,ze;const K=i[E],xe=K.status==="open"?"done":"open",je={...K,status:xe};w(me=>({...me,[E]:!0}));try{const me={date:je.due_date||ie,work_date:je.due_date||ie,work_minutes:0,template_id:Vl,state:"draft",target_label:je.store_name||((de=n.store)==null?void 0:de.store_name)||t,description:JSON.stringify(nd(je))};(ze=K.saved)!=null&&ze.log_id&&(me.log_id=K.saved.log_id,me.version=K.saved.version);const Ae=await ia(me);M(E,Me=>({...Me,status:xe,saved:{log_id:Ae.log_id,version:Ae.version,state:Ae.state}})),D(Me=>({...Me,[E]:null}))}catch(me){D(Ae=>({...Ae,[E]:me.message||""}))}finally{w(me=>({...me,[E]:!1}))}},[i,(ye=n.store)==null?void 0:ye.store_name,t,ie,M]);if(f.useEffect(()=>{if(!t){d(!1),m("");return}s(E=>({...E,store:{...E.store,key:t}})),Nx(t,30).then(E=>{const K=E.find(de=>{var ze;if(de.template_id!==Qu)return!1;try{return((ze=JSON.parse(de.description||"{}").store)==null?void 0:ze.key)===t}catch{return!1}})||null,xe=E.filter(de=>de.template_id===Gu),je=E.filter(de=>de.template_id===Vl);K&&s(Px(K.description,K)),l(xe.map(de=>Ax(de.description,de)).sort((de,ze)=>(ze.datetime||"").localeCompare(de.datetime||""))),o(je.map(de=>Mx(de.description,de))),m("")}).catch(E=>m(E.message||"")).finally(()=>d(!1))},[t]),f.useEffect(()=>{$(E=>{var K;return{...E,store_key:t,store_name:((K=n.store)==null?void 0:K.store_name)||""}}),ee(E=>{var K;return{...E,store_key:t,store_name:((K=n.store)==null?void 0:K.store_name)||""}})},[t,(ve=n.store)==null?void 0:ve.store_name]),c)return r.jsx("div",{className:"sales-karte-page",children:r.jsx("p",{className:"sales-karte-loading",children:"..."})});if(u&&!((fe=n.saved)!=null&&fe.log_id))return r.jsxs("div",{className:"sales-karte-page",children:[r.jsx("p",{className:"sales-karte-error",children:u}),r.jsx("p",{children:r.jsx(ke,{to:"/",children:"Portal "})})]});const qe=(E,K)=>H.section===E&&H.id===K;return r.jsxs("div",{className:"report-page sales-karte-page","data-job":"sales",children:[r.jsx("div",{className:"report-page-viz",children:r.jsx(at,{mode:"base",className:"report-page-visualizer"})}),r.jsxs("div",{className:"report-page-content sales-karte-content",children:[r.jsxs("h1",{className:"sales-karte-title",children:["",((le=n.store)==null?void 0:le.store_name)||t||""]}),r.jsxs("p",{className:"report-page-back",children:[r.jsx(ke,{to:"/",children:"Portal "})," / ",r.jsx(ke,{to:"/jobs/sales/entrance",children:""})," / ",r.jsx(ke,{to:"/sales/kartes",children:""})]}),r.jsxs("div",{className:"sales-karte-tabs",role:"tablist","aria-label":"",children:[r.jsx("button",{type:"button",role:"tab","aria-selected":L==="entity","aria-controls":"sales-karte-panel-entity",id:"sales-karte-tab-entity",className:`sales-karte-tab ${L==="entity"?"is-active":""}`,onClick:()=>J("entity"),children:""}),r.jsx("button",{type:"button",role:"tab","aria-selected":L==="activities","aria-controls":"sales-karte-panel-activities",id:"sales-karte-tab-activities",className:`sales-karte-tab ${L==="activities"?"is-active":""}`,onClick:()=>J("activities"),children:""}),r.jsx("button",{type:"button",role:"tab","aria-selected":L==="todos","aria-controls":"sales-karte-panel-todos",id:"sales-karte-tab-todos",className:`sales-karte-tab ${L==="todos"?"is-active":""}`,onClick:()=>J("todos"),children:""})]}),r.jsxs("section",{id:"sales-karte-panel-entity",role:"tabpanel","aria-labelledby":"sales-karte-tab-entity",className:"sales-karte-card sales-karte-entity",hidden:L!=="entity",children:[r.jsx("h2",{children:""}),r.jsxs("div",{className:"sales-karte-fields",children:[r.jsxs("div",{className:"sales-karte-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",value:((ce=n.store)==null?void 0:ce.store_name)||"",onChange:E=>ue(K=>({...K,store:{...K.store,store_name:E.target.value}}))})]}),r.jsxs("div",{className:"sales-karte-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",value:(($e=n.store)==null?void 0:$e.company_name)||"",onChange:E=>ue(K=>({...K,store:{...K.store,company_name:E.target.value}}))})]}),r.jsxs("div",{className:"sales-karte-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",value:((be=n.store)==null?void 0:be.brand_name)||"",onChange:E=>ue(K=>({...K,store:{...K.store,brand_name:E.target.value}}))})]}),r.jsxs("div",{className:"sales-karte-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",value:((Se=n.store)==null?void 0:Se.address)||"",onChange:E=>ue(K=>({...K,store:{...K.store,address:E.target.value}}))})]}),r.jsxs("div",{className:"sales-karte-field",children:[r.jsx("label",{children:"TEL"}),r.jsx("input",{type:"text",value:((ge=n.store)==null?void 0:ge.tel)||"",onChange:E=>ue(K=>({...K,store:{...K.store,tel:E.target.value}}))})]}),r.jsxs("div",{className:"sales-karte-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",value:((ht=n.store)==null?void 0:ht.contact_person)||"",onChange:E=>ue(K=>({...K,store:{...K.store,contact_person:E.target.value}}))})]}),r.jsxs("div",{className:"sales-karte-field",children:[r.jsx("label",{children:"Email"}),r.jsx("input",{type:"email",value:((Yt=n.store)==null?void 0:Yt.email)||"",onChange:E=>ue(K=>({...K,store:{...K.store,email:E.target.value}}))})]}),r.jsxs("div",{className:"sales-karte-field",children:[r.jsx("label",{children:""}),r.jsx("select",{value:n.pipeline||"new",onChange:E=>ue({pipeline:E.target.value}),children:Xu.map(E=>r.jsx("option",{value:E.value,children:E.label},E.value))})]}),r.jsxs("div",{className:"sales-karte-field",children:[r.jsx("label",{children:""}),r.jsx("textarea",{value:n.note||"",onChange:E=>ue({note:E.target.value}),rows:3})]})]}),r.jsxs("div",{className:"sales-karte-attachments",children:[r.jsx("h3",{children:""}),r.jsx("input",{ref:E=>{se.current.entity=E},type:"file",multiple:!0,accept:".jpg,.jpeg,.png,.pdf,.xlsx,.docx,.heic",className:"sales-karte-file-input",onChange:E=>{var K;return B("entity",0,E.target.files,((K=n.attachments)==null?void 0:K.length)||0)}}),r.jsx("button",{type:"button",className:"btn btn-sm",disabled:qe("entity",0)||(((gn=n.attachments)==null?void 0:gn.length)||0)>=fr,onClick:()=>{var E;return(E=se.current.entity)==null?void 0:E.click()},children:qe("entity",0)?"...":""}),r.jsxs("p",{className:"sales-karte-attachments-hint",children:[" ",fr," 1 10MB "]}),(((or=n.attachments)==null?void 0:or.length)||0)>0&&r.jsx("ul",{className:"sales-karte-attachment-list",children:(n.attachments||[]).map((E,K)=>r.jsxs("li",{className:"sales-karte-attachment-row",children:[r.jsx("span",{className:"sales-karte-attachment-name",title:E.name,children:E.name}),r.jsx("span",{className:"sales-karte-attachment-size",children:Lx(E.size)}),E.url&&r.jsx("a",{href:E.url,target:"_blank",rel:"noopener noreferrer",className:"sales-karte-attachment-open",children:""}),r.jsx("button",{type:"button",className:"sales-karte-attachment-remove",onClick:()=>ne("entity",0,K),title:"",children:""})]},K))}),F.entity&&r.jsx("p",{className:"sales-karte-error",children:F.entity})]}),r.jsx("div",{className:"sales-karte-actions",children:r.jsx("button",{type:"button",className:"btn",onClick:A,disabled:h,children:h?"...":""})}),v&&r.jsx("p",{className:"sales-karte-error",children:v})]}),r.jsxs("section",{id:"sales-karte-panel-activities",role:"tabpanel","aria-labelledby":"sales-karte-tab-activities",className:"sales-karte-card sales-karte-activities",hidden:L!=="activities",children:[r.jsx("h2",{children:""}),k?r.jsxs("div",{className:"sales-karte-activity-form",children:[r.jsxs("div",{className:"sales-karte-fields",children:[r.jsxs("div",{className:"sales-karte-field",children:[r.jsx("label",{children:""}),r.jsx("select",{value:b.type,onChange:E=>$(K=>({...K,type:E.target.value})),children:Zu.map(E=>r.jsx("option",{value:E.value,children:E.label},E.value))})]}),r.jsxs("div",{className:"sales-karte-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"datetime-local",value:b.datetime,onChange:E=>$(K=>({...K,datetime:E.target.value}))})]}),r.jsxs("div",{className:"sales-karte-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",value:b.summary,onChange:E=>$(K=>({...K,summary:E.target.value}))})]}),r.jsxs("div",{className:"sales-karte-field",children:[r.jsx("label",{children:""}),r.jsx("textarea",{value:b.detail,onChange:E=>$(K=>({...K,detail:E.target.value})),rows:2})]}),r.jsxs("div",{className:"sales-karte-field",children:[r.jsx("label",{children:""}),r.jsxs("select",{value:b.pipeline_after,onChange:E=>$(K=>({...K,pipeline_after:E.target.value})),children:[r.jsx("option",{value:"",children:""}),Xu.map(E=>r.jsx("option",{value:E.value,children:E.label},E.value))]})]})]}),r.jsxs("div",{className:"sales-karte-actions",children:[r.jsx("button",{type:"button",className:"btn",onClick:()=>Q(-1),disabled:N.new,children:""}),r.jsx("button",{type:"button",className:"btn btn-sm",onClick:()=>{Y(!1),y(E=>({...E,new:null}))},children:""})]}),p.new&&r.jsx("p",{className:"sales-karte-error",children:p.new})]}):r.jsx("button",{type:"button",className:"btn btn-sm",onClick:()=>Y(!0),children:"+ "}),r.jsx("ul",{className:"sales-karte-activity-list",children:a.map((E,K)=>{var xe,je;return r.jsxs("li",{className:"sales-karte-activity-item",children:[r.jsx("span",{className:"sales-karte-activity-type",children:((xe=Zu.find(de=>de.value===E.type))==null?void 0:xe.label)||E.type}),r.jsx("span",{className:"sales-karte-activity-datetime",children:E.datetime}),r.jsx("span",{className:"sales-karte-activity-summary",children:E.summary}),E.detail&&r.jsx("p",{className:"sales-karte-activity-detail",children:E.detail}),((je=E.attachments)==null?void 0:je.length)>0&&r.jsx("ul",{className:"sales-karte-attachment-list small",children:E.attachments.map((de,ze)=>r.jsx("li",{children:de.url?r.jsx("a",{href:de.url,target:"_blank",rel:"noopener noreferrer",children:de.name}):de.name},ze))}),r.jsx("button",{type:"button",className:"btn btn-sm",onClick:()=>Q(K),disabled:N[K],children:""}),p[K]&&r.jsx("p",{className:"sales-karte-error",children:p[K]})]},K)})})]}),r.jsxs("section",{id:"sales-karte-panel-todos",role:"tabpanel","aria-labelledby":"sales-karte-tab-todos",className:"sales-karte-card sales-karte-todos",hidden:L!=="todos",children:[r.jsx("h2",{children:"ToDo"}),G?r.jsxs("div",{className:"sales-karte-todo-form",children:[r.jsxs("div",{className:"sales-karte-fields",children:[r.jsxs("div",{className:"sales-karte-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"date",value:V.due_date,onChange:E=>ee(K=>({...K,due_date:E.target.value}))})]}),r.jsxs("div",{className:"sales-karte-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",value:V.title,onChange:E=>ee(K=>({...K,title:E.target.value}))})]}),r.jsxs("div",{className:"sales-karte-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",value:V.note,onChange:E=>ee(K=>({...K,note:E.target.value}))})]})]}),r.jsxs("div",{className:"sales-karte-actions",children:[r.jsx("button",{type:"button",className:"btn",onClick:()=>he(-1),disabled:_.new,children:""}),r.jsx("button",{type:"button",className:"btn btn-sm",onClick:()=>{C(!1),D(E=>({...E,new:null}))},children:""})]}),P.new&&r.jsx("p",{className:"sales-karte-error",children:P.new})]}):r.jsx("button",{type:"button",className:"btn btn-sm",onClick:()=>C(!0),children:"+ ToDo"}),r.jsx("ul",{className:"sales-karte-todo-list",children:i.map((E,K)=>r.jsxs("li",{className:`sales-karte-todo-item ${E.status==="done"?"done":""}`,children:[r.jsx("input",{type:"checkbox",checked:E.status==="done",onChange:()=>pe(K),disabled:_[K]}),r.jsx("span",{className:"sales-karte-todo-due",children:E.due_date}),r.jsx("span",{className:"sales-karte-todo-title",children:E.title}),E.note&&r.jsx("span",{className:"sales-karte-todo-note",children:E.note}),r.jsx("button",{type:"button",className:"btn btn-sm",onClick:()=>he(K),disabled:_[K],children:""}),P[K]&&r.jsx("p",{className:"sales-karte-error",children:P[K]})]},K))})]})]})]})}async function oa(e){return mt("/work-report",{method:"PUT",headers:pt(),body:JSON.stringify(e)})}async function rd(e,t){return mt(`/work-report/${e}`,{method:"PATCH",headers:pt(),body:JSON.stringify(t)})}async function Ox(e={}){const n=new URLSearchParams(e).toString();return mt(n?`/work-report?${n}`:"/work-report",{headers:pt()})}async function Dx(e){return Ox({date:e})}async function pr(e){return mt(`/work-report/${e}`,{headers:pt()})}async function Ix({filename:e,mime:t,size:n,context:s,date:a,storeKey:l}){return mt("/upload-url",{method:"POST",headers:pt(),body:JSON.stringify({filename:e,mime:t,size:n,context:s,date:a,storeKey:l||""})})}async function Bx(e,t,n){return mt("/upload-put",{method:"POST",headers:pt(),body:JSON.stringify({uploadUrl:e,contentType:t,fileBase64:n})})}function sd(e){const t=typeof window<"u"?window.location.origin:"",s=((typeof window<"u"?(window.location.pathname||"").replace(/\/$/,""):"")||"/misogi").replace(/\/?$/,"/");return`${t}${s}#/sales/work-reports/${encodeURIComponent(e)}`}const Kl="SALES_DAY_V1",Yl="SALES_CASE_V1",Un=10,Fx=10*1024*1024,Ux=["jpg","jpeg","png","pdf","xlsx","docx","heic"],Wx=[{value:"visit",label:""},{value:"call",label:""},{value:"email",label:""},{value:"other",label:""}];function sc(){return new Date().toISOString().slice(0,10)}function Hx(e=""){return{work_date:e||sc(),total_minutes:0,work_start_time:"",work_end_time:"",reporter_name:"",summary:"",issues:"",top_priority:"",attachments:[],saved:{log_id:null,version:null,state:null}}}function Vx(){return{store_key:"",store_name:"",touch_type:"visit",summary:"",detail:"",next_due:"",next_title:"",pipeline_after:"",attachments:[],work_minutes:0,saved:{log_id:null,version:null,state:null}}}function ad(e){return{summary:e.summary||"",issues:e.issues||"",top_priority:e.top_priority||"",work_start_time:e.work_start_time||"",work_end_time:e.work_end_time||"",reporter_name:e.reporter_name||"",attachments:e.attachments||[]}}function Jl(e,t){let n="",s="",a="",l="",i="",o="",c=[];try{const d=JSON.parse(e||"{}");n=d.summary||"",s=d.issues||"",a=d.top_priority||"",l=d.work_start_time||"",i=d.work_end_time||"",o=d.reporter_name||"",c=Array.isArray(d.attachments)?d.attachments:[]}catch{}return{work_date:(t==null?void 0:t.work_date)||sc(),total_minutes:(t==null?void 0:t.work_minutes)||0,work_start_time:l,work_end_time:i,reporter_name:o,summary:n,issues:s,top_priority:a,attachments:c,saved:{log_id:(t==null?void 0:t.log_id)??null,version:(t==null?void 0:t.version)??null,state:(t==null?void 0:t.state)??null}}}function ld(e){return{store_key:e.store_key||"",store_name:e.store_name||"",touch_type:e.touch_type||"visit",summary:e.summary||"",detail:e.detail||"",next:{due:e.next_due||"",title:e.next_title||""},pipeline_after:e.pipeline_after||"",attachments:e.attachments||[]}}function Ql(e,t){let n={};try{n=JSON.parse(e||"{}")}catch{}const s=n.next||{};return{store_key:n.store_key||"",store_name:n.store_name||(t==null?void 0:t.target_label)||"",touch_type:n.touch_type||"visit",summary:n.summary||"",detail:n.detail||"",next_due:s.due||"",next_title:s.title||"",pipeline_after:n.pipeline_after||"",attachments:Array.isArray(n.attachments)?n.attachments:[],work_minutes:(t==null?void 0:t.work_minutes)||0,saved:{log_id:(t==null?void 0:t.log_id)??null,version:(t==null?void 0:t.version)??null,state:(t==null?void 0:t.state)??null}}}function Kx(e){return e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`}function Yx(e){return e!=null&&e.log_id?e.state==="submitted"?"":"":""}function Jx(){var A,Q,he,pe,qe,Oe;const[e]=Fp(),{user:t}=Vp(),{startTransition:n}=nn(),a=e.get("date")||""||sc(),[l,i]=f.useState(()=>Hx(a)),[o,c]=f.useState([]),[d,u]=f.useState(!1),[m,h]=f.useState(!1),[x,v]=f.useState(""),[S,N]=f.useState(""),[g,p]=f.useState({}),[y,_]=f.useState({}),[w,P]=f.useState({}),[D,H]=f.useState({section:null,id:null}),[I,F]=f.useState({}),[z,k]=f.useState(null),[Y,G]=f.useState(!1),[C,L]=f.useState(null),J=f.useRef({}),b=f.useCallback(U=>i(re=>typeof U=="function"?U(re):{...re,...U}),[]),$=f.useCallback((U,re)=>{c(ye=>{const ve=[...ye];return ve[U]=typeof re=="function"?re(ve[U]):{...ve[U],...re},ve})},[]),V=f.useCallback(()=>{var U;return(U=l.work_date)!=null&&U.trim()?Number(l.total_minutes)<=0?"":"":""},[l.work_date,l.total_minutes]),ee=f.useCallback(U=>{var re,ye,ve,fe;return(re=U.store_name)!=null&&re.trim()?(ye=U.summary)!=null&&ye.trim()?!((ve=U.next_due)!=null&&ve.trim())&&!((fe=U.next_title)!=null&&fe.trim())?"":"":"":""},[]),se=f.useCallback((U,re)=>{const ye=(U.name.split(".").pop()||"").toLowerCase();return Ux.includes(ye)?U.size>Fx?`${U.name} 10MB `:re>=Un?` ${Un} `:"":`${U.name}`},[]),ie=f.useCallback(async(U,re,ye)=>{const ve=ye.section==="header"?"header":`case-${ye.id}`;F(fe=>({...fe,[ve]:null})),H({section:ye.section,id:ye.id});try{const{uploadUrl:fe,fileUrl:le,key:ce}=await Ix({filename:U.name,mime:U.type||"application/octet-stream",size:U.size,context:re,date:l.work_date||a,storeKey:ye.section==="case"?ye.storeKey:void 0}),$e=await new Promise((ge,ht)=>{const Yt=new FileReader;Yt.onload=()=>{const gn=Yt.result;ge(gn.indexOf(",")>=0?gn.slice(gn.indexOf(",")+1):gn)},Yt.onerror=()=>ht(new Error("")),Yt.readAsDataURL(U)});if(!(await Bx(fe,U.type||"application/octet-stream",$e)).ok)throw new Error("");const Se={name:U.name,mime:U.type||"application/octet-stream",size:U.size,url:le,key:ce,uploaded_at:new Date().toISOString()};ye.section==="header"?b(ge=>({...ge,attachments:[...ge.attachments||[],Se]})):$(ye.id,ge=>({...ge,attachments:[...ge.attachments||[],Se]}))}catch(fe){F(le=>({...le,[ve]:fe.message||""}))}finally{H({section:null,id:null})}},[l.work_date,a,b,$]),ue=f.useCallback(async(U,re,ye,ve,fe)=>{const le=Array.from(ye||[]);let ce="";for(let ge=0;ge<le.length&&(ce=se(le[ge],ve+ge),!ce);ge++);!ce&&ve+le.length>Un&&(ce=` ${Un} `);const $e=U==="header"?"header":`case-${re}`;if(ce){F(ge=>({...ge,[$e]:ce}));return}F(ge=>({...ge,[$e]:null}));const be=U==="header"?"sales-day-attachment":"sales-case-attachment";for(const ge of le)await ie(ge,be,{section:U,id:re,storeKey:fe});const Se=J.current[$e];Se&&(Se.value="")},[se,ie]),we=f.useCallback((U,re,ye)=>{const ve=U==="header"?"header":`case-${re}`;F(fe=>({...fe,[ve]:null})),U==="header"?b(fe=>({...fe,attachments:(fe.attachments||[]).filter((le,ce)=>ce!==ye)})):$(re,fe=>({...fe,attachments:(fe.attachments||[]).filter((le,ce)=>ce!==ye)}))},[b,$]),M=f.useCallback(async()=>{var re,ye;const U=V();if(v(U),!U){u(!0);try{const ve=(t==null?void 0:t.name)||l.reporter_name||"",fe={date:l.work_date,work_date:l.work_date,work_minutes:Number(l.total_minutes),template_id:Kl,state:"draft",target_label:"sales-day",description:JSON.stringify(ad({...l,reporter_name:ve}))};(re=l.saved)!=null&&re.log_id&&(fe.log_id=l.saved.log_id,fe.version=l.saved.version);const le=await oa(fe);i(ce=>({...ce,saved:{log_id:le.log_id,version:le.version,state:le.state}})),v("")}catch(ve){const fe=(ve==null?void 0:ve.message)||"";if(v(fe),fe.includes("another process")||fe.includes("refresh")){const le=(ye=l.saved)==null?void 0:ye.log_id;le&&pr(le).then(ce=>{i(Jl(ce.description,ce)),v("")}).catch(()=>{})}}finally{u(!1)}}},[l,t==null?void 0:t.name,V,a]),j=f.useCallback(async()=>{var re,ye,ve,fe;N("");const U=V();if(U){N(U);return}if(((re=l.saved)==null?void 0:re.state)==="submitted"){N("");return}h(!0),k(null),L(null);try{let le=(ye=l.saved)==null?void 0:ye.log_id,ce=((ve=l.saved)==null?void 0:ve.version)||0;try{const be=(t==null?void 0:t.name)||l.reporter_name||"",Se={date:l.work_date,work_date:l.work_date,work_minutes:Number(l.total_minutes),template_id:Kl,state:"draft",target_label:"sales-day",description:JSON.stringify(ad({...l,reporter_name:be}))};le&&(Se.log_id=le,Se.version=ce);const ge=await oa(Se);le=ge.log_id,ce=ge.version,i(ht=>({...ht,saved:{log_id:le,version:ce,state:"draft"}}))}catch(be){const Se=(be==null?void 0:be.message)||"";console.error("[handleHeaderSubmit] Draft save failed:",be),N(`: ${Se}`);return}const $e=await rd(le,{state:"submitted",version:ce});if(!$e||!$e.log_id){const be=$e?"log_id":"";console.error("[handleHeaderSubmit] Missing log_id in response:",$e),N(be);return}try{const be=await pr($e.log_id);if(!be||be.state!=="submitted")throw new Error("");i(Se=>{var ge;return{...Se,saved:{...Se.saved,state:"submitted",version:$e.version??(((ge=Se.saved)==null?void 0:ge.version)||0)+1}}}),N(""),k(sd($e.log_id))}catch(be){console.error("[handleHeaderSubmit] Failed to verify saved report:",be),(be==null?void 0:be.status)===404?N(""):N("");return}}catch(le){const ce=(le==null?void 0:le.message)||(le==null?void 0:le.body)||"";if(console.error("[handleHeaderSubmit] Error:",le),N(ce),ce.includes("another process")||ce.includes("refresh")){const $e=(fe=l.saved)==null?void 0:fe.log_id;$e&&pr($e).then(be=>{i(Jl(be.description,be)),N("")}).catch(()=>{})}}finally{h(!1)}},[(A=l.saved)==null?void 0:A.log_id,(Q=l.saved)==null?void 0:Q.version,(he=l.saved)==null?void 0:he.state,l.work_date,a]),q=f.useCallback(async U=>{var ye,ve;const re=o[U];_(fe=>({...fe,[U]:null})),p(fe=>({...fe,[U]:!0}));try{const fe={date:l.work_date||a,work_date:l.work_date||a,work_minutes:Number(re.work_minutes)||0,template_id:Yl,state:"draft",target_label:re.store_name||`${U+1}`,description:JSON.stringify(ld(re))};(ye=re.saved)!=null&&ye.log_id&&(fe.log_id=re.saved.log_id,fe.version=re.saved.version);const le=await oa(fe);$(U,ce=>({...ce,saved:{log_id:le.log_id,version:le.version,state:le.state}}))}catch(fe){const le=(fe==null?void 0:fe.message)||"";if(_(ce=>({...ce,[U]:le})),le.includes("another process")||le.includes("refresh")){const ce=(ve=re.saved)==null?void 0:ve.log_id;ce&&pr(ce).then($e=>{$(U,()=>Ql($e.description,$e)),_(be=>({...be,[U]:""}))}).catch(()=>{})}}finally{p(fe=>({...fe,[U]:!1}))}},[o,l.work_date,a,$]),W=f.useCallback(async U=>{var ve,fe,le;const re=o[U],ye=ee(re);if(P(ce=>({...ce,[U]:ye})),!ye){p(ce=>({...ce,[U]:!0})),k(null),L(null);try{let ce=(ve=re.saved)==null?void 0:ve.log_id,$e=((fe=re.saved)==null?void 0:fe.version)||0;try{const Se={date:l.work_date||a,work_date:l.work_date||a,work_minutes:Number(re.work_minutes)||0,template_id:Yl,state:"draft",target_label:re.store_name||`${U+1}`,description:JSON.stringify(ld(re))};ce&&(Se.log_id=ce,Se.version=$e);const ge=await oa(Se);ce=ge.log_id,$e=ge.version,$(U,ht=>({...ht,saved:{log_id:ce,version:$e,state:"draft"}}))}catch(Se){const ge=(Se==null?void 0:Se.message)||"";console.error("[handleCaseSubmit] Draft save failed:",Se),P(ht=>({...ht,[U]:`: ${ge}`}));return}const be=await rd(ce,{state:"submitted",version:$e});if(!be||!be.log_id){const Se=be?"log_id":"";console.error("[handleCaseSubmit] Missing log_id in response:",be),P(ge=>({...ge,[U]:Se}));return}try{const Se=await pr(be.log_id);if(!Se||Se.state!=="submitted")throw new Error("");$(U,ge=>{var ht;return{...ge,saved:{...ge.saved,state:"submitted",version:be.version??(((ht=ge.saved)==null?void 0:ht.version)||0)+1}}}),P(ge=>({...ge,[U]:null})),k(sd(be.log_id))}catch(Se){console.error("[handleCaseSubmit] Failed to verify saved report:",Se),(Se==null?void 0:Se.status)===404?P(ge=>({...ge,[U]:""})):P(ge=>({...ge,[U]:""}));return}}catch(ce){const $e=(ce==null?void 0:ce.message)||(ce==null?void 0:ce.body)||"";if(console.error("[handleCaseSubmit] Error:",ce),P(be=>({...be,[U]:$e})),$e.includes("another process")||$e.includes("refresh")){const be=(le=re.saved)==null?void 0:le.log_id;be&&pr(be).then(Se=>{$(U,()=>Ql(Se.description,Se)),P(ge=>({...ge,[U]:""}))}).catch(()=>{})}}finally{p(ce=>({...ce,[U]:!1}))}}},[o,ee,$,l.work_date,a]),O=f.useCallback(()=>{c(U=>[...U,Vx()])},[]);f.useEffect(()=>{i(U=>({...U,work_date:a}))},[a]);const[ae,B]=f.useState(!1);f.useEffect(()=>{B(!1),Dx(a).then(U=>{if(!Array.isArray(U))return;const re=U.find(ve=>ve.template_id===Kl),ye=U.filter(ve=>ve.template_id===Yl);re&&i(Jl(re.description,re)),c(ye.map(ve=>Ql(ve.description,ve)))}).catch(U=>{(U==null?void 0:U.status)===401&&B(!0)})},[a]);const ne=(U,re)=>D.section===U&&D.id===re;return r.jsxs("div",{className:"report-page sales-day-report-page","data-job":"sales",children:[r.jsx("div",{className:"report-page-viz",children:r.jsx(at,{mode:"base",className:"report-page-visualizer"})}),r.jsxs("div",{className:"report-page-content sales-day-content",children:[ae&&r.jsxs("div",{style:{marginBottom:16,padding:12,background:"rgba(255,48,48,0.15)",border:"1px solid rgba(255,48,48,0.3)",borderRadius:8,fontSize:"0.9rem"},role:"alert",children:["",r.jsx(ke,{to:"/",style:{marginLeft:8,color:"var(--accent)"},children:""})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"24px"},children:[r.jsx("button",{onClick:()=>n("/jobs/sales/entrance"),style:{background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--fg)",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",marginRight:"12px"},children:""}),r.jsx("h1",{style:{fontSize:"1.25rem",margin:0,fontWeight:600},children:""})]}),r.jsx("section",{className:"sales-day-reporter","aria-label":"",children:t!=null&&t.name?r.jsxs("p",{className:"sales-day-reporter-label",children:["",r.jsx("span",{className:"sales-day-reporter-name",children:t.name})]}):r.jsxs("div",{className:"sales-day-field",children:[r.jsx("label",{htmlFor:"sales-day-reporter-name",children:""}),r.jsx("input",{id:"sales-day-reporter-name",type:"text",value:l.reporter_name||"",onChange:U=>b({reporter_name:U.target.value}),placeholder:""})]})}),r.jsxs("section",{className:"sales-day-report-card sales-day-header",children:[r.jsx("h2",{children:""}),r.jsxs("div",{className:"sales-day-fields",children:[r.jsxs("div",{className:"sales-day-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"date",value:l.work_date,onChange:U=>b({work_date:U.target.value})})]}),r.jsxs("div",{className:"sales-day-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"number",min:0,value:l.total_minutes||"",onChange:U=>b({total_minutes:U.target.value})})]}),r.jsxs("div",{className:"sales-day-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"time",value:l.work_start_time||"",onChange:U=>b({work_start_time:U.target.value})})]}),r.jsxs("div",{className:"sales-day-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"time",value:l.work_end_time||"",onChange:U=>b({work_end_time:U.target.value})})]}),r.jsxs("div",{className:"sales-day-field",children:[r.jsx("label",{children:"summary"}),r.jsx("textarea",{value:l.summary,onChange:U=>b({summary:U.target.value}),rows:2})]}),r.jsxs("div",{className:"sales-day-field",children:[r.jsx("label",{children:"issues"}),r.jsx("textarea",{value:l.issues,onChange:U=>b({issues:U.target.value}),rows:2})]}),r.jsxs("div",{className:"sales-day-field",children:[r.jsx("label",{children:"top_priority"}),r.jsx("input",{type:"text",value:l.top_priority,onChange:U=>b({top_priority:U.target.value})})]})]}),r.jsxs("div",{className:"sales-day-attachments",children:[r.jsx("h3",{children:""}),r.jsx("input",{ref:U=>{J.current.header=U},type:"file",multiple:!0,accept:".jpg,.jpeg,.png,.pdf,.xlsx,.docx,.heic",className:"sales-day-file-input",onChange:U=>{var re;return ue("header",0,U.target.files,((re=l.attachments)==null?void 0:re.length)||0,null)}}),r.jsx("button",{type:"button",className:"btn btn-sm",disabled:ne("header",0)||(((pe=l.attachments)==null?void 0:pe.length)||0)>=Un,onClick:()=>{var U;return(U=J.current.header)==null?void 0:U.click()},children:ne("header",0)?"...":""}),r.jsxs("p",{className:"sales-day-attachments-hint",children:[" ",Un," 1 10MB "]}),(((qe=l.attachments)==null?void 0:qe.length)||0)>0&&r.jsx("ul",{className:"sales-day-attachment-list",children:(l.attachments||[]).map((U,re)=>r.jsxs("li",{className:"sales-day-attachment-row",children:[r.jsx("span",{className:"sales-day-attachment-name",title:U.name,children:U.name}),r.jsx("span",{className:"sales-day-attachment-size",children:Kx(U.size)}),U.url&&r.jsx("a",{href:U.url,target:"_blank",rel:"noopener noreferrer",className:"sales-day-attachment-open",children:""}),r.jsx("button",{type:"button",className:"sales-day-attachment-remove",onClick:()=>we("header",0,re),title:"",children:""})]},re))}),I.header&&r.jsx("p",{className:"sales-day-error",children:I.header})]}),r.jsxs("div",{className:"sales-day-actions",children:[r.jsx("button",{type:"button",className:"btn",onClick:M,disabled:d,children:d?"...":""}),r.jsx("button",{type:"button",className:"btn btn-primary",onClick:j,disabled:m||((Oe=l.saved)==null?void 0:Oe.state)==="submitted",children:m?"...":""})]}),x&&r.jsx("p",{className:"sales-day-error",children:x}),S&&r.jsx("p",{className:"sales-day-error",children:S})]}),r.jsxs("section",{className:"sales-day-report-card sales-day-cases",children:[r.jsx("h2",{children:""}),r.jsx("button",{type:"button",className:"btn btn-sm",onClick:O,children:"+ "}),r.jsx("div",{className:"sales-day-case-list",children:o.map((U,re)=>{var ye,ve,fe;return r.jsxs("div",{className:"sales-day-case-card",children:[r.jsx("span",{className:"sales-day-case-badge",title:(ye=U.saved)!=null&&ye.log_id?U.saved.state==="submitted"?"":"":"",children:Yx(U.saved)}),r.jsxs("div",{className:"sales-day-fields",children:[r.jsxs("div",{className:"sales-day-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",value:U.store_name,onChange:le=>$(re,{store_name:le.target.value})})]}),r.jsxs("div",{className:"sales-day-field",children:[r.jsx("label",{children:"store_key"}),r.jsx("input",{type:"text",value:U.store_key,onChange:le=>$(re,{store_key:le.target.value}),placeholder:""})]}),r.jsxs("div",{className:"sales-day-field",children:[r.jsx("label",{children:""}),r.jsx("select",{value:U.touch_type,onChange:le=>$(re,{touch_type:le.target.value}),children:Wx.map(le=>r.jsx("option",{value:le.value,children:le.label},le.value))})]}),r.jsxs("div",{className:"sales-day-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",value:U.summary,onChange:le=>$(re,{summary:le.target.value})})]}),r.jsxs("div",{className:"sales-day-field",children:[r.jsx("label",{children:""}),r.jsx("textarea",{value:U.detail,onChange:le=>$(re,{detail:le.target.value}),rows:2})]}),r.jsxs("div",{className:"sales-day-field row",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"date",placeholder:"",value:U.next_due,onChange:le=>$(re,{next_due:le.target.value})}),r.jsx("input",{type:"text",placeholder:"",value:U.next_title,onChange:le=>$(re,{next_title:le.target.value})})]}),r.jsxs("div",{className:"sales-day-field",children:[r.jsx("label",{children:"pipeline_after"}),r.jsx("input",{type:"text",value:U.pipeline_after,onChange:le=>$(re,{pipeline_after:le.target.value})})]}),r.jsxs("div",{className:"sales-day-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"number",min:0,value:U.work_minutes||"",onChange:le=>$(re,{work_minutes:le.target.value})})]})]}),r.jsxs("div",{className:"sales-day-attachments",children:[r.jsx("h3",{children:""}),r.jsx("input",{ref:le=>{J.current[`case-${re}`]=le},type:"file",multiple:!0,accept:".jpg,.jpeg,.png,.pdf,.xlsx,.docx,.heic",className:"sales-day-file-input",onChange:le=>{var ce;return ue("case",re,le.target.files,((ce=U.attachments)==null?void 0:ce.length)||0,U.store_key)}}),r.jsx("button",{type:"button",className:"btn btn-sm",disabled:ne("case",re)||(((ve=U.attachments)==null?void 0:ve.length)||0)>=Un,onClick:()=>{var le;return(le=J.current[`case-${re}`])==null?void 0:le.click()},children:ne("case",re)?"...":""}),(((fe=U.attachments)==null?void 0:fe.length)||0)>0&&r.jsx("ul",{className:"sales-day-attachment-list small",children:(U.attachments||[]).map((le,ce)=>r.jsxs("li",{className:"sales-day-attachment-row",children:[r.jsx("span",{className:"sales-day-attachment-name",title:le.name,children:le.name}),le.url&&r.jsx("a",{href:le.url,target:"_blank",rel:"noopener noreferrer",children:""}),r.jsx("button",{type:"button",className:"sales-day-attachment-remove",onClick:()=>we("case",re,ce),children:""})]},ce))}),I[`case-${re}`]&&r.jsx("p",{className:"sales-day-error",children:I[`case-${re}`]})]}),r.jsxs("div",{className:"sales-day-actions",children:[r.jsx("button",{type:"button",className:"btn",onClick:()=>q(re),disabled:g[re],children:g[re]?"...":""}),r.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>W(re),disabled:g[re],children:""})]}),y[re]&&r.jsx("p",{className:"sales-day-error",children:y[re]}),w[re]&&r.jsx("p",{className:"sales-day-error",children:w[re]})]},re)})})]}),z&&r.jsx("div",{className:"sales-day-share-overlay",role:"dialog","aria-modal":"true","aria-label":"URL",onClick:()=>{k(null),G(!1),L(null)},style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.6)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3},children:r.jsxs("div",{className:"sales-day-share-modal",onClick:U=>U.stopPropagation(),style:{background:"var(--surface, #1f2937)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:12,padding:24,maxWidth:480,width:"90%"},children:[r.jsx("h3",{style:{margin:"0 0 12px",fontSize:"1.1rem"},children:"URL"}),r.jsx("p",{style:{margin:"0 0 12px",fontSize:"0.9rem",color:"var(--muted, #9ca3af)"},children:"URL"}),C&&r.jsx("p",{role:"alert",style:{margin:"0 0 12px",fontSize:"0.9rem",color:"var(--alert, #ff3030)"},children:C}),r.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center",marginBottom:16},children:[r.jsx("input",{type:"text",readOnly:!0,value:z,style:{flex:1,padding:"10px 12px",background:"rgba(0,0,0,0.3)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)",fontSize:"0.85rem"}}),r.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>{var U;typeof((U=navigator==null?void 0:navigator.clipboard)==null?void 0:U.writeText)=="function"&&(navigator.clipboard.writeText(z),G(!0))},children:Y?"":""})]}),r.jsx("button",{type:"button",className:"btn",onClick:()=>{k(null),G(!1),L(null)},children:""})]})})]})]})}function Xp(e){if(e==null)return{};if(typeof e=="object"&&e!==null)return e;if(typeof e!="string")return{};try{const t=JSON.parse(e);return typeof t=="object"&&t!==null?t:{}}catch{return{}}}function Qx(e){var a,l;const t=[],n=Xp(e==null?void 0:e.description),s=i=>{Array.isArray(i)&&i.forEach(o=>{o!=null&&o.url&&t.push({name:o.name||o.key||"",url:o.url})})};return s(n.attachments),s((a=n.store)==null?void 0:a.attachments),s((l=n.header)==null?void 0:l.attachments),t}function id(e){return e?e.startsWith("SALES")||e.includes("SALES")?"":e.startsWith("CLEANING")||e.includes("CLEANING")?"":"":""}const Gx={visit:"",call:"",email:"",other:""};function od({reportId:e,embed:t=!1}){var v,S,N,g;const n=ar(),s=e??n.reportId,[a,l]=f.useState(!0),[i,o]=f.useState(null),[c,d]=f.useState(null);if(f.useEffect(()=>{if(!s){o("URL"),l(!1);return}pv(s).then(p=>{d(p),o(null)}).catch(p=>{o((p==null?void 0:p.message)||""),d(null)}).finally(()=>l(!1))},[s]),a)return r.jsx("div",{className:`report-page office-work-report-detail ${t?"embed":""}`,"data-job":"office",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"60vh"},children:r.jsx("p",{children:"..."})});if(i||!c)return r.jsxs("div",{className:`report-page office-work-report-detail ${t?"embed":""}`,"data-job":"office",style:{padding:24,maxWidth:560,margin:"0 auto"},children:[!t&&r.jsx("h1",{style:{fontSize:"1.25rem",marginBottom:16},children:""}),r.jsx("p",{style:{color:"var(--alert, #ff3030)"},children:i}),!t&&r.jsx("p",{children:r.jsx(ke,{to:"/admin/work-reports",children:""})})]});const u=Xp(c.description),m=Qx(c),h=c.template_id==="SALES_DAY_V1",x=c.template_id==="SALES_CASE_V1";return r.jsxs("div",{className:`report-page office-work-report-detail ${t?"embed":""}`,"data-job":"office",style:{padding:24,maxWidth:720,margin:"0 auto"},children:[!t&&r.jsxs(r.Fragment,{children:[r.jsx("p",{style:{marginBottom:16},children:r.jsx(ke,{to:"/admin/work-reports",style:{color:"var(--job-office)"},children:" "})}),r.jsx("h1",{style:{fontSize:"1.25rem",marginBottom:8},children:""}),r.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--muted)",marginBottom:24},children:[id(c.template_id),"  ",c.work_date||"","  ",c.state||""]})]}),r.jsxs("section",{style:{background:"var(--card-bg)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:12,padding:20,marginBottom:16},children:[r.jsx("h2",{style:{fontSize:"1rem",margin:"0 0 12px",color:"var(--muted)"},children:""}),r.jsxs("dl",{style:{margin:0,display:"grid",gap:"8px 16px",gridTemplateColumns:"auto 1fr"},children:[r.jsx("dt",{style:{margin:0,color:"var(--muted)"},children:""}),r.jsx("dd",{style:{margin:0},children:c.work_date||""}),r.jsx("dt",{style:{margin:0,color:"var(--muted)"},children:""}),r.jsx("dd",{style:{margin:0},children:id(c.template_id)}),c.target_label&&r.jsxs(r.Fragment,{children:[r.jsx("dt",{style:{margin:0,color:"var(--muted)"},children:""}),r.jsx("dd",{style:{margin:0},children:c.target_label})]}),c.work_minutes!=null&&c.work_minutes>0&&r.jsxs(r.Fragment,{children:[r.jsx("dt",{style:{margin:0,color:"var(--muted)"},children:""}),r.jsxs("dd",{style:{margin:0},children:[c.work_minutes,""]})]})]})]}),h&&r.jsxs("section",{style:{background:"var(--card-bg)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:12,padding:20,marginBottom:16},children:[r.jsx("h2",{style:{fontSize:"1rem",margin:"0 0 12px",color:"var(--muted)"},children:""}),r.jsxs("dl",{style:{margin:0,display:"grid",gap:"8px 16px",gridTemplateColumns:"auto 1fr"},children:[u.reporter_name&&r.jsxs(r.Fragment,{children:[r.jsx("dt",{style:{margin:0,color:"var(--muted)"},children:""}),r.jsx("dd",{style:{margin:0},children:u.reporter_name})]}),(u.work_start_time||u.work_end_time)&&r.jsxs(r.Fragment,{children:[r.jsx("dt",{style:{margin:0,color:"var(--muted)"},children:""}),r.jsxs("dd",{style:{margin:0},children:[u.work_start_time||"","  ",u.work_end_time||""]})]}),u.summary&&r.jsxs(r.Fragment,{children:[r.jsx("dt",{style:{margin:0,color:"var(--muted)"},children:""}),r.jsx("dd",{style:{margin:0,whiteSpace:"pre-wrap"},children:u.summary})]}),u.issues&&r.jsxs(r.Fragment,{children:[r.jsx("dt",{style:{margin:0,color:"var(--muted)"},children:""}),r.jsx("dd",{style:{margin:0,whiteSpace:"pre-wrap"},children:u.issues})]}),u.top_priority&&r.jsxs(r.Fragment,{children:[r.jsx("dt",{style:{margin:0,color:"var(--muted)"},children:""}),r.jsx("dd",{style:{margin:0,whiteSpace:"pre-wrap"},children:u.top_priority})]})]})]}),x&&r.jsxs("section",{style:{background:"var(--card-bg)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:12,padding:20,marginBottom:16},children:[r.jsx("h2",{style:{fontSize:"1rem",margin:"0 0 12px",color:"var(--muted)"},children:""}),r.jsxs("dl",{style:{margin:0,display:"grid",gap:"8px 16px",gridTemplateColumns:"auto 1fr"},children:[u.store_name&&r.jsxs(r.Fragment,{children:[r.jsx("dt",{style:{margin:0,color:"var(--muted)"},children:""}),r.jsx("dd",{style:{margin:0},children:u.store_name})]}),u.touch_type&&r.jsxs(r.Fragment,{children:[r.jsx("dt",{style:{margin:0,color:"var(--muted)"},children:""}),r.jsx("dd",{style:{margin:0},children:Gx[u.touch_type]||u.touch_type})]}),u.summary&&r.jsxs(r.Fragment,{children:[r.jsx("dt",{style:{margin:0,color:"var(--muted)"},children:""}),r.jsx("dd",{style:{margin:0,whiteSpace:"pre-wrap"},children:u.summary})]}),u.detail&&r.jsxs(r.Fragment,{children:[r.jsx("dt",{style:{margin:0,color:"var(--muted)"},children:""}),r.jsx("dd",{style:{margin:0,whiteSpace:"pre-wrap"},children:u.detail})]}),(((v=u.next)==null?void 0:v.due)||((S=u.next)==null?void 0:S.title))&&r.jsxs(r.Fragment,{children:[r.jsx("dt",{style:{margin:0,color:"var(--muted)"},children:""}),r.jsxs("dd",{style:{margin:0},children:[((N=u.next)==null?void 0:N.due)||""," ",((g=u.next)==null?void 0:g.title)||""]})]}),u.pipeline_after&&r.jsxs(r.Fragment,{children:[r.jsx("dt",{style:{margin:0,color:"var(--muted)"},children:"pipeline_after"}),r.jsx("dd",{style:{margin:0},children:u.pipeline_after})]})]})]}),!h&&!x&&Object.keys(u).length>0&&r.jsxs("section",{style:{background:"var(--card-bg)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:12,padding:20,marginBottom:16},children:[r.jsx("h2",{style:{fontSize:"1rem",margin:"0 0 12px",color:"var(--muted)"},children:""}),r.jsx("pre",{style:{margin:0,fontSize:"0.85rem",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:JSON.stringify(u,null,2)})]}),m.length>0&&r.jsxs("section",{style:{background:"var(--card-bg)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:12,padding:20},children:[r.jsx("h2",{style:{fontSize:"1rem",margin:"0 0 12px",color:"var(--muted)"},children:""}),r.jsx("ul",{style:{margin:0,paddingLeft:20},children:m.map((p,y)=>r.jsx("li",{children:r.jsx("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",style:{color:"var(--job-office)"},children:p.name})},y))})]})]})}function qx(){const{userId:e,yyyyMm:t}=ar(),[n,s]=f.useState(!0),[a,l]=f.useState(null),[i,o]=f.useState(null),[c,d]=f.useState("approved"),u=f.useCallback(async()=>{if(!(!e||!t)){s(!0),l(null);try{const v=await mv(e,t,{state:c});o(v)}catch(v){l((v==null?void 0:v.message)||""),o(null)}finally{s(!1)}}},[e,t,c]);if(f.useEffect(()=>{u()},[u]),!e||!t)return r.jsxs("div",{className:"report-page","data-job":"office",style:{padding:24},children:[r.jsx("p",{children:"URLuser_id  YYYY-MM "}),r.jsx(ke,{to:"/admin/work-reports",children:""})]});if(n&&!i)return r.jsx("div",{className:"report-page","data-job":"office",style:{padding:24},children:r.jsx("p",{children:"..."})});if(a&&!i)return r.jsxs("div",{className:"report-page","data-job":"office",style:{padding:24},children:[r.jsx("h1",{style:{fontSize:"1.25rem",marginBottom:16},children:""}),r.jsx("p",{style:{color:"var(--alert)"},children:a}),r.jsx(ke,{to:"/admin/work-reports",children:""})]});const m=(i==null?void 0:i.total_minutes)??0,h=i==null?void 0:i.total_amount,x=(i==null?void 0:i.rows)??[];return r.jsxs("div",{className:"report-page","data-job":"office",style:{padding:24,maxWidth:900,margin:"0 auto"},children:[r.jsx("p",{style:{marginBottom:16},children:r.jsx(ke,{to:"/admin/work-reports",style:{color:"var(--job-office)"},children:" "})}),r.jsx("h1",{style:{fontSize:"1.25rem",marginBottom:8},children:""}),r.jsxs("p",{style:{fontSize:"0.9rem",color:"var(--muted)",marginBottom:24},children:["user_id: ",e,"  ",t]}),r.jsx("div",{style:{display:"flex",alignItems:"center",gap:16,marginBottom:24,flexWrap:"wrap"},children:r.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[r.jsx("span",{children:":"}),r.jsxs("select",{value:c,onChange:v=>d(v.target.value),style:{padding:"8px 12px",background:"var(--surface)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"},children:[r.jsx("option",{value:"approved",children:"approved"}),r.jsx("option",{value:"all",children:""})]})]})}),r.jsxs("section",{style:{background:"var(--card-bg)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:12,padding:20,marginBottom:24},children:[r.jsx("h2",{style:{fontSize:"1rem",margin:"0 0 12px",color:"var(--muted)"},children:""}),r.jsxs("dl",{style:{margin:0,display:"grid",gap:"8px 16px",gridTemplateColumns:"auto 1fr"},children:[r.jsx("dt",{style:{margin:0,color:"var(--muted)"},children:""}),r.jsxs("dd",{style:{margin:0},children:[m," "]}),h!=null&&r.jsxs(r.Fragment,{children:[r.jsx("dt",{style:{margin:0,color:"var(--muted)"},children:""}),r.jsx("dd",{style:{margin:0},children:h})]})]})]}),r.jsxs("section",{style:{background:"var(--card-bg)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:12,padding:20},children:[r.jsx("h2",{style:{fontSize:"1rem",margin:"0 0 12px",color:"var(--muted)"},children:""}),x.length===0?r.jsx("p",{style:{color:"var(--muted)"},children:""}):r.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"0.9rem"},children:[r.jsx("thead",{children:r.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.1)"},children:[r.jsx("th",{style:{textAlign:"left",padding:"8px 12px",color:"var(--muted)"},children:""}),r.jsx("th",{style:{textAlign:"left",padding:"8px 12px",color:"var(--muted)"},children:""}),r.jsx("th",{style:{textAlign:"right",padding:"8px 12px",color:"var(--muted)"},children:""}),r.jsx("th",{style:{textAlign:"left",padding:"8px 12px",color:"var(--muted)"},children:""}),r.jsx("th",{style:{textAlign:"left",padding:"8px 12px",color:"var(--muted)"}})]})}),r.jsx("tbody",{children:x.map((v,S)=>r.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,0.06)"},children:[r.jsx("td",{style:{padding:"8px 12px"},children:v.date||""}),r.jsx("td",{style:{padding:"8px 12px"},children:v.template_id||""}),r.jsx("td",{style:{padding:"8px 12px",textAlign:"right"},children:v.minutes??""}),r.jsx("td",{style:{padding:"8px 12px"},children:v.state||""}),r.jsx("td",{style:{padding:"8px 12px"},children:v.report_id&&r.jsx(ke,{to:`/office/work-reports/${v.report_id}`,style:{color:"var(--job-office)"},children:""})})]},v.report_id||S))})]})]})]})}const Zp="misogi_sales_customers";function Xx(e){return String(e??"").trim().replace(/\s+/g,"_").replace(/[^a-zA-Z0-9_\u3040-\u9FFF\-]/g,"").replace(/_+/g,"_").replace(/^_|_$/g,"")||"store"}function no(e,t){return`${Xx(e+"_"+t)}_${Date.now()}`}function Zx(){try{const e=localStorage.getItem(Zp);if(!e)return[];const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch{return[]}}function em(e){localStorage.setItem(Zp,JSON.stringify(e))}function e0(){return[{storeKey:no("&",""),company:"&",store:"",address:"1-1-1",tel:"03-1234-5678",contact:"",email:"shinjuku@example.com"},{storeKey:no("",""),company:"",store:"",address:"1-2-3",tel:"",contact:"",email:""}]}function t0(){const e=Zx();if(e.length===0){const t=e0();return em(t),t}return e}function n0(e,t=24){const n=String(e??"").trim();return n.length<=t?n:n.slice(0,t)+""}const cd={company:"",store:"",address:"",tel:"",contact:"",email:""};function rn(e){return String(e??"").trim()}function ud(e){return rn(e)===""}function r0(){const e=_t(),[t,n]=f.useState([]),[s,a]=f.useState(cd),[l,i]=f.useState({store:"",address:""}),o=f.useCallback(()=>{n(t0())},[]);f.useEffect(()=>{o()},[o]);const c=(h,x)=>{a(v=>({...v,[h]:x})),h==="store"&&i(v=>({...v,store:""})),h==="address"&&i(v=>({...v,address:""}))},d=()=>{const h=rn(s.store),x=rn(s.address),v={store:"",address:""};return ud(s.store)?v.store="":h||(v.store=""),ud(s.address)?v.address="":x||(v.address=""),i(v),!v.store&&!v.address},u=h=>{if(h.preventDefault(),!d())return;const v={storeKey:no(s.company,s.store),company:rn(s.company),store:rn(s.store),address:rn(s.address),tel:rn(s.tel),contact:rn(s.contact),email:rn(s.email)},S=[...t,v];em(S),n(S),a(cd),i({store:"",address:""})},m=h=>{e(`/sales/store/${encodeURIComponent(h)}`)};return r.jsxs("div",{className:"report-page sales-customers-page","data-job":"sales",children:[r.jsx("div",{className:"report-page-viz",children:r.jsx(at,{mode:"base",className:"report-page-visualizer"})}),r.jsxs("div",{className:"report-page-content sales-customers-content",children:[r.jsx("p",{className:"report-page-back",children:r.jsx(ke,{to:"/jobs/sales/entrance",children:""})}),r.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:"1rem",flexWrap:"wrap",gap:"8px"},children:[r.jsx("h1",{id:"sales-customers-form-title",className:"sales-page-title",style:{margin:0},children:""}),r.jsx(ke,{to:"/sales/clients/list",className:"btn",style:{padding:"8px 16px",fontSize:"0.9rem",background:"var(--job-sales, #0d9488)",color:"#fff",borderRadius:"8px",textDecoration:"none",fontWeight:600},children:""})]}),r.jsx("section",{className:"sales-customers-form-section","aria-labelledby":"sales-customers-form-title",children:r.jsxs("form",{onSubmit:u,className:"sales-customers-form",children:[r.jsxs("div",{className:"sales-customers-form-row",children:[r.jsx("label",{htmlFor:"sales-form-company",children:""}),r.jsx("input",{id:"sales-form-company",type:"text",value:s.company,onChange:h=>c("company",h.target.value),placeholder:"",className:"sales-customers-input"})]}),r.jsxs("div",{className:"sales-customers-form-row",children:[r.jsxs("label",{htmlFor:"sales-form-store",children:["",r.jsx("span",{className:"sales-required",children:""})]}),r.jsx("input",{id:"sales-form-store",type:"text",value:s.store,onChange:h=>c("store",h.target.value),placeholder:"",className:`sales-customers-input ${l.store?"sales-input-error":""}`,"aria-invalid":!!l.store,"aria-describedby":l.store?"sales-error-store":void 0}),l.store&&r.jsx("span",{id:"sales-error-store",className:"sales-field-error",role:"alert",children:l.store})]}),r.jsxs("div",{className:"sales-customers-form-row",children:[r.jsxs("label",{htmlFor:"sales-form-address",children:["",r.jsx("span",{className:"sales-required",children:""})]}),r.jsx("input",{id:"sales-form-address",type:"text",value:s.address,onChange:h=>c("address",h.target.value),placeholder:"",className:`sales-customers-input ${l.address?"sales-input-error":""}`,"aria-invalid":!!l.address,"aria-describedby":l.address?"sales-error-address":void 0}),l.address&&r.jsx("span",{id:"sales-error-address",className:"sales-field-error",role:"alert",children:l.address})]}),r.jsxs("div",{className:"sales-customers-form-row",children:[r.jsx("label",{htmlFor:"sales-form-tel",children:"TEL"}),r.jsx("input",{id:"sales-form-tel",type:"tel",value:s.tel,onChange:h=>c("tel",h.target.value),placeholder:"TEL",className:"sales-customers-input"})]}),r.jsxs("div",{className:"sales-customers-form-row",children:[r.jsx("label",{htmlFor:"sales-form-contact",children:""}),r.jsx("input",{id:"sales-form-contact",type:"text",value:s.contact,onChange:h=>c("contact",h.target.value),placeholder:"",className:"sales-customers-input"})]}),r.jsxs("div",{className:"sales-customers-form-row",children:[r.jsx("label",{htmlFor:"sales-form-email",children:"Email"}),r.jsx("input",{id:"sales-form-email",type:"email",value:s.email,onChange:h=>c("email",h.target.value),placeholder:"Email",className:"sales-customers-input"})]}),r.jsx("div",{className:"sales-customers-form-actions",children:r.jsx("button",{type:"submit",className:"btn sales-customers-submit",children:""})})]})}),r.jsxs("section",{className:"sales-customers-list-section","aria-labelledby":"sales-customers-list-title",children:[r.jsx("h2",{id:"sales-customers-list-title",className:"sales-customers-list-heading",children:""}),r.jsx("div",{className:"sales-customer-list-cards",children:t.length===0?r.jsx("p",{className:"sales-customer-list-empty",children:""}):t.map(h=>r.jsxs("article",{className:"sales-customer-list-card sales-customer-card-with-karte",children:[r.jsx("span",{className:"sales-customer-list-card-store",children:h.store}),r.jsx("span",{className:"sales-customer-list-card-company",children:h.company}),r.jsx("span",{className:"sales-customer-list-card-address",children:n0(h.address)}),r.jsx("button",{type:"button",className:"sales-customer-karte-btn",onClick:()=>m(h.storeKey),children:""})]},h.storeKey))})]})]})]})}function s0(){return r.jsxs("div",{className:"sales-page sales-register-page",children:[r.jsx("h1",{className:"sales-page-title",children:""}),r.jsx("p",{className:"sales-page-back",children:r.jsx(ke,{to:"/jobs/sales/entrance",children:""})}),r.jsx("p",{className:"sales-register-placeholder",children:""})]})}const dd=[{key:"seven_shinjuku",company:"&",store:"",pipeline:"qualified",next_action:"2026-02-02",last_contact:"2026-01-31",sales_rep:""},{key:"seven_shibuya",company:"&",store:"",pipeline:"proposal",next_action:"2026-02-03",last_contact:"2026-01-28",sales_rep:""},{key:"lawson_ikebukuro",company:"",store:"",pipeline:"contacted",next_action:"",last_contact:"2026-01-25",sales_rep:""},{key:"family_shinjuku",company:"",store:"",pipeline:"new",next_action:"2026-02-05",last_contact:"",sales_rep:""}],a0={new:"",contacted:"",qualified:"",proposal:"",estimate:"",won:"",lost:""};function l0({title:e=""}){const t=_t(),[n,s]=f.useState(""),a=f.useMemo(()=>{const i=(n||"").trim().toLowerCase();return i?dd.filter(o=>o.company&&o.company.toLowerCase().includes(i)||o.store&&o.store.toLowerCase().includes(i)||o.sales_rep&&o.sales_rep.toLowerCase().includes(i)):dd},[n]),l=i=>{t(`/sales/store/${encodeURIComponent(i)}`)};return r.jsxs("div",{className:"sales-customer-list-panel",children:[r.jsx("h2",{className:"sales-customer-list-title",children:e}),r.jsx("div",{className:"sales-customer-list-search",children:r.jsx("input",{type:"search",placeholder:"",value:n,onChange:i=>s(i.target.value),className:"sales-customer-list-search-input"})}),r.jsx("div",{className:"sales-customer-list-cards",children:a.length===0?r.jsx("p",{className:"sales-customer-list-empty",children:""}):a.map(i=>r.jsxs("button",{type:"button",className:"sales-customer-list-card",onClick:()=>l(i.key),children:[r.jsx("span",{className:"sales-customer-list-card-store",children:i.store}),r.jsx("span",{className:"sales-customer-list-card-company",children:i.company}),r.jsx("span",{className:`sales-customer-list-badge pipeline-${i.pipeline}`,"data-pipeline":i.pipeline,children:a0[i.pipeline]??i.pipeline}),i.sales_rep&&r.jsxs("span",{className:"sales-customer-list-card-sales-rep",children:[": ",i.sales_rep]}),(i.next_action||i.last_contact)&&r.jsxs("span",{className:"sales-customer-list-card-meta",children:[i.next_action&&r.jsxs("span",{children:[": ",i.next_action]}),i.last_contact&&r.jsxs("span",{children:[": ",i.last_contact]})]})]},i.key))})]})}function i0(){const{startTransition:e}=nn();return r.jsxs("div",{className:"report-page sales-karte-list-page","data-job":"sales",children:[r.jsx("div",{className:"report-page-viz",children:r.jsx(at,{mode:"base",className:"report-page-visualizer"})}),r.jsxs("div",{className:"report-page-content sales-karte-list-content",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"24px"},children:[r.jsx("button",{onClick:()=>e("/jobs/sales/entrance"),style:{background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--fg)",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",marginRight:"12px"},children:""}),r.jsx("h1",{style:{fontSize:"1.25rem",margin:0,fontWeight:600},children:""})]}),r.jsx(l0,{title:""})]})]})}function o0(){const e=_t(),{startTransition:t}=nn(),[n,s]=f.useState(!1),[a,l]=f.useState({company_name:"",store_name:"",contact_person:"",phone:"",email:"",lead_status:"negotiating",probability:"",notes:""}),i="/api",o=d=>{const{name:u,value:m}=d.target;l(h=>({...h,[u]:m}))},c=async d=>{d.preventDefault(),s(!0);const u={name:a.store_name,company_name:a.company_name,contact_person:a.contact_person,phone:a.phone,email:a.email,lead_status:a.lead_status,probability:a.probability,notes:a.notes,sales_rep:"",registration_type:"sales_lead",status:"pending_customer_info",created_at:new Date().toISOString()};try{const m=localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token,h=await fetch(`${i}/stores`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify(u)});if(h.ok){const x=await h.json(),v=`${window.location.origin}/registration/customer-complete.html?token=${x.id}`;alert(`

:
${v}`),t("/jobs/sales/entrance")}else throw new Error("")}catch(m){console.error("Error:",m),alert("")}finally{s(!1)}};return r.jsxs("div",{className:"report-page","data-job":"sales",children:[r.jsx("div",{className:"report-page-viz",children:r.jsx(at,{mode:"base",className:"report-page-visualizer"})}),r.jsxs("div",{className:"report-page-content",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"24px"},children:[r.jsx("button",{onClick:()=>t("/jobs/sales/entrance"),style:{background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--fg)",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",marginRight:"12px"},children:""}),r.jsx("h1",{style:{fontSize:"1.25rem",margin:0,fontWeight:600},children:""}),r.jsx("button",{type:"button",onClick:()=>e("/sales/clients/list"),style:{marginLeft:"auto",padding:"8px 16px",fontSize:"0.8rem",background:"var(--job-sales)",border:"none",borderRadius:"8px",color:"#fff",cursor:"pointer",fontWeight:600},children:""})]}),r.jsxs("form",{onSubmit:c,className:"report-page-form",children:[r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{style:{fontSize:"0.85rem",opacity:.7,marginBottom:"8px"},children:" *"}),r.jsx("textarea",{name:"company_name",rows:"1",required:!0,placeholder:":  Dart Ace",value:a.company_name,onChange:o,style:{padding:"12px",background:"rgba(255,255,255,0.05)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.1)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{style:{fontSize:"0.85rem",opacity:.7,marginBottom:"8px"},children:" *"}),r.jsx("textarea",{name:"store_name",rows:"1",required:!0,placeholder:": ",value:a.store_name,onChange:o,style:{padding:"12px",background:"rgba(255,255,255,0.05)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.1)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{style:{fontSize:"0.85rem",opacity:.7,marginBottom:"8px"},children:" *"}),r.jsx("textarea",{name:"phone",rows:"1",required:!0,placeholder:"03-1234-5678",value:a.phone,onChange:o,style:{padding:"12px",background:"rgba(255,255,255,0.05)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.1)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{style:{fontSize:"0.85rem",opacity:.7,marginBottom:"8px"},children:" *"}),r.jsx("textarea",{name:"email",rows:"1",required:!0,placeholder:"info@example.com",value:a.email,onChange:o,style:{padding:"12px",background:"rgba(255,255,255,0.05)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.1)"}})]}),r.jsx("div",{className:"form-actions",style:{marginTop:"32px"},children:r.jsx("button",{type:"submit",style:{width:"100%",padding:"14px",background:"var(--job-sales)",color:"#fff",border:"none",borderRadius:"12px",fontSize:"1rem",fontWeight:600,cursor:"pointer",boxShadow:"0 4px 12px var(--job-sales-glow)"},disabled:n,children:n?"...":""})})]}),r.jsx("p",{style:{textAlign:"center",marginTop:"40px",paddingBottom:"40px"},children:r.jsx("a",{href:"#",onClick:d=>{d.preventDefault(),t("/jobs/sales/entrance")},style:{color:"var(--job-sales)",fontSize:"0.85rem",textDecoration:"none",opacity:.6},children:""})})]})]})}function c0(){const e=_t(),[t,n]=f.useState(!0),[s,a]=f.useState([]),[l,i]=f.useState([]),[o,c]=f.useState([]),[d,u]=f.useState("all"),[m,h]=f.useState("all"),[x,v]=f.useState(""),{startTransition:S}=nn(),N="/api";f.useMemo(()=>{const _=s.map(w=>w.pref).filter(Boolean);return["all",...new Set(_)].sort()},[s]),f.useEffect(()=>{(async()=>{try{const P={Authorization:`Bearer ${localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token}`,"Content-Type":"application/json"},[D,H,I]=await Promise.all([fetch(`${N}/stores`,{headers:P}).catch(F=>({ok:!1,error:F})),fetch(`${N}/clients`,{headers:P}).catch(F=>({ok:!1,error:F})),fetch(`${N}/brands`,{headers:P}).catch(F=>({ok:!1,error:F}))]);if(D.ok){const F=await D.json();a(Array.isArray(F)?F:F.items||[])}if(H.ok){const F=await H.json();i(Array.isArray(F)?F:F.items||[])}if(I.ok){const F=await I.json();c(Array.isArray(F)?F:F.items||[])}}catch(w){console.error("Failed to fetch data:",w)}finally{n(!1)}})()},[]);const g=_=>{const w=l.find(P=>String(P.id)===String(_));return w&&(w.name||w.company_name)||""},p=_=>{if(_.brand_name!=null&&_.brand_name!=="")return _.brand_name;const w=o.find(P=>String(P.id)===String(_.brand_id));return w?w.name:""},y=f.useMemo(()=>s.filter(_=>{if(d!=="all"){const w=_.status||"active";let P=w;if(w==="active"?P="":w==="suspended"?P="":w==="terminated"&&(P=""),d===""&&_.registration_type!=="sales_lead"||d!==""&&P!==d&&w!==d)return!1}if(m!=="all"&&_.pref!==m)return!1;if(x){const w=x.toLowerCase().split(/[\s]+/).filter(Boolean);if(w.length>0){const P=g(_.client_id).toLowerCase(),D=p(_).toLowerCase(),H=(_.name||"").toLowerCase();return w.every(I=>H.includes(I)||P.includes(I)||D.includes(I))}}return!0}),[s,l,o,d,m,x]);return t?r.jsx("div",{className:"report-page","data-job":"sales",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("p",{className:"job-entrance-dummy",children:"..."})}):r.jsxs("div",{className:"report-page","data-job":"sales",children:[r.jsx("div",{className:"report-page-viz",children:r.jsx(at,{mode:"base",className:"report-page-visualizer"})}),r.jsxs("div",{className:"report-page-content",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"24px"},children:[r.jsx("button",{onClick:()=>S("/jobs/sales/entrance"),style:{background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--fg)",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",marginRight:"12px"},children:""}),r.jsx("h1",{style:{fontSize:"1.25rem",margin:0,fontWeight:600},children:""}),r.jsx("button",{type:"button",onClick:()=>e("/sales/clients/new"),style:{marginLeft:"auto",padding:"8px 16px",fontSize:"0.8rem",background:"var(--job-sales)",border:"none",borderRadius:"8px",color:"#fff",cursor:"pointer",fontWeight:600},children:""})]}),r.jsx("div",{className:"report-page-field",style:{marginBottom:20},children:r.jsx("div",{style:{position:"relative",background:"rgba(255,255,255,0.05)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.1)",overflow:"hidden"},children:r.jsx("input",{type:"text",placeholder:"...",value:x,onChange:_=>v(_.target.value),style:{width:"100%",padding:"12px 16px",background:"transparent",color:"var(--fg)",border:"none",fontSize:"0.95rem",outline:"none"}})})}),r.jsx("div",{style:{display:"flex",gap:8,overflowX:"auto",paddingBottom:12,marginBottom:16,scrollbarWidth:"none"},children:["all","",""].map(_=>r.jsx("button",{onClick:()=>u(_),style:{padding:"6px 14px",borderRadius:"20px",border:"1px solid",borderColor:d===_?"var(--job-sales)":"rgba(255,255,255,0.1)",background:d===_?"var(--job-sales)":"rgba(255,255,255,0.05)",color:d===_?"#fff":"rgba(255,255,255,0.6)",fontSize:"0.8rem",whiteSpace:"nowrap",cursor:"pointer"},children:_==="all"?"":_},_))}),r.jsx("div",{style:{display:"grid",gap:12},children:y.map(_=>r.jsxs("div",{className:"card",style:{padding:"16px",background:"rgba(255,255,255,0.03)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)",borderLeftWidth:4,borderLeftStyle:"solid",borderLeftColor:_.status==="active"?"#22c55e":"rgba(255,255,255,0.1)",cursor:"pointer"},onClick:()=>e(`/sales/store/${_.id}`),children:[r.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"8px",marginBottom:"6px",fontSize:"0.8rem"},children:[(_.client_name||g(_.client_id))&&r.jsxs(r.Fragment,{children:[r.jsx("span",{style:{opacity:.6},children:""}),r.jsx("span",{title:_.client_name||g(_.client_id),style:{display:"inline-block",fontSize:"0.75rem",fontWeight:500,padding:"4px 10px",borderRadius:"999px",background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.4)",color:"var(--fg)",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:_.client_name||g(_.client_id)})]}),(_.client_name||g(_.client_id))&&_.name&&r.jsx("span",{style:{opacity:.3},children:"/"}),r.jsx("span",{style:{opacity:.6},children:""}),r.jsx("span",{style:{fontWeight:600},children:_.name})]}),p(_)&&r.jsx("div",{style:{marginBottom:"6px",fontSize:"1.1rem",fontWeight:600},children:p(_)}),_.registration_type==="sales_lead"&&r.jsx("div",{style:{marginTop:"8px",display:"flex",gap:"8px"},children:r.jsx("span",{style:{fontSize:"0.65rem",padding:"2px 8px",borderRadius:"4px",background:"var(--job-sales)",color:"#fff"},children:""})})]},_.id))}),r.jsx("p",{style:{textAlign:"center",marginTop:"40px",paddingBottom:"40px"},children:r.jsx("a",{href:"#",onClick:_=>{_.preventDefault(),S("/jobs/sales/entrance")},style:{color:"var(--job-sales)",fontSize:"0.85rem",textDecoration:"none",opacity:.6},children:""})})]})]})}const u0=[{id:"all",label:""},{id:"appointment",label:""},{id:"estimate",label:""},{id:"survey",label:""},{id:"screening",label:""}],d0={appointment:"#3b82f6",estimate:"#8b5cf6",survey:"#f59e0b",screening:"#22c55e"},fd={appointment:"",estimate:"",survey:"",screening:""};function f0(){const e=_t(),[t,n]=f.useState(!0),[s,a]=f.useState([]),[l,i]=f.useState("all"),{startTransition:o}=nn(),c="/api";f.useEffect(()=>{(async()=>{try{const x={Authorization:`Bearer ${localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token}`,"Content-Type":"application/json"},v=await fetch(`${c}/stores`,{headers:x}).catch(S=>({ok:!1}));if(v.ok){const S=await v.json(),N=Array.isArray(S)?S:S.items||[];a(N.filter(g=>g.registration_type==="lead"))}}catch(h){console.error("Failed to fetch leads:",h)}finally{n(!1)}})()},[]);const d=f.useMemo(()=>l==="all"?s:s.filter(m=>m.lead_status===l),[s,l]),u=m=>m==="all"?s.length:s.filter(h=>h.lead_status===m).length;return t?r.jsx("div",{className:"report-page","data-job":"sales",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("p",{className:"job-entrance-dummy",children:"..."})}):r.jsxs("div",{className:"report-page","data-job":"sales",children:[r.jsx("div",{className:"report-page-viz",children:r.jsx(at,{mode:"base",className:"report-page-visualizer"})}),r.jsxs("div",{className:"report-page-content",style:{paddingTop:"50px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[r.jsx("button",{onClick:()=>o("/jobs/sales/entrance"),style:{background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--fg)",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",marginRight:"12px"},children:""}),r.jsx("h1",{style:{fontSize:"1.25rem",margin:0,fontWeight:600},children:""}),r.jsx("button",{onClick:()=>e("/sales/leads/new"),style:{marginLeft:"auto",padding:"8px 16px",fontSize:"0.8rem",background:"var(--job-sales)",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer",fontWeight:600},children:""})]}),r.jsx("div",{style:{display:"flex",flexWrap:"wrap",justifyContent:"center",gap:"6px",marginBottom:"16px"},children:u0.map(m=>r.jsxs("button",{onClick:()=>i(m.id),style:{padding:"6px 10px",borderRadius:"16px",border:l===m.id?"2px solid var(--job-sales)":"1px solid rgba(255,255,255,0.1)",background:l===m.id?"var(--job-sales)":"rgba(255,255,255,0.05)",color:l===m.id?"#fff":"rgba(255,255,255,0.7)",fontSize:"0.75rem",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:[m.label,r.jsx("span",{style:{background:l===m.id?"rgba(255,255,255,0.2)":"rgba(255,255,255,0.1)",padding:"1px 5px",borderRadius:"8px",fontSize:"0.65rem"},children:u(m.id)})]},m.id))}),r.jsx("div",{style:{display:"grid",gap:12},children:d.length>0?d.map(m=>r.jsxs("div",{style:{padding:"16px",background:"rgba(255,255,255,0.03)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)",cursor:"pointer"},onClick:()=>e(`/sales/leads/${m.id}`),children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"8px"},children:[r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:600,fontSize:"1rem",marginBottom:"2px"},children:m.company_name||m.name}),r.jsx("div",{style:{fontSize:"0.8rem",opacity:.6},children:m.name})]}),r.jsx("span",{style:{fontSize:"0.7rem",padding:"4px 10px",borderRadius:"6px",background:d0[m.lead_status]||"#6b7280",color:"#fff"},children:fd[m.lead_status]||m.lead_status})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",fontSize:"0.75rem",opacity:.5},children:[m.phone&&r.jsxs("span",{children:[" ",m.phone]}),m.next_action_date&&r.jsxs("span",{style:{color:"var(--job-sales)"},children:[" ",m.next_action_date]})]})]},m.id)):r.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",background:"rgba(255,255,255,0.03)",borderRadius:"16px"},children:[r.jsx("p",{style:{fontSize:"2rem",marginBottom:"12px"},children:""}),r.jsx("p",{style:{opacity:.6,fontSize:"0.9rem"},children:l==="all"?"":`${fd[l]}`}),r.jsx("button",{onClick:()=>e("/sales/leads/new"),style:{marginTop:"16px",padding:"10px 20px",background:"var(--job-sales)",color:"#fff",border:"none",borderRadius:"8px",cursor:"pointer"},children:""})]})}),r.jsx("p",{style:{textAlign:"center",marginTop:"40px",paddingBottom:"40px"},children:r.jsx("a",{href:"#",onClick:m=>{m.preventDefault(),o("/jobs/sales/entrance")},style:{color:"var(--job-sales)",fontSize:"0.85rem",textDecoration:"none",opacity:.6},children:""})})]})]})}const p0=[{value:"appointment",label:"",color:"#3b82f6"},{value:"estimate",label:"",color:"#8b5cf6"},{value:"survey",label:"",color:"#f59e0b"},{value:"screening",label:"",color:"#22c55e"}];function m0(){const e=_t(),{startTransition:t}=nn(),[n,s]=f.useState(!1),[a,l]=f.useState({company_name:"",store_name:"",contact_person:"",phone:"",email:"",lead_status:"appointment",notes:"",next_action_date:"",next_action_content:""}),i="/api",o=d=>{const{name:u,value:m}=d.target;l(h=>({...h,[u]:m}))},c=async d=>{d.preventDefault(),s(!0);const u={name:a.store_name,company_name:a.company_name,contact_person:a.contact_person,phone:a.phone,email:a.email,lead_status:a.lead_status,notes:a.notes,next_action_date:a.next_action_date,next_action_content:a.next_action_content,registration_type:"lead",created_at:new Date().toISOString()};try{const m=localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token;if((await fetch(`${i}/stores`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${m}`},body:JSON.stringify(u)})).ok)alert(""),t("/sales/leads");else throw new Error("")}catch(m){console.error("Error:",m),alert("")}finally{s(!1)}};return r.jsxs("div",{className:"report-page","data-job":"sales",children:[r.jsx("div",{className:"report-page-viz",children:r.jsx(at,{mode:"base",className:"report-page-visualizer"})}),r.jsxs("div",{className:"report-page-content",style:{paddingTop:"50px"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"24px"},children:[r.jsx("button",{onClick:()=>t("/sales/leads"),style:{background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--fg)",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",marginRight:"12px"},children:""}),r.jsx("h1",{style:{fontSize:"1.25rem",margin:0,fontWeight:600},children:""}),r.jsx("button",{onClick:()=>e("/sales/leads"),style:{marginLeft:"auto",padding:"8px 16px",fontSize:"0.8rem",background:"var(--job-sales)",border:"none",borderRadius:"8px",color:"#fff",cursor:"pointer",fontWeight:600},children:""})]}),r.jsxs("form",{onSubmit:c,children:[r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsx("label",{style:{fontSize:"0.8rem",opacity:.6,display:"block",marginBottom:"8px",textAlign:"center"},children:" *"}),r.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap",justifyContent:"center"},children:p0.map(d=>r.jsx("button",{type:"button",onClick:()=>l({...a,lead_status:d.value}),style:{padding:"8px 14px",fontSize:"0.8rem",borderRadius:"8px",border:a.lead_status===d.value?`2px solid ${d.color}`:"1px solid rgba(255,255,255,0.1)",background:a.lead_status===d.value?d.color:"rgba(255,255,255,0.05)",color:"#fff",cursor:"pointer"},children:d.label},d.value))})]}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsx("label",{style:{fontSize:"0.8rem",opacity:.6,display:"block",marginBottom:"6px"},children:" *"}),r.jsx("input",{type:"text",name:"company_name",required:!0,placeholder:":  Dart Ace",value:a.company_name,onChange:o,style:{width:"100%",padding:"12px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"10px",color:"var(--fg)",fontSize:"0.95rem"}})]}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsx("label",{style:{fontSize:"0.8rem",opacity:.6,display:"block",marginBottom:"6px"},children:""}),r.jsx("input",{type:"text",name:"store_name",placeholder:": ",value:a.store_name,onChange:o,style:{width:"100%",padding:"12px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"10px",color:"var(--fg)",fontSize:"0.95rem"}})]}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsx("label",{style:{fontSize:"0.8rem",opacity:.6,display:"block",marginBottom:"6px"},children:""}),r.jsx("input",{type:"text",name:"contact_person",placeholder:": ",value:a.contact_person,onChange:o,style:{width:"100%",padding:"12px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"10px",color:"var(--fg)",fontSize:"0.95rem"}})]}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsx("label",{style:{fontSize:"0.8rem",opacity:.6,display:"block",marginBottom:"6px"},children:""}),r.jsx("input",{type:"tel",name:"phone",placeholder:"03-1234-5678",value:a.phone,onChange:o,style:{width:"100%",padding:"12px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"10px",color:"var(--fg)",fontSize:"0.95rem"}})]}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsx("label",{style:{fontSize:"0.8rem",opacity:.6,display:"block",marginBottom:"6px"},children:""}),r.jsx("input",{type:"email",name:"email",placeholder:": contact@example.com",value:a.email,onChange:o,style:{width:"100%",padding:"12px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"10px",color:"var(--fg)",fontSize:"0.95rem"}})]}),r.jsxs("div",{style:{marginBottom:"16px",padding:"16px",background:"rgba(255,255,255,0.03)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)"},children:[r.jsx("label",{style:{fontSize:"0.8rem",opacity:.6,display:"block",marginBottom:"10px"},children:" "}),r.jsx("input",{type:"date",name:"next_action_date",value:a.next_action_date,onChange:o,style:{width:"100%",padding:"10px",marginBottom:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"var(--fg)",fontSize:"0.9rem"}}),r.jsx("input",{type:"text",name:"next_action_content",placeholder:": ",value:a.next_action_content,onChange:o,style:{width:"100%",padding:"10px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"var(--fg)",fontSize:"0.9rem"}})]}),r.jsxs("div",{style:{marginBottom:"24px"},children:[r.jsx("label",{style:{fontSize:"0.8rem",opacity:.6,display:"block",marginBottom:"6px"},children:""}),r.jsx("textarea",{name:"notes",rows:3,placeholder:"...",value:a.notes,onChange:o,style:{width:"100%",padding:"12px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"10px",color:"var(--fg)",fontSize:"0.95rem",resize:"vertical"}})]}),r.jsx("button",{type:"submit",disabled:n,style:{width:"100%",padding:"14px",background:"var(--job-sales)",color:"#fff",border:"none",borderRadius:"12px",fontSize:"1rem",fontWeight:600,cursor:"pointer",boxShadow:"0 4px 12px var(--job-sales-glow)"},children:n?"...":""})]}),r.jsx("p",{style:{textAlign:"center",marginTop:"40px",paddingBottom:"40px"},children:r.jsx("a",{href:"#",onClick:d=>{d.preventDefault(),t("/sales/leads")},style:{color:"var(--job-sales)",fontSize:"0.85rem",textDecoration:"none",opacity:.6},children:""})})]})]})}const ts=[{value:"appointment",label:"",color:"#3b82f6"},{value:"estimate",label:"",color:"#8b5cf6"},{value:"survey",label:"",color:"#f59e0b"},{value:"screening",label:"",color:"#22c55e"}],pd=[{value:"visit",label:"",icon:""},{value:"call",label:"",icon:""},{value:"email",label:"",icon:""},{value:"meeting",label:"",icon:""},{value:"other",label:"",icon:""}];function h0(){const{leadId:e}=ar(),t=_t(),{startTransition:n}=nn(),[s,a]=f.useState(!0),[l,i]=f.useState(null),[o,c]=f.useState([]),[d,u]=f.useState(!1),[m,h]=f.useState({type:"call",content:""}),[x,v]=f.useState({date:"",content:""}),[S,N]=f.useState(""),[g,p]=f.useState(!1),y="/api";f.useEffect(()=>{(async()=>{try{const z={Authorization:`Bearer ${localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token}`,"Content-Type":"application/json"},k=await fetch(`${y}/stores/${e}`,{headers:z});if(k.ok){const Y=await k.json();i(Y),v({date:Y.next_action_date||"",content:Y.next_action_content||""}),N(Y.notes||""),c([{id:1,type:"call",content:"",date:"2026-01-28",by:""},{id:2,type:"visit",content:"",date:"2026-01-30",by:""}])}}catch(F){console.error("Failed to fetch lead:",F)}finally{a(!1)}})()},[e]);const _=async I=>{if(l){p(!0);try{const F=localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token;await fetch(`${y}/stores/${e}`,{method:"PATCH",headers:{Authorization:`Bearer ${F}`,"Content-Type":"application/json"},body:JSON.stringify({lead_status:I})}),i({...l,lead_status:I})}catch(F){console.error("Failed to update status:",F)}finally{p(!1)}}},w=()=>{if(!m.content.trim())return;const I={id:Date.now(),type:m.type,content:m.content,date:new Date().toISOString().slice(0,10),by:""};c([I,...o]),h({type:"call",content:""}),u(!1)},P=async()=>{p(!0);try{const I=localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token;await fetch(`${y}/stores/${e}`,{method:"PATCH",headers:{Authorization:`Bearer ${I}`,"Content-Type":"application/json"},body:JSON.stringify({next_action_date:x.date,next_action_content:x.content,notes:S})})}catch(I){console.error("Failed to save:",I)}finally{p(!1)}},D=I=>{const F=ts.find(z=>z.value===I);return F?F.color:"#6b7280"},H=I=>{const F=ts.find(z=>z.value===I);return F?F.label:I};return s?r.jsx("div",{className:"report-page","data-job":"sales",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("p",{className:"job-entrance-dummy",children:"..."})}):l?r.jsxs("div",{className:"report-page","data-job":"sales",children:[r.jsx("div",{className:"report-page-viz",children:r.jsx(at,{mode:"base",className:"report-page-visualizer"})}),r.jsxs("div",{className:"report-page-content",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"20px"},children:[r.jsx("button",{onClick:()=>n("/sales/leads"),style:{background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--fg)",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",marginRight:"12px"},children:""}),r.jsxs("div",{children:[r.jsx("h1",{style:{fontSize:"1.1rem",margin:0,fontWeight:600},children:l.company_name||l.name}),r.jsx("p",{style:{fontSize:"0.75rem",margin:0,opacity:.6},children:l.name})]})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",marginBottom:"20px",padding:"16px",background:"rgba(255,255,255,0.03)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)"},children:[r.jsxs("div",{style:{flex:1},children:[r.jsx("p",{style:{fontSize:"0.7rem",opacity:.5,marginBottom:"8px"},children:""}),r.jsx("span",{style:{display:"inline-block",padding:"6px 12px",borderRadius:"8px",background:D(l.lead_status),color:"#fff",fontSize:"0.85rem",fontWeight:600},children:H(l.lead_status)})]}),r.jsxs("div",{children:[r.jsx("p",{style:{fontSize:"0.7rem",opacity:.5,marginBottom:"8px"},children:""}),r.jsx("span",{style:{fontSize:"1.5rem"},children:l.probability==="high"?"":l.probability==="medium"?"":""})]})]}),r.jsxs("div",{style:{marginBottom:"16px"},children:[r.jsx("p",{style:{fontSize:"0.75rem",opacity:.5,marginBottom:"8px"},children:""}),r.jsx("div",{style:{display:"flex",gap:"6px",flexWrap:"wrap"},children:ts.map(I=>r.jsx("button",{onClick:()=>_(I.value),disabled:g,style:{padding:"6px 10px",fontSize:"0.7rem",borderRadius:"6px",border:l.lead_status===I.value?`2px solid ${I.color}`:"1px solid rgba(255,255,255,0.1)",background:l.lead_status===I.value?I.color:"rgba(255,255,255,0.05)",color:l.lead_status===I.value?"#fff":"rgba(255,255,255,0.7)",cursor:"pointer"},children:I.label},I.value))})]}),(()=>{var G,C;const I=["appointment","estimate","survey","screening"],F=I.indexOf(l.lead_status),z=F>=0&&F<I.length-1?I[F+1]:null,k=z?(G=ts.find(L=>L.value===z))==null?void 0:G.label:null,Y=z?(C=ts.find(L=>L.value===z))==null?void 0:C.color:null;return z?r.jsx("div",{style:{padding:"16px",background:`linear-gradient(135deg, ${Y}22, ${Y}11)`,borderRadius:"16px",border:`2px solid ${Y}55`,marginBottom:"20px",textAlign:"center"},children:r.jsxs("button",{onClick:()=>_(z),disabled:g,style:{padding:"12px 28px",background:Y,color:"#fff",border:"none",borderRadius:"10px",fontSize:"0.95rem",fontWeight:600,cursor:"pointer",boxShadow:`0 4px 12px ${Y}44`,display:"flex",alignItems:"center",gap:"8px",margin:"0 auto"},children:[r.jsx("span",{children:""}),r.jsxs("span",{children:["",k,""]})]})}):null})(),r.jsxs("div",{style:{padding:"16px",background:"rgba(255,255,255,0.03)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)",marginBottom:"20px"},children:[r.jsx("p",{style:{fontSize:"0.75rem",opacity:.5,marginBottom:"12px"},children:""}),r.jsxs("div",{style:{display:"grid",gap:"8px",fontSize:"0.85rem"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{style:{opacity:.6},children:""}),r.jsx("span",{children:l.contact_person||"-"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{style:{opacity:.6},children:""}),r.jsx("a",{href:`tel:${l.phone}`,style:{color:"var(--job-sales)"},children:l.phone||"-"})]}),r.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[r.jsx("span",{style:{opacity:.6},children:""}),r.jsx("a",{href:`mailto:${l.email}`,style:{color:"var(--job-sales)",fontSize:"0.8rem"},children:l.email||"-"})]})]})]}),r.jsxs("div",{style:{padding:"16px",background:"rgba(255,255,255,0.03)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)",marginBottom:"20px"},children:[r.jsx("p",{style:{fontSize:"0.75rem",opacity:.5,marginBottom:"12px"},children:" "}),r.jsx("input",{type:"date",value:x.date,onChange:I=>v({...x,date:I.target.value}),style:{width:"100%",padding:"10px",marginBottom:"8px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"var(--fg)",fontSize:"0.9rem"}}),r.jsx("input",{type:"text",placeholder:": ",value:x.content,onChange:I=>v({...x,content:I.target.value}),style:{width:"100%",padding:"10px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"var(--fg)",fontSize:"0.9rem"}})]}),r.jsxs("div",{style:{padding:"16px",background:"rgba(255,255,255,0.03)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)",marginBottom:"20px"},children:[r.jsx("p",{style:{fontSize:"0.75rem",opacity:.5,marginBottom:"12px"},children:" "}),r.jsx("textarea",{placeholder:"...",value:S,onChange:I=>N(I.target.value),rows:4,style:{width:"100%",padding:"10px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"var(--fg)",fontSize:"0.9rem",resize:"vertical"}}),r.jsx("button",{onClick:P,disabled:g,style:{marginTop:"12px",width:"100%",padding:"12px",background:"var(--job-sales)",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.9rem",fontWeight:600,cursor:"pointer"},children:g?"...":""})]}),r.jsxs("div",{style:{marginBottom:"20px"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"12px"},children:[r.jsx("p",{style:{fontSize:"0.75rem",opacity:.5,margin:0},children:" "}),r.jsx("button",{onClick:()=>u(!d),style:{padding:"6px 12px",fontSize:"0.75rem",background:"var(--job-sales)",color:"#fff",border:"none",borderRadius:"6px",cursor:"pointer"},children:"+ "})]}),d&&r.jsxs("div",{style:{padding:"16px",background:"rgba(255,255,255,0.05)",borderRadius:"12px",marginBottom:"12px"},children:[r.jsx("div",{style:{display:"flex",gap:"6px",marginBottom:"10px",flexWrap:"wrap"},children:pd.map(I=>r.jsxs("button",{onClick:()=>h({...m,type:I.value}),style:{padding:"4px 10px",fontSize:"0.75rem",borderRadius:"6px",border:m.type===I.value?"2px solid var(--job-sales)":"1px solid rgba(255,255,255,0.1)",background:m.type===I.value?"var(--job-sales)":"transparent",color:"#fff",cursor:"pointer"},children:[I.icon," ",I.label]},I.value))}),r.jsx("textarea",{placeholder:"...",value:m.content,onChange:I=>h({...m,content:I.target.value}),rows:2,style:{width:"100%",padding:"10px",background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px",color:"var(--fg)",fontSize:"0.85rem",marginBottom:"10px"}}),r.jsx("button",{onClick:w,style:{width:"100%",padding:"10px",background:"var(--job-sales)",color:"#fff",border:"none",borderRadius:"8px",fontSize:"0.85rem",cursor:"pointer"},children:""})]}),r.jsx("div",{style:{display:"grid",gap:"8px"},children:o.map(I=>{const F=pd.find(z=>z.value===I.type);return r.jsxs("div",{style:{padding:"12px",background:"rgba(255,255,255,0.03)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.05)"},children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"6px"},children:[r.jsxs("span",{style:{fontSize:"0.75rem"},children:[F==null?void 0:F.icon," ",F==null?void 0:F.label]}),r.jsxs("span",{style:{fontSize:"0.7rem",opacity:.5},children:[I.date," / ",I.by]})]}),r.jsx("p",{style:{margin:0,fontSize:"0.85rem",lineHeight:1.5},children:I.content})]},I.id)})})]}),l.lead_status==="screening"&&r.jsxs("div",{style:{padding:"20px",background:"linear-gradient(135deg, rgba(34,197,94,0.1), rgba(34,197,94,0.05))",borderRadius:"16px",border:"2px solid rgba(34,197,94,0.3)",marginBottom:"20px",textAlign:"center"},children:[r.jsx("p",{style:{fontSize:"0.85rem",marginBottom:"12px",opacity:.8},children:" "}),r.jsx("button",{onClick:()=>{const I=new URLSearchParams({company_name:l.company_name||"",store_name:l.name||"",phone:l.phone||"",email:l.email||"",from_lead:e});t(`/sales/clients/new?${I.toString()}`)},style:{padding:"14px 32px",background:"#22c55e",color:"#fff",border:"none",borderRadius:"12px",fontSize:"1rem",fontWeight:600,cursor:"pointer",boxShadow:"0 4px 16px rgba(34,197,94,0.3)"},children:""})]}),r.jsx("p",{style:{textAlign:"center",marginTop:"40px",paddingBottom:"40px"},children:r.jsx("a",{href:"#",onClick:I=>{I.preventDefault(),n("/sales/leads")},style:{color:"var(--job-sales)",fontSize:"0.85rem",textDecoration:"none",opacity:.6},children:""})})]})]}):r.jsx("div",{className:"report-page","data-job":"sales",children:r.jsxs("div",{className:"report-page-content",style:{textAlign:"center",paddingTop:"60px"},children:[r.jsx("p",{children:""}),r.jsx("button",{onClick:()=>n("/sales/leads"),children:""})]})})}function g0(){const{startTransition:e}=nn();return r.jsxs("div",{className:"report-page","data-job":"sales",children:[r.jsx("div",{className:"report-page-viz",children:r.jsx(at,{mode:"base",className:"report-page-visualizer"})}),r.jsxs("div",{className:"report-page-content",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"24px"},children:[r.jsx("button",{onClick:()=>e("/jobs/sales/entrance"),style:{background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--fg)",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",marginRight:"12px"},children:""}),r.jsx("h1",{style:{fontSize:"1.25rem",margin:0,fontWeight:600},children:""})]}),r.jsxs("div",{style:{textAlign:"center",padding:"60px 20px",background:"rgba(255,255,255,0.03)",borderRadius:"16px",border:"1px solid rgba(255,255,255,0.05)"},children:[r.jsx("p",{style:{fontSize:"3rem",marginBottom:"16px"},children:""}),r.jsx("p",{style:{opacity:.6,fontSize:"0.9rem"},children:""})]}),r.jsx("p",{style:{textAlign:"center",marginTop:"40px",paddingBottom:"40px"},children:r.jsx("a",{href:"#",onClick:t=>{t.preventDefault(),e("/jobs/sales/entrance")},style:{color:"var(--job-sales)",fontSize:"0.85rem",textDecoration:"none",opacity:.6},children:""})})]})]})}const ns=(()=>{var e;return typeof window<"u"&&((e=window.location)==null?void 0:e.hostname)==="localhost"?"/api":"https://51bhoxkbxd.execute-api.ap-northeast-1.amazonaws.com/prod"})(),y0=[{value:"active",label:""},{value:"contract_in_progress",label:""},{value:"suspended",label:""},{value:"inactive",label:""}],md=()=>({client_id:"",brand_id:"",brand_name:"",client_name:"",name:"",contact_person:"",phone:"",email:"",url:"",status:"active",cleaning_frequency:"",acquired_by:"",assigned_to:"",introducer:"",needs_notes:"",implementation_items:""});function v0(){var ne;const e=_t(),t=tn(),{startTransition:n}=nn(),s=f.useRef(null),a=f.useRef(null),l=f.useRef(null),i=f.useRef(null),[o,c]=f.useState(!0),[d,u]=f.useState([]),[m,h]=f.useState([]),[x,v]=f.useState([]),[S,N]=f.useState(""),[g,p]=f.useState("all"),[y,_]=f.useState(null),[w,P]=f.useState("edit"),[D,H]=f.useState(0),[I,F]=f.useState(50),[z,k]=f.useState(!1),[Y,G]=f.useState(!1),[C,L]=f.useState(md()),[J,b]=f.useState(!1),[$,V]=f.useState(!1),[ee,se]=f.useState(!1),ie=f.useCallback(()=>({Authorization:`Bearer ${localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token}`,"Content-Type":"application/json"}),[]),ue=f.useCallback(async()=>{try{const[A,Q,he]=await Promise.all([fetch(`${ns}/stores`,{headers:ie()}).catch(pe=>(console.warn("[OfficeClientListPage] Failed to fetch stores:",pe),{ok:!1,error:pe})),fetch(`${ns}/clients`,{headers:ie()}).catch(pe=>(console.warn("[OfficeClientListPage] Failed to fetch clients:",pe),{ok:!1,error:pe})),fetch(`${ns}/brands`,{headers:ie()}).catch(pe=>(console.warn("[OfficeClientListPage] Failed to fetch brands:",pe),{ok:!1,error:pe}))]);if(A.ok&&!A.error)try{const pe=await A.json();u(Array.isArray(pe)?pe:pe.items||[])}catch(pe){console.warn("[OfficeClientListPage] Failed to parse stores response:",pe)}if(Q.ok&&!Q.error)try{const pe=await Q.json();h(Array.isArray(pe)?pe:pe.items||[])}catch(pe){console.warn("[OfficeClientListPage] Failed to parse clients response:",pe)}if(he.ok&&!he.error)try{const pe=await he.json();v(Array.isArray(pe)?pe:pe.items||[])}catch(pe){console.warn("[OfficeClientListPage] Failed to parse brands response:",pe)}}catch(A){console.error("[OfficeClientListPage] Failed to fetch customer data:",A)}finally{c(!1)}},[ie]);f.useEffect(()=>{ue()},[ue]),f.useEffect(()=>{const A="office-client-list-scrollbar";return document.documentElement.classList.add(A),document.body.classList.add(A),()=>{document.documentElement.classList.remove(A),document.body.classList.remove(A)}},[]),f.useEffect(()=>{var Q;const A=(Q=t.state)==null?void 0:Q.openStoreId;A&&(_(A),e(t.pathname,{replace:!0,state:{}}))},[(ne=t.state)==null?void 0:ne.openStoreId,t.pathname,e]),f.useEffect(()=>{if(!y){L(md()),P("edit");return}let A=!1;return b(!0),fetch(`${ns}/stores/${y}`,{headers:ie()}).then(Q=>Q.ok?Q.json():Promise.reject(new Error(""))).then(Q=>{A||L({client_id:Q.client_id??"",brand_id:Q.brand_id??"",brand_name:Q.brand_name??"",client_name:Q.client_name??Q.company_name??"",name:Q.name||"",contact_person:Q.contact_person||"",phone:Q.phone||"",email:Q.email||"",url:Q.url||"",status:Q.status||"active",cleaning_frequency:Q.cleaning_frequency||"",acquired_by:Q.acquired_by||"",assigned_to:Q.assigned_to||"",introducer:Q.introducer||"",needs_notes:Q.needs_notes||"",implementation_items:Q.implementation_items||""})}).catch(Q=>{A||(console.error(Q),alert(""),_(null))}).finally(()=>{A||b(!1)}),()=>{A=!0}},[y,ie]),f.useEffect(()=>{if(J||!y)return;const A=d.find(Q=>String(Q.id)===String(y));A&&L(Q=>{const he=Q.brand_name||j(A),pe=Q.client_name||M(A);return he===Q.brand_name&&pe===Q.client_name?Q:{...Q,brand_name:he,client_name:pe}})},[J,y,d,x,m]),f.useEffect(()=>{G(!1)},[y]);const we=f.useCallback(A=>{A.preventDefault(),A.stopPropagation(),k(!0);const Q=pe=>{pe.preventDefault();const qe=s.current;if(!qe)return;const Oe=qe.getBoundingClientRect(),U=(pe.clientX-Oe.left)/Oe.width*100,re=Math.max(20,Math.min(80,U));F(re)},he=pe=>{pe.preventDefault(),k(!1),document.removeEventListener("mousemove",Q),document.removeEventListener("mouseup",he),document.body.style.cursor="",document.body.style.userSelect="",document.body.style.pointerEvents=""};document.addEventListener("mousemove",Q,{passive:!1}),document.addEventListener("mouseup",he,{passive:!1}),document.body.style.cursor="col-resize",document.body.style.userSelect="none",document.body.style.pointerEvents="auto"},[]),M=A=>{if(A.client_name!=null&&A.client_name!=="")return A.client_name;const Q=m.find(he=>String(he.id)===String(A.client_id));return Q&&(Q.name||Q.company_name)||""},j=A=>{if(A.brand_name!=null&&A.brand_name!=="")return A.brand_name;const Q=x.find(he=>String(he.id)===String(A.brand_id));return Q?Q.name:""},q=A=>{const Q=(A.cleaning_frequency||"").trim();return Q?//.test(Q)?"":/||/.test(Q)?"":Q:null},W=f.useMemo(()=>d.filter(A=>{if(g!=="all"){const Q=A.status||"inactive";if(g===""&&Q!=="active"||g===""&&Q!=="contract_in_progress"||g===""&&Q!=="suspended")return!1}if(S.trim()){const Q=S.toLowerCase().trim(),he=M(A).toLowerCase(),pe=j(A).toLowerCase(),qe=(A.name||"").toLowerCase(),Oe=(A.contact_person||"").toLowerCase(),U=(A.email||"").toLowerCase();return he.includes(Q)||pe.includes(Q)||qe.includes(Q)||Oe.includes(Q)||U.includes(Q)}return!0}),[d,m,x,S,g]),O=A=>{const{name:Q,value:he}=A.target;L(pe=>({...pe,[Q]:he}))},ae=f.useCallback(async A=>{var Q;if((Q=A==null?void 0:A.preventDefault)==null||Q.call(A),!!y){V(!0);try{const he={...C};he.client_id===""&&delete he.client_id,he.brand_id===""&&delete he.brand_id;const pe=await fetch(`${ns}/stores/${y}`,{method:"PUT",headers:ie(),body:JSON.stringify(he)});if(!pe.ok){const qe=await pe.text();let Oe="";try{const re=JSON.parse(qe);Oe=re.message||re.error||re.detail||""}catch{Oe=qe?qe.slice(0,200):""}const U=Oe?` (${pe.status}): ${Oe}`:` (${pe.status})`;throw new Error(U)}alert(""),u(qe=>qe.map(Oe=>String(Oe.id)===String(y)?{...Oe,...he}:Oe)),await ue(),u(qe=>qe.map(Oe=>String(Oe.id)===String(y)?{...Oe,...he}:Oe))}catch(he){console.error(he),alert(he.message||"")}finally{V(!1)}}},[y,C,ie,ue]);if(o)return r.jsx("div",{className:"report-page","data-job":"office",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("p",{className:"job-entrance-dummy",children:"..."})});const B=!!y;return r.jsxs("div",{className:"report-page office-client-list-page","data-job":"office",children:[r.jsx("div",{className:"report-page-viz",children:r.jsx(at,{mode:"base",className:"report-page-visualizer"})}),r.jsxs("div",{ref:a,className:"report-page-content report-page-content--full office-client-list-page-content",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"24px",flexShrink:0},children:[r.jsx("button",{type:"button",onClick:()=>n("/jobs/office/entrance"),style:{background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--fg)",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",marginRight:"12px"},children:""}),r.jsx("h1",{style:{fontSize:"1.25rem",margin:0,fontWeight:600},children:""})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:12,marginBottom:16,flexShrink:0},children:[r.jsx("div",{style:{flex:1,minWidth:0,position:"relative",background:"rgba(255,255,255,0.05)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.1)",overflow:"hidden"},children:r.jsx("input",{type:"text",placeholder:"...",value:S,onChange:A=>N(A.target.value),style:{width:"100%",padding:"12px 16px",background:"transparent",color:"var(--fg)",border:"none",fontSize:"0.95rem",outline:"none"}})}),r.jsx("div",{style:{display:"flex",gap:8,flexShrink:0},children:["all","","",""].map(A=>r.jsx("button",{type:"button",onClick:()=>p(A),style:{padding:"6px 14px",borderRadius:"20px",border:"1px solid",borderColor:g===A?"var(--job-office)":"rgba(255,255,255,0.1)",background:g===A?"var(--job-office)":"rgba(255,255,255,0.05)",color:g===A?"#fff":"rgba(255,255,255,0.6)",fontSize:"0.8rem",whiteSpace:"nowrap",cursor:"pointer"},children:A==="all"?"":A},A))})]}),r.jsx("div",{ref:l,className:"office-client-list-main-container",children:r.jsxs("div",{ref:s,className:`office-client-list-two-columns ${B?"office-client-list-two-columns--with-panel":""} ${w==="karte"?"office-client-list-two-columns--karte":""}`,children:[r.jsxs("div",{className:"office-client-list-column-left",style:{width:B?w==="karte"?"30%":`${I}%`:"100%",minWidth:B?200:void 0},children:[r.jsx("div",{style:{flexShrink:0,paddingBottom:12},children:r.jsx("button",{type:"button",onClick:()=>e("/office/clients/new"),style:{width:"100%",padding:"10px 16px",fontSize:"0.85rem",background:"var(--job-office)",border:"none",borderRadius:"8px",color:"#fff",cursor:"pointer",fontWeight:600},children:""})}),r.jsxs("div",{className:"office-client-list-table",children:[r.jsxs("div",{className:"office-client-list-row office-client-list-header",style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1.2fr 1fr 1fr 0.6fr",gap:12,padding:"12px 16px",background:"rgba(255,255,255,0.06)",borderRadius:"8px 8px 0 0",fontSize:"0.75rem",fontWeight:600,color:"rgba(255,255,255,0.7)",border:"1px solid rgba(255,255,255,0.08)",borderBottom:"none"},children:[r.jsx("span",{children:""}),r.jsx("span",{children:""}),r.jsx("span",{children:""}),r.jsx("span",{children:""}),r.jsx("span",{children:""}),r.jsx("span",{children:""}),r.jsx("span",{children:""}),r.jsx("span",{children:""})]}),W.length===0?r.jsx("p",{style:{textAlign:"center",opacity:.7,padding:24},children:""}):W.map(A=>r.jsxs("div",{role:"button",tabIndex:0,className:"office-client-list-row",style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr 1.2fr 1fr 1fr 0.6fr",gap:12,padding:"12px 16px",background:y===A.id?"rgba(255,255,255,0.08)":"rgba(255,255,255,0.03)",border:"1px solid rgba(255,255,255,0.05)",borderLeftWidth:4,borderLeftStyle:"solid",borderLeftColor:A.status==="active"?"#22c55e":"rgba(255,255,255,0.1)",fontSize:"0.875rem",alignItems:"center",cursor:"pointer"},onClick:()=>_(A.id),onKeyDown:Q=>Q.key==="Enter"&&_(A.id),children:[r.jsx("span",{className:"office-client-list-brand",title:j(A),children:j(A)||""}),r.jsx("span",{title:A.name,children:A.name||""}),r.jsx("span",{title:M(A),children:M(A)||""}),r.jsx("span",{title:A.phone,children:A.phone||""}),r.jsx("span",{title:A.email,style:{wordBreak:"break-all"},children:A.email||""}),r.jsx("span",{title:A.contact_person,children:A.contact_person||""}),r.jsx("span",{title:A.assigned_to,children:A.assigned_to||""}),r.jsx("span",{className:"office-client-list-contract",children:q(A)?r.jsx("span",{className:`office-client-list-contract-tag ${q(A)===""?"office-client-list-contract-tag--spot":q(A)===""?"office-client-list-contract-tag--regular":"office-client-list-contract-tag--other"}`,title:A.cleaning_frequency||"",children:q(A)}):""})]},A.id))]})]}),B&&r.jsx("div",{role:"separator","aria-label":"",className:"office-client-list-resizer",onMouseDown:we,style:{background:z?"var(--job-office)":void 0}}),B&&r.jsxs("div",{className:"office-client-list-column-right",style:{flex:1,minWidth:200,overflow:"hidden",display:"flex",flexDirection:"column",background:"transparent"},children:[r.jsx("div",{className:"office-client-list-panel-actions",children:r.jsxs("div",{className:"office-client-list-panel-header",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[r.jsx("button",{type:"button",onClick:()=>P("edit"),disabled:Y,style:{padding:"10px 16px",fontSize:"0.85rem",background:w==="edit"?"var(--job-office)":"rgba(255,255,255,0.08)",border:`1px solid ${w==="edit"?"var(--job-office)":"rgba(255,255,255,0.15)"}`,borderRadius:"8px",color:w==="edit"?"#fff":"var(--fg)",cursor:Y?"not-allowed":"pointer",fontWeight:600,opacity:Y?.5:1},children:""}),r.jsx("button",{type:"button",onClick:()=>P("karte"),disabled:Y,style:{padding:"10px 16px",fontSize:"0.85rem",background:w==="karte"?"var(--job-office)":"rgba(255,255,255,0.08)",border:`1px solid ${w==="karte"?"var(--job-office)":"rgba(255,255,255,0.15)"}`,borderRadius:"8px",color:w==="karte"?"#fff":"var(--fg)",cursor:Y?"not-allowed":"pointer",fontWeight:600,opacity:Y?.5:1},children:""}),r.jsx("button",{type:"button",onClick:()=>G(!Y),title:Y?"":"",style:{padding:"8px 12px",fontSize:"1.1rem",background:Y?"rgba(251, 191, 36, 0.2)":"rgba(255,255,255,0.08)",border:`1px solid ${Y?"rgba(251, 191, 36, 0.5)":"rgba(255,255,255,0.15)"}`,borderRadius:"8px",color:Y?"#fbbf24":"var(--fg)",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",minWidth:"40px"},children:Y?"":""})]}),r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8,flexWrap:"wrap"},children:[w==="edit"&&r.jsx("button",{type:"button",onClick:ae,disabled:Y||$||J,style:{padding:"8px 20px",fontSize:"0.9rem",background:"rgba(255,255,255,0.12)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",color:"var(--fg)",cursor:Y||$||J?"not-allowed":"pointer",fontWeight:600,opacity:Y?.5:1},children:$?"...":""}),w==="karte"&&r.jsx("button",{type:"button",onClick:()=>{var Q,he;se(!0);const A=(he=(Q=i.current)==null?void 0:Q.save)==null?void 0:he.call(Q);A&&typeof A.finally=="function"?A.finally(()=>se(!1)):se(!1)},disabled:Y||ee,style:{padding:"8px 20px",fontSize:"0.9rem",background:"rgba(255,255,255,0.12)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",color:"var(--fg)",cursor:Y||ee?"not-allowed":"pointer",fontWeight:600,opacity:Y?.5:1},children:ee?"...":""}),w==="karte"&&r.jsx("button",{type:"button",onClick:()=>{const A=d.find(Q=>String(Q.id)===String(y))||{name:C.name,contact_person:C.contact_person,phone:C.phone,email:C.email};Lv(y,A),H(Q=>Q+1)},disabled:Y,style:{padding:"8px 14px",fontSize:"0.85rem",background:"var(--job-office)",border:"1px solid var(--job-office)",borderRadius:"8px",color:"#fff",cursor:Y?"not-allowed":"pointer",fontWeight:600,opacity:Y?.5:1},children:""}),r.jsx("button",{type:"button",onClick:()=>{_(null),P("edit")},style:{padding:"8px 16px",fontSize:"0.85rem",background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.15)",borderRadius:"8px",color:"var(--fg)",cursor:"pointer"},children:""})]})]})}),r.jsx("div",{className:"office-client-list-panel-body",style:{padding:w==="karte"?12:16,display:"flex",flexDirection:"column"},children:w==="karte"?r.jsx(Qp,{ref:i,storeId:y,store:d.find(A=>String(A.id)===String(y))||{id:y,name:C.name,contact_person:C.contact_person,phone:C.phone,email:C.email},brands:x,clients:m,getBrandName:j,getClientName:M,onBack:()=>P("edit"),isLocked:Y},D):J?r.jsx("p",{style:{opacity:.7},children:"..."}):r.jsxs("form",{onSubmit:ae,className:"report-page-form",style:{display:"flex",flexDirection:"column",gap:12,opacity:Y?.6:1,pointerEvents:Y?"none":"auto"},children:[r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",name:"brand_name",value:C.brand_name,onChange:O,disabled:Y,placeholder:"",style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:" *"}),r.jsx("input",{type:"text",name:"name",value:C.name,onChange:O,disabled:Y,required:!0,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",name:"client_name",value:C.client_name,onChange:O,disabled:Y,placeholder:"",style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",name:"phone",value:C.phone,onChange:O,disabled:Y,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"email",name:"email",value:C.email,onChange:O,disabled:Y,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",name:"contact_person",value:C.contact_person,onChange:O,disabled:Y,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",name:"assigned_to",value:C.assigned_to,onChange:O,disabled:Y,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",name:"cleaning_frequency",value:C.cleaning_frequency,onChange:O,disabled:Y,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:"URL"}),r.jsx("input",{type:"url",name:"url",value:C.url,onChange:O,disabled:Y,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("select",{name:"status",value:C.status,onChange:O,disabled:Y,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"},children:y0.map(A=>r.jsx("option",{value:A.value,children:A.label},A.value))})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:"()"}),r.jsx("input",{type:"text",name:"acquired_by",value:C.acquired_by,onChange:O,disabled:Y,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",name:"introducer",value:C.introducer,onChange:O,disabled:Y,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("textarea",{name:"needs_notes",value:C.needs_notes,onChange:O,disabled:Y,rows:2,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("textarea",{name:"implementation_items",value:C.implementation_items,onChange:O,disabled:Y,rows:2,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]})]})})]})]})})]})]})}const rs=(()=>{var e;return typeof window<"u"&&((e=window.location)==null?void 0:e.hostname)==="localhost"?"/api":"https://51bhoxkbxd.execute-api.ap-northeast-1.amazonaws.com/prod"})(),x0=[{value:"active",label:""},{value:"contract_in_progress",label:""},{value:"suspended",label:""},{value:"inactive",label:""}];function _0(){const e=_t(),{startTransition:t}=nn(),[n,s]=f.useState(!0),[a,l]=f.useState([]),[i,o]=f.useState([]),[c,d]=f.useState(!1),[u,m]=f.useState({client_id:"",new_client_name:"",brand_id:"",new_brand_name:"",name:"",contact_person:"",phone:"",email:"",url:"",status:"active",cleaning_frequency:"",acquired_by:"",assigned_to:"",introducer:"",needs_notes:"",implementation_items:""}),h=()=>({Authorization:`Bearer ${localStorage.getItem("cognito_id_token")||JSON.parse(localStorage.getItem("misesapo_auth")||"{}").token}`,"Content-Type":"application/json"});f.useEffect(()=>{(async()=>{try{const[g,p]=await Promise.all([fetch(`${rs}/clients`,{headers:h()}).catch(()=>({ok:!1})),fetch(`${rs}/brands`,{headers:h()}).catch(()=>({ok:!1}))]);if(g.ok){const y=await g.json();l(Array.isArray(y)?y:y.items||[])}if(p.ok){const y=await p.json();o(Array.isArray(y)?y:y.items||[])}}catch(g){console.error(g)}finally{s(!1)}})()},[]);const x=u.client_id?i.filter(N=>String(N.client_id)===String(u.client_id)):[],v=N=>{const{name:g,value:p}=N.target;m(y=>({...y,[g]:p})),g==="client_id"&&m(y=>({...y,brand_id:"",new_brand_name:""}))},S=async N=>{var g,p,y;N.preventDefault(),d(!0);try{let _=u.client_id,w=u.brand_id;if(u.new_client_name.trim()){const H=await fetch(`${rs}/clients`,{method:"POST",headers:h(),body:JSON.stringify({name:u.new_client_name.trim(),status:"active"})});if(!H.ok)throw new Error("");const I=await H.json();_=I.id||((g=I.client)==null?void 0:g.id)}if(!_){alert(""),d(!1);return}if(u.new_brand_name.trim()){const H=await fetch(`${rs}/brands`,{method:"POST",headers:h(),body:JSON.stringify({client_id:_,name:u.new_brand_name.trim(),status:"active"})});if(!H.ok)throw new Error("");const I=await H.json();w=I.id||((p=I.brand)==null?void 0:p.id)}if(!w&&x.length===0&&!u.new_brand_name.trim()){alert(""),d(!1);return}if(!w&&u.new_brand_name.trim()||w||(w=(y=x[0])==null?void 0:y.id),!u.name.trim()){alert(""),d(!1);return}const P={client_id:_,brand_id:w||"",name:u.name.trim(),contact_person:u.contact_person.trim(),phone:u.phone.trim(),email:u.email.trim(),url:u.url.trim(),status:u.status,cleaning_frequency:u.cleaning_frequency.trim(),acquired_by:u.acquired_by.trim(),assigned_to:u.assigned_to.trim(),introducer:u.introducer.trim(),needs_notes:u.needs_notes.trim(),implementation_items:u.implementation_items.trim()};if(!(await fetch(`${rs}/stores`,{method:"POST",headers:h(),body:JSON.stringify(P)})).ok)throw new Error("");alert(""),t("/office/clients/list")}catch(_){console.error(_),alert(_.message||"")}finally{d(!1)}};return n?r.jsx("div",{className:"report-page","data-job":"office",style:{display:"flex",alignItems:"center",justifyContent:"center"},children:r.jsx("p",{className:"job-entrance-dummy",children:"..."})}):r.jsxs("div",{className:"report-page","data-job":"office",children:[r.jsx("div",{className:"report-page-viz",children:r.jsx(at,{mode:"base",className:"report-page-visualizer"})}),r.jsxs("div",{className:"report-page-content",children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"24px"},children:[r.jsx("button",{type:"button",onClick:()=>t("/office/clients/list"),style:{background:"rgba(255,255,255,0.08)",border:"1px solid rgba(255,255,255,0.1)",color:"var(--fg)",width:"40px",height:"40px",borderRadius:"50%",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"1.2rem",marginRight:"12px"},children:""}),r.jsx("h1",{style:{fontSize:"1.25rem",margin:0,fontWeight:600},children:""}),r.jsx("button",{type:"button",onClick:()=>e("/office/clients/list"),style:{marginLeft:"auto",padding:"8px 16px",fontSize:"0.8rem",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"8px",color:"var(--fg)",cursor:"pointer"},children:""})]}),r.jsxs("form",{onSubmit:S,className:"report-page-form",children:[r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsxs("select",{name:"client_id",value:u.client_id,onChange:v,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"},children:[r.jsx("option",{value:"",children:"--  --"}),a.map(N=>r.jsx("option",{value:N.id,children:N.name||N.company_name||N.id},N.id))]})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",name:"new_client_name",value:u.new_client_name,onChange:v,placeholder:"",style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsxs("select",{name:"brand_id",value:u.brand_id,onChange:v,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"},children:[r.jsx("option",{value:"",children:"--  --"}),x.map(N=>r.jsx("option",{value:N.id,children:N.name||N.id},N.id))]})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",name:"new_brand_name",value:u.new_brand_name,onChange:v,placeholder:"",style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:" *"}),r.jsx("input",{type:"text",name:"name",value:u.name,onChange:v,required:!0,placeholder:"",style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",name:"contact_person",value:u.contact_person,onChange:v,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",name:"phone",value:u.phone,onChange:v,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"email",name:"email",value:u.email,onChange:v,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:"URL"}),r.jsx("input",{type:"url",name:"url",value:u.url,onChange:v,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("select",{name:"status",value:u.status,onChange:v,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"},children:x0.map(N=>r.jsx("option",{value:N.value,children:N.label},N.value))})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",name:"cleaning_frequency",value:u.cleaning_frequency,onChange:v,placeholder:" /  ",style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:"()"}),r.jsx("input",{type:"text",name:"acquired_by",value:u.acquired_by,onChange:v,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:"()"}),r.jsx("input",{type:"text",name:"assigned_to",value:u.assigned_to,onChange:v,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("input",{type:"text",name:"introducer",value:u.introducer,onChange:v,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("textarea",{name:"needs_notes",value:u.needs_notes,onChange:v,rows:2,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{className:"report-page-field",children:[r.jsx("label",{children:""}),r.jsx("textarea",{name:"implementation_items",value:u.implementation_items,onChange:v,rows:2,style:{width:"100%",padding:10,background:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:8,color:"var(--fg)"}})]}),r.jsxs("div",{style:{display:"flex",gap:12,marginTop:24},children:[r.jsx("button",{type:"submit",disabled:c,style:{padding:"12px 24px",background:"var(--job-office)",border:"none",borderRadius:8,color:"#fff",cursor:c?"not-allowed":"pointer",fontWeight:600},children:c?"...":""}),r.jsx("button",{type:"button",onClick:()=>t("/office/clients/list"),style:{padding:"12px 24px",background:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:8,color:"var(--fg)",cursor:"pointer"},children:""})]})]})]})]})}function j0(){const{storeId:e}=ar();return f.useEffect(()=>{if(!e)return;const n=`${"/misogi/".replace(/\/?$/,"")}/admin/customers/stores/${encodeURIComponent(e)}/chart.html?store_id=${encodeURIComponent(e)}`;window.location.href=n},[e]),r.jsx("div",{className:"report-page","data-job":"office",style:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"40vh"},children:r.jsx("p",{className:"job-entrance-dummy",children:"..."})})}function b0(){return r.jsxs("div",{style:{padding:24,maxWidth:560,margin:"0 auto"},children:[r.jsx("h1",{style:{fontSize:"1.25rem",marginBottom:16},children:""}),r.jsx("p",{style:{color:"var(--muted)"},children:"URL"}),r.jsx("p",{children:r.jsx(ke,{to:"/admin/work-reports",children:""})})]})}const hd=Object.assign({"../jobs/cleaning/entrance/Page.jsx":()=>os(()=>import("./Page-BqAvSy6I.js"),[]),"../jobs/dev/entrance/Page.jsx":()=>os(()=>import("./Page-B-i0ANjY.js"),[]),"../jobs/office/entrance/Page.jsx":()=>os(()=>import("./Page-BTZPS5gT.js"),[]),"../jobs/sales/entrance/Page.jsx":()=>os(()=>import("./Page-BYmylN3L.js"),[])}),tm={};for(const e of Object.keys(hd)){const t=e.match(/\.\.\/jobs\/([^/]+)\/entrance\/Page\.jsx/);t&&(tm[t[1]]=Xt.lazy(hd[e]))}function S0(){const{job:e}=ar(),t=e?tm[e]:null;return t?r.jsx(f.Suspense,{fallback:r.jsx("div",{style:{padding:24,textAlign:"center"},children:"Loading..."}),children:r.jsx(t,{})}):r.jsxs("div",{style:{padding:24,textAlign:"center"},children:[r.jsx("p",{children:""}),r.jsx(ke,{to:"/",children:"Portal "})]})}function gd(){return r.jsxs($y,{children:[r.jsx(Le,{path:"/",element:r.jsx(rv,{})}),r.jsx(Le,{path:"/portal",element:r.jsx(Cu,{to:"/",replace:!0})}),r.jsx(Le,{path:"/entrance",element:r.jsx(Cu,{to:"/",replace:!0})}),r.jsx(Le,{path:"/jobs/:job/entrance",element:r.jsx(S0,{})}),r.jsx(Le,{path:"/jobs/:job/report",element:r.jsx(kx,{})}),r.jsx(Le,{path:"/admin",element:r.jsx(sv,{})}),r.jsx(Le,{path:"/admin/entrance",element:r.jsx(cv,{})}),r.jsx(Le,{path:"/admin/work-reports",element:r.jsx(bv,{})}),r.jsx(Le,{path:"/admin/schedule",element:r.jsx(Xv,{})}),r.jsx(Le,{path:"/office/work-reports/:reportId",element:r.jsx(od,{})}),r.jsx(Le,{path:"/sales/work-reports/:reportId",element:r.jsx(od,{})}),r.jsx(Le,{path:"/office/payroll/:userId/:yyyyMm",element:r.jsx(qx,{})}),r.jsx(Le,{path:"/report/*",element:r.jsx(b0,{})}),r.jsx(Le,{path:"/admin/hr/attendance",element:r.jsx(dx,{})}),r.jsx(Le,{path:"/sales/store/:storeKey",element:r.jsx(Rx,{})}),r.jsx(Le,{path:"/sales/report-day",element:r.jsx(Jx,{})}),r.jsx(Le,{path:"/sales/customers",element:r.jsx(r0,{})}),r.jsx(Le,{path:"/sales/clients/list",element:r.jsx(c0,{})}),r.jsx(Le,{path:"/sales/register",element:r.jsx(s0,{})}),r.jsx(Le,{path:"/sales/clients/new",element:r.jsx(o0,{})}),r.jsx(Le,{path:"/sales/kartes",element:r.jsx(i0,{})}),r.jsx(Le,{path:"/sales/leads",element:r.jsx(f0,{})}),r.jsx(Le,{path:"/sales/leads/new",element:r.jsx(m0,{})}),r.jsx(Le,{path:"/sales/leads/:leadId",element:r.jsx(h0,{})}),r.jsx(Le,{path:"/sales/schedule",element:r.jsx(g0,{})}),r.jsx(Le,{path:"/office/clients/list",element:r.jsx(v0,{})}),r.jsx(Le,{path:"/office/clients/new",element:r.jsx(_0,{})}),r.jsx(Le,{path:"/office/clients/:storeId",element:r.jsx(j0,{})})]})}const nm="misogi-v2-theme";function k0(){var n;if(typeof window>"u")return"dark";const e=document.documentElement.getAttribute("data-theme");if(e==="light"||e==="dark")return e;const t=localStorage.getItem(nm);return t==="light"||t==="dark"?t:(n=window.matchMedia)!=null&&n.call(window,"(prefers-color-scheme: light)").matches?"light":"dark"}function w0(){const[e,t]=f.useState(k0);f.useEffect(()=>{document.documentElement.setAttribute("data-theme",e),localStorage.setItem(nm,e)},[e]);const n=()=>t(s=>s==="dark"?"light":"dark");return r.jsxs("button",{type:"button",className:"theme-toggle",onClick:n,title:e==="dark"?"":"","aria-label":e==="dark"?"":"",children:[r.jsx("span",{className:"theme-toggle-icon","aria-hidden":"true",children:e==="dark"?"":""}),r.jsx("span",{className:"theme-toggle-label",children:e==="dark"?"Light":"Dark"})]})}const N0=[{to:"/",label:"Portal"},{to:"/jobs/sales/entrance",label:""},{to:"/jobs/cleaning/entrance",label:""},{to:"/jobs/office/entrance",label:""},{to:"/jobs/dev/entrance",label:""},{to:"/admin/entrance",label:""},{to:"/admin",label:" TOP"},{to:"/admin/hr/attendance",label:"HR Attendance"},{to:"/sales/store/demo",label:""}];function C0(){const[e,t]=f.useState(!1),n=tn(),s=f.useCallback(()=>t(!1),[]);return f.useEffect(()=>{s()},[n.pathname,s]),f.useEffect(()=>{if(!e)return;const a=l=>l.key==="Escape"&&s();return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[e,s]),r.jsxs(r.Fragment,{children:[r.jsx("button",{type:"button",className:"hamburger-menu-trigger",onClick:()=>t(a=>!a),"aria-expanded":e,"aria-controls":"hamburger-menu-drawer","aria-label":"",children:r.jsxs("span",{className:"hamburger-menu-icon","aria-hidden":"true",children:[r.jsx("span",{}),r.jsx("span",{}),r.jsx("span",{})]})}),r.jsx("div",{id:"hamburger-menu-drawer",className:`hamburger-menu-backdrop ${e?"is-open":""}`,"aria-hidden":!e,onClick:s,children:r.jsxs("aside",{className:"hamburger-menu-drawer",onClick:a=>a.stopPropagation(),children:[r.jsxs("div",{className:"hamburger-menu-header",children:[r.jsx("span",{className:"hamburger-menu-title",children:""}),r.jsx("button",{type:"button",className:"hamburger-menu-close",onClick:s,"aria-label":"",children:""})]}),r.jsx("nav",{className:"hamburger-menu-nav",children:N0.map(({to:a,label:l})=>r.jsx(ke,{to:a,className:"hamburger-menu-link",onClick:s,children:l},a))}),r.jsx("div",{className:"hamburger-menu-footer",children:r.jsxs("div",{className:"hamburger-menu-section",children:[r.jsx("div",{className:"hamburger-menu-section-title",children:""}),r.jsx("div",{className:"hamburger-menu-section-content",children:r.jsx(w0,{})})]})})]})})]})}function E0(e){return!!(e==="/"||e==="/portal"||/^\/jobs\/[^/]+\/entrance$/.test(e)||/^\/jobs\/[^/]+\/report$/.test(e)||e==="/sales/report-day"||e==="/sales/customers"||e==="/sales/clients/list"||e==="/sales/clients/new"||e==="/sales/kartes"||/^\/sales\/store\/[^/]+$/.test(e)||e==="/sales/leads"||e==="/sales/leads/new"||/^\/sales\/leads\/[^/]+$/.test(e)||e==="/sales/schedule"||e==="/office/clients/list"||e==="/office/clients/new"||e.startsWith("/office/clients/")&&e!=="/office/clients/list"&&e!=="/office/clients/new"||e==="/admin/entrance"||e==="/admin/work-reports"||e==="/admin/schedule"||e.startsWith("/office/payroll/")||e.startsWith("/office/work-reports/")||e.startsWith("/sales/work-reports/"))}function T0(){const e=tn(),t=E0(e.pathname);return r.jsxs(r.Fragment,{children:[r.jsx(C0,{}),r.jsx(Gy,{}),t?r.jsx("div",{className:"app-fullscreen",children:r.jsx(gd,{})}):r.jsxs("div",{style:{padding:16},children:[r.jsx("h1",{children:"MISOGI V2"}),r.jsxs("nav",{style:{display:"flex",gap:12,marginBottom:16},children:[r.jsx(ke,{to:"/",children:"Portal"}),r.jsx(ke,{to:"/jobs/sales/entrance",children:" Entrance"}),r.jsx(ke,{to:"/jobs/cleaning/entrance",children:" Entrance"}),r.jsx(ke,{to:"/admin/entrance",children:""}),r.jsx(ke,{to:"/admin",children:" TOP"}),r.jsx(ke,{to:"/admin/hr/attendance",children:"HR Attendance"}),r.jsx(ke,{to:"/sales/store/demo",children:""})]}),r.jsx(gd,{})]})]})}const Gl=document.getElementById("root");if(!Gl)document.body.innerHTML='<p style="padding:1rem;color:red">#root </p>';else try{ql.createRoot(Gl).render(r.jsx(Dy,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:r.jsx(T0,{})}))}catch(e){Gl.innerHTML='<div style="padding:1rem;color:red"><p>:</p><pre>'+(e&&e.message)+"</pre></div>",console.error(e)}export{iv as J,r as j,f as r};
